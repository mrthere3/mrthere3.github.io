<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Nginxéƒ¨ç½²å†…å®¹</title>
      <link href="/2022/12/03/NGINX%E9%83%A8%E7%BD%B2/"/>
      <url>/2022/12/03/NGINX%E9%83%A8%E7%BD%B2/</url>
      
        <content type="html"><![CDATA[<h1 id="NGINXéƒ¨ç½²"><a href="#NGINXéƒ¨ç½²" class="headerlink" title="NGINXéƒ¨ç½²"></a><em>NGINX</em>éƒ¨ç½²</h1><h2 id="NGINXä»‹ç»"><a href="#NGINXä»‹ç»" class="headerlink" title="NGINXä»‹ç»"></a><em>NGINX</em>ä»‹ç»</h2><p><code>ä½œç”¨ï¼šhttpä»£ç†ï¼Œåå‘ä»£ç†ï¼Œè´Ÿè½½å‡è¡¡ï¼ŒåŠ¨é™åˆ†ç¦»ï¼Œä½œä¸ºwebæœåŠ¡å™¨æœ€å¸¸ç”¨çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œå°¤å…¶åå‘ä»£ç†ï¼Œä¹Ÿå¯ä»¥è§£å†³æµè§ˆå™¨åŒæºé—®é¢˜ã€‚</code></p><h2 id="æ­£åä»£ç†"><a href="#æ­£åä»£ç†" class="headerlink" title="æ­£åä»£ç†"></a>æ­£åä»£ç†</h2><h3 id="æ­£å‘ä»£ç†"><a href="#æ­£å‘ä»£ç†" class="headerlink" title="æ­£å‘ä»£ç†"></a>æ­£å‘ä»£ç†</h3><p><img src="https://source.wjwsm.top/%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86.png" alt="æ­£å‘ä»£ç†"></p><h3 id="åå‘ä»£ç†"><a href="#åå‘ä»£ç†" class="headerlink" title="åå‘ä»£ç†"></a>åå‘ä»£ç†</h3><p><img src="https://source.wjwsm.top/%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86.png"></p><blockquote><p>æ­£å‘ä»£ç†ï¼Œä»£ç†çš„æ˜¯å®¢æˆ·ç«¯æ–¹å‘çš„ï¼Œåå‘ä»£ç†ä»£ç†çš„æ˜¯æœåŠ¡ç«¯æ–¹æ³•çš„ã€‚</p></blockquote><h2 id="è´Ÿè½½å‡è¡¡"><a href="#è´Ÿè½½å‡è¡¡" class="headerlink" title="è´Ÿè½½å‡è¡¡"></a>è´Ÿè½½å‡è¡¡</h2><blockquote><p>è´Ÿè½½å‡è¡¡åˆ†ç±» ç¡¬ä»¶å’Œè½¯ä»¶è´Ÿè½½å‡è¡¡</p><ol><li>ç¡¬ä»¶è´Ÿè½½å‡è¡¡ï¼ˆè´µï¼Œæ€§èƒ½é«˜ï¼Œå¹¶å‘é‡å¤§ï¼‰</li><li>è½¯ä»¶è´Ÿè½½å‡è¡¡ï¼ˆä¾¿å®œï¼Œæ€§èƒ½ä½ï¼‰</li><li>NGINX    1w-5w</li></ol></blockquote><blockquote><p>Nginxæä¾›çš„è´Ÿè½½å‡è¡¡ç­–ç•¥æœ‰2ç§ï¼šå†…ç½®ç­–ç•¥å’Œæ‰©å±•ç­–ç•¥ã€‚å†…ç½®ç­–ç•¥ä¸ºè½®è¯¢ï¼ŒåŠ æƒè½®è¯¢ï¼Œiphashï¼Œæ‰©å±•æœ‰å“åº”æ—¶é—´æœ€å°ï¼Œurlå“ˆå¸Œ</p></blockquote><h3 id="è½®è¯¢"><a href="#è½®è¯¢" class="headerlink" title="è½®è¯¢"></a>è½®è¯¢</h3><p><img src="https://source.wjwsm.top/%E8%BD%AE%E8%AF%A2.png" alt="è½®è¯¢"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">nginx.confæ–‡ä»¶ä¸­</span><br><span class="line">#è´Ÿè½½å‡è¡¡ï¼šç›®æ ‡æœåŠ¡å™¨åˆ—è¡¨</span><br><span class="line">upstream host_list&#123;</span><br><span class="line">server localhost:8081;</span><br><span class="line">server localhost:8082;</span><br><span class="line">server localhost:8083;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location /nginx&#123;</span><br><span class="line">proxy_pass:http://host_list;  </span><br><span class="line">#ä»£ç†è½¬å‘ç»™æœåŠ¡å™¨åˆ—è¡¨</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åŠ æƒè½®è¯¢"><a href="#åŠ æƒè½®è¯¢" class="headerlink" title="åŠ æƒè½®è¯¢"></a>åŠ æƒè½®è¯¢</h3><p><img src="https://source.wjwsm.top/%E5%8A%A0%E6%9D%83%E8%BD%AE%E8%AF%A2.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">nginx.confæ–‡ä»¶ä¸­</span><br><span class="line">#è´Ÿè½½å‡è¡¡ï¼šç›®æ ‡æœåŠ¡å™¨åˆ—è¡¨</span><br><span class="line">upstream host_list&#123;</span><br><span class="line">server localhost:8081 weight=1;</span><br><span class="line">server localhost:8082 weight=2;</span><br><span class="line">server localhost:8083 weight=3;</span><br><span class="line"># 1/6  1/3 1/2çš„æƒé‡æ¦‚ç‡</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location /nginx&#123;</span><br><span class="line">proxy_pass:http://host_list;  </span><br><span class="line">#ä»£ç†è½¬å‘ç»™æœåŠ¡å™¨åˆ—è¡¨</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="iphashï¼ˆå®¢æˆ·ç«¯ï¼‰"><a href="#iphashï¼ˆå®¢æˆ·ç«¯ï¼‰" class="headerlink" title="iphashï¼ˆå®¢æˆ·ç«¯ï¼‰"></a>iphashï¼ˆå®¢æˆ·ç«¯ï¼‰</h3><p><img src="https://source.wjwsm.top/iphash.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">nginx.confæ–‡ä»¶ä¸­</span><br><span class="line">#è´Ÿè½½å‡è¡¡ï¼šç›®æ ‡æœåŠ¡å™¨åˆ—è¡¨</span><br><span class="line">upstream host_list&#123;</span><br><span class="line">ip_hash; #ä¿è¯æ¯ä¸ªè®¿å®¢è®¿é—®å›ºå®šæœåŠ¡å™¨</span><br><span class="line">server localhost:8081 weight=1;</span><br><span class="line">server localhost:8082 weight=2;</span><br><span class="line">server localhost:8083 weight=3;</span><br><span class="line"># 1/6  1/3 1/2çš„æƒé‡æ¦‚ç‡</span><br><span class="line">#ip_hashå¯ä»¥é…æƒé‡ </span><br><span class="line"># ip_hashæ€§èƒ½ä½ï¼Œä¸€èˆ¬ä¸æ¨è</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location /nginx&#123;</span><br><span class="line">proxy_pass:http://host_list;  </span><br><span class="line">#ä»£ç†è½¬å‘ç»™æœåŠ¡å™¨åˆ—è¡¨</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>iphashå¯¹å®¢æˆ·ç«¯è¯·æ±‚çš„ipè¿›è¡Œhashæ“ä½œï¼Œç„¶åæ ¹æ®hashç»“æœå°†åŒä¸€ä¸ªå®¢æˆ·ç«¯ipçš„è¯·æ±‚åˆ†å‘ç»™åŒä¸€å°æœåŠ¡å™¨è¿›è¡Œå¤„ç†ï¼Œå¯ä»¥è§£å†³sessionä¸å…±äº«çš„é—®é¢˜ã€‚</code></p><h3 id="æœ€å°è¿æ¥æ•°"><a href="#æœ€å°è¿æ¥æ•°" class="headerlink" title="æœ€å°è¿æ¥æ•°"></a>æœ€å°è¿æ¥æ•°</h3><p>å°†è¯·æ±‚å‘ç»™è¿æ¥æ•°æœ€å°‘çš„æœåŠ¡å™¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">nginx.confæ–‡ä»¶ä¸­</span><br><span class="line">#è´Ÿè½½å‡è¡¡ï¼šç›®æ ‡æœåŠ¡å™¨åˆ—è¡¨</span><br><span class="line">upstream host_list&#123;</span><br><span class="line">least_conn;</span><br><span class="line">server localhost:8081;</span><br><span class="line">server localhost:8082;</span><br><span class="line">server localhost:8083;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location /nginx&#123;</span><br><span class="line">proxy_pass:http://host_list;  </span><br><span class="line">#ä»£ç†è½¬å‘ç»™æœåŠ¡å™¨åˆ—è¡¨</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å“åº”æ—¶é—´æœ€å°‘ï¼ˆç¬¬ä¸‰æ–¹ï¼‰"><a href="#å“åº”æ—¶é—´æœ€å°‘ï¼ˆç¬¬ä¸‰æ–¹ï¼‰" class="headerlink" title="å“åº”æ—¶é—´æœ€å°‘ï¼ˆç¬¬ä¸‰æ–¹ï¼‰"></a>å“åº”æ—¶é—´æœ€å°‘ï¼ˆç¬¬ä¸‰æ–¹ï¼‰</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> nginx.confæ–‡ä»¶ä¸­</span><br><span class="line">#è´Ÿè½½å‡è¡¡ï¼šç›®æ ‡æœåŠ¡å™¨åˆ—è¡¨</span><br><span class="line">upstream host_list&#123;</span><br><span class="line">fair; #å®ç°å“åº”æ—¶é—´çŸ­çš„ä¼˜å…ˆåˆ†é…</span><br><span class="line">server localhost:8081;</span><br><span class="line">server localhost:8082;</span><br><span class="line">server localhost:8083;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location /nginx&#123;</span><br><span class="line">proxy_pass:http://host_list;  </span><br><span class="line">#ä»£ç†è½¬å‘ç»™æœåŠ¡å™¨åˆ—è¡¨</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="urlå“ˆå¸Œï¼ˆæœåŠ¡ç«¯ï¼‰"><a href="#urlå“ˆå¸Œï¼ˆæœåŠ¡ç«¯ï¼‰" class="headerlink" title="urlå“ˆå¸Œï¼ˆæœåŠ¡ç«¯ï¼‰"></a>urlå“ˆå¸Œï¼ˆæœåŠ¡ç«¯ï¼‰</h3><blockquote><p>urlå“ˆå¸Œä¹‹åæŒ‡å‘å¯¹åº”çš„å›ºå®šæœåŠ¡å™¨ï¼Œç»Ÿä¸€èµ„æºå¤šæ¬¡è¯·æ±‚ï¼Œå¯èƒ½ä¼šåˆ°ä¸åŒçš„æœåŠ¡å™¨ï¼Œå¯¼è‡´ä¸å¿…è¦çš„å¤šæ¬¡ä¸‹è½½ï¼Œç¼“å­˜å‘½ä¸­ç‡ä¸é«˜ï¼Œä»¥åŠä¸€äº›èµ„æºæ—¶é—´çš„æµªè´¹ã€‚</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> nginx.confæ–‡ä»¶ä¸­</span><br><span class="line">#è´Ÿè½½å‡è¡¡ï¼šç›®æ ‡æœåŠ¡å™¨åˆ—è¡¨</span><br><span class="line">upstream host_list&#123;</span><br><span class="line">hash $request_url; #å®ç°url_hash</span><br><span class="line">server localhost:8081;</span><br><span class="line">server localhost:8082;</span><br><span class="line">server localhost:8083;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location /nginx&#123;</span><br><span class="line">proxy_pass:http://host_list;  </span><br><span class="line">#ä»£ç†è½¬å‘ç»™æœåŠ¡å™¨åˆ—è¡¨</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åŠ¨é™åˆ†ç¦»"><a href="#åŠ¨é™åˆ†ç¦»" class="headerlink" title="åŠ¨é™åˆ†ç¦»"></a>åŠ¨é™åˆ†ç¦»</h2><ul><li>è·¨åŸŸè§£å†³æ–¹æ¡ˆ</li></ul><p>jsonpã€åç«¯ç¨‹åºï¼ˆå…è®¸è·¨åŸŸï¼‰ã€å‰ç«¯ä»£ç†æœåŠ¡å™¨ã€nginxæœåŠ¡å™¨</p><blockquote><p>åŠ¨é™åˆ†ç¦»ï¼Œåœ¨æˆ‘ä»¬çš„è½¯ä»¶å¼€å‘ä¸­ï¼Œæœ‰äº›è¯·æ±‚æ˜¯éœ€è¦åå°å¤„ç†çš„ï¼Œæœ‰äº›è¯·æ±‚æ˜¯ä¸éœ€è¦ç»è¿‡åå°å¤„ç†çš„ï¼ˆå¦‚ï¼šcssã€htmlã€jpgã€jsç­‰ç­‰æ–‡ä»¶ï¼‰ï¼Œè¿™äº›ä¸éœ€è¦ç»è¿‡åå°å¤„ç†çš„æ–‡ä»¶ç§°ä¸ºé™æ€æ–‡ä»¶ã€‚è®©åŠ¨æ€ç½‘ç«™é‡Œçš„åŠ¨æ€ç½‘é¡µæ ¹æ®ä¸€å®šè§„åˆ™æŠŠä¸å˜çš„èµ„æºå’Œç»å¸¸å˜çš„èµ„æºåŒºåˆ†å¼€æ¥ï¼ŒåŠ¨é™èµ„æºåšå¥½äº†æ‹†åˆ†ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®é™æ€èµ„æºçš„ç‰¹ç‚¹å°†å…¶åšç¼“å­˜æ“ä½œã€‚æé«˜èµ„æºå“åº”çš„é€Ÿåº¦ã€‚</p></blockquote><p><img src="https://source.wjwsm.top/%E5%8A%A8%E9%9D%99%E5%88%86%E7%A6%BB.png" alt="åŠ¨é™åˆ†ç¦»"></p><h2 id="LINUXç¯å¢ƒä¸‹å®‰è£…nginx"><a href="#LINUXç¯å¢ƒä¸‹å®‰è£…nginx" class="headerlink" title="LINUXç¯å¢ƒä¸‹å®‰è£…nginx"></a><em>LINUX</em>ç¯å¢ƒä¸‹å®‰è£…nginx</h2><p><strong>1ã€å®‰è£…gcc</strong></p><p>å®‰è£… nginx éœ€è¦å…ˆå°†å®˜ç½‘ä¸‹è½½çš„æºç è¿›è¡Œç¼–è¯‘ï¼Œç¼–è¯‘ä¾èµ– gcc ç¯å¢ƒï¼Œå¦‚æœæ²¡æœ‰ gcc ç¯å¢ƒï¼Œåˆ™éœ€è¦å®‰è£…ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install gcc-c++</span><br></pre></td></tr></table></figure><p><strong>2ã€PCRE pcre-devel å®‰è£…</strong></p><p>PCRE(Perl Compatible Regular Expressions) æ˜¯ä¸€ä¸ªPerlåº“ï¼ŒåŒ…æ‹¬ perl å…¼å®¹çš„æ­£åˆ™è¡¨è¾¾å¼åº“ã€‚nginx çš„ http æ¨¡å—ä½¿ç”¨ pcre æ¥è§£ææ­£åˆ™è¡¨è¾¾å¼ï¼Œæ‰€ä»¥éœ€è¦åœ¨ linux ä¸Šå®‰è£… pcre åº“ï¼Œpcre-devel æ˜¯ä½¿ç”¨ pcre å¼€å‘çš„ä¸€ä¸ªäºŒæ¬¡å¼€å‘åº“ã€‚nginxä¹Ÿéœ€è¦æ­¤åº“ã€‚å‘½ä»¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y pcre pcre-devel</span><br></pre></td></tr></table></figure><p><strong>3ã€zlib å®‰è£…</strong></p><p>zlib åº“æä¾›äº†å¾ˆå¤šç§å‹ç¼©å’Œè§£å‹ç¼©çš„æ–¹å¼ï¼Œ nginx ä½¿ç”¨ zlib å¯¹ http åŒ…çš„å†…å®¹è¿›è¡Œ gzip ï¼Œæ‰€ä»¥éœ€è¦åœ¨ Centos ä¸Šå®‰è£… zlib åº“ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y zlib zlib-devel</span><br></pre></td></tr></table></figure><p><strong>4ã€OpenSSL å®‰è£…</strong><br>OpenSSL æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å®‰å…¨å¥—æ¥å­—å±‚å¯†ç åº“ï¼Œå›Šæ‹¬ä¸»è¦çš„å¯†ç ç®—æ³•ã€å¸¸ç”¨çš„å¯†é’¥å’Œè¯ä¹¦å°è£…ç®¡ç†åŠŸèƒ½åŠ SSL åè®®ï¼Œå¹¶æä¾›ä¸°å¯Œçš„åº”ç”¨ç¨‹åºä¾›æµ‹è¯•æˆ–å…¶å®ƒç›®çš„ä½¿ç”¨ã€‚<br>nginx ä¸ä»…æ”¯æŒ http åè®®ï¼Œè¿˜æ”¯æŒ httpsï¼ˆå³åœ¨sslåè®®ä¸Šä¼ è¾“httpï¼‰ï¼Œæ‰€ä»¥éœ€è¦åœ¨ Centos å®‰è£… OpenSSL åº“ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y openssl openssl-devel</span><br></pre></td></tr></table></figure><p><strong>5ã€ä¸‹è½½å®‰è£…åŒ…</strong></p><p>æ‰‹åŠ¨ä¸‹è½½.tar.gzå®‰è£…åŒ…ï¼Œåœ°å€ï¼š<a href="https://nginx.org/en/download.html">https://nginx.org/en/download.html</a></p><p>ä¸‹è½½å®Œæ¯•ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Š &#x2F;root</p><p><strong>6ã€è§£å‹</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf nginx-1.18.0.tar.gzcd nginx-1.18.0</span><br></pre></td></tr></table></figure><p><strong>7ã€é…ç½®</strong></p><p>ä½¿ç”¨é»˜è®¤é…ç½®ï¼Œåœ¨nginxæ ¹ç›®å½•ä¸‹æ‰§è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><p>æŸ¥æ‰¾å®‰è£…è·¯å¾„ï¼š <code>whereis nginx</code></p><p>8ã€æ‰“å¼€é˜¿é‡Œäº‘å®‰å…¨ç»„80ç«¯å£ï¼Œè®¿é—®è¿œç¨‹ä¸»æœº</p><p><img src="https://source.wjwsm.top/nginx%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9Fpng.png"></p><h2 id="Nginxå¸¸ç”¨å‘½ä»¤"><a href="#Nginxå¸¸ç”¨å‘½ä»¤" class="headerlink" title="Nginxå¸¸ç”¨å‘½ä»¤"></a><em>Nginx</em>å¸¸ç”¨å‘½ä»¤</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/nginx/sbin/</span><br><span class="line">./nginx  å¯åŠ¨</span><br><span class="line">./nginx -s stop  åœæ­¢</span><br><span class="line">./nginx -s quit  å®‰å…¨é€€å‡º</span><br><span class="line">./nginx -s reload  é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶</span><br><span class="line">ps aux|grep nginx  æŸ¥çœ‹nginxè¿›ç¨‹</span><br></pre></td></tr></table></figure><h2 id="Nginxé…ç½®æ–‡ä»¶è¯¦è§£"><a href="#Nginxé…ç½®æ–‡ä»¶è¯¦è§£" class="headerlink" title="Nginxé…ç½®æ–‡ä»¶è¯¦è§£"></a><em>Nginx</em>é…ç½®æ–‡ä»¶è¯¦è§£</h2><ol><li><p>worker_processes 1;é…ç½®workerè¿›ç¨‹çš„æ•°é‡ï¼Œå»ºè®®ï¼Œæœ€å°æ˜¯1ï¼›æœ€å¤§ç­‰äºcpuçš„çº¿ç¨‹æ•°</p></li><li><p>eventsè¿›ç¨‹ </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¯ä¸€ä¸ªeventsé»˜è®¤å¹¶å‘å¤„ç†1024ä¸ªè¯·æ±‚</p><p>æœ€å¤§è¿æ¥æ•°&#x3D; worker_processes * worker_connections&#x2F;4</p></li><li><p>httpè¯·æ±‚æ¨¡å—</p><p>include mime.types  è¯·æ±‚å†…å®¹ç±»å‹</p><p>default_type  application&#x2F;octet-stream; ç¼ºçœå†…å®¹ç±»å‹</p><p>sendfile        on;å¼€å¯é«˜æ€§èƒ½æ•°æ®å¤„ç†</p><p>keepalive_timeout  65; è¿æ¥ä¿æŒæ—¶é—´</p></li><li><p>serveræ¨¡å—ï¼ˆä¸€ä¸ªserveä»£è¡¨ä¸€ä¸ªæœåŠ¡å™¨ï¼‰</p><p>ä¸€ä¸ªhttpæ¨¡å—ä¸­ï¼Œå¯ä»¥é…ç½®å¤šä¸ªnginxæœåŠ¡å™¨</p><p>listen 80;é€šä¿¡ç«¯å£å·</p><p>server_name  localhost; ä¸»æœºip</p><p>error_page 404 :404é¡µé¢</p><p>error_page   500 502 503 504  &#x2F;50x.html;50xé”™è¯¯é¡µé¢</p><p> location  ä¸€ä¸ªserverræ¨¡å—åŒ…å«å¤šä¸ªlocation</p><pre><code>location / &#123;    root   html;    index  index.html index.htm;&#125;</code></pre></li></ol><p>â€‹&#x2F; è¡¨ç¤º æ ¹ç›®å½•ä¸‹çš„æ‰€æœ‰è¯·æ±‚<a href="http://location/">http://location:80</a>â€¦â€¦</p><p>â€‹root htmlã€ ï¼›&#x2F;&#x2F;webèµ„æºæ ¹ç›®å½•</p><p>â€‹index index.html index.htm;é»˜è®¤è¯·æ±‚çš„é¦–é¡µ</p><h3 id="locationè¯¦è§£"><a href="#locationè¯¦è§£" class="headerlink" title="locationè¯¦è§£"></a>locationè¯¦è§£</h3><ol><li><p>location</p><p>è½¬å‘è¯·æ±‚</p><p>å½“nginxæ¥æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚ï¼Œè·å–è¯·æ±‚çš„urlå’Œlocationçš„è¡¨è¾¾å¼è¿›è¡ŒåŒ¹é…ï¼Œè¿›è¡Œè¯·æ±‚è½¬å‘ã€‚</p></li><li><p>è¯­æ³•</p><p>location  urlè¡¨è¾¾å¼{</p><p>â€‹        server  è¯·æ±‚è½¬å‘ç›®æ ‡ï¼›</p><p>}</p><p>é€šè¿‡æŒ‡å®šæ¨¡å¼æ¥ä¸å®¢æˆ·ç«¯è¯·æ±‚çš„URIç›¸åŒ¹é…ï¼ŒåŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š<strong>location [&#x3D;|<del>|</del>*|^~|@] pattern{â€¦â€¦}</strong></p><ul><li><p>æ²¡æœ‰ä¿®é¥°ç¬¦ è¡¨ç¤ºï¼šå¿…é¡»ä»¥æŒ‡å®šæ¨¡å¼å¼€å§‹ï¼Œå¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">ã€€ã€€server_name baidu.com;</span><br><span class="line">ã€€ã€€location /abc &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€â€¦â€¦</span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">é‚£ä¹ˆï¼Œå¦‚ä¸‹æ˜¯å¯¹çš„ï¼š</span><br><span class="line">http://baidu.com/abc</span><br><span class="line">http://baidu.com/abc?p1</span><br><span class="line">http://baidu.com/abc/</span><br><span class="line">http://baidu.com/abcde</span><br></pre></td></tr></table></figure></li><li><p>&#x3D;è¡¨ç¤ºï¼šå¿…é¡»ä¸æŒ‡å®šçš„æ¨¡å¼ç²¾ç¡®åŒ¹é…</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">server_name sish</span><br><span class="line">ã€€ã€€location = /abc &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€â€¦â€¦</span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line">&#125;</span><br><span class="line">é‚£ä¹ˆï¼Œå¦‚ä¸‹æ˜¯å¯¹çš„ï¼š</span><br><span class="line">http://baidu.com/abc</span><br><span class="line">http://baidu.com/abc?p1</span><br><span class="line">å¦‚ä¸‹æ˜¯é”™çš„ï¼š</span><br><span class="line">http://baidu.com/abc/</span><br><span class="line">http://baidu.com/abcde</span><br></pre></td></tr></table></figure></li><li><p>~ è¡¨ç¤ºï¼šæŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼è¦åŒºåˆ†å¤§å°å†™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">server_name baidu.com;</span><br><span class="line">ã€€ã€€location ~ ^/abc$ &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€â€¦â€¦</span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line">&#125;</span><br><span class="line">é‚£ä¹ˆï¼Œå¦‚ä¸‹æ˜¯å¯¹çš„ï¼š</span><br><span class="line">http://baidu.com/abc</span><br><span class="line">http://baidu.com/abc?p1=11&amp;p2=22</span><br><span class="line">å¦‚ä¸‹æ˜¯é”™çš„ï¼š</span><br><span class="line">http://baidu.com/ABC</span><br><span class="line">http://baidu.com/abc/</span><br><span class="line">http://baidu.com/abcde</span><br></pre></td></tr></table></figure></li><li><p>~* è¡¨ç¤ºï¼šæŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼ä¸åŒºåˆ†å¤§å°å†™</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">server_name baidu.com;</span><br><span class="line">location ~* ^/abc$ &#123;</span><br><span class="line">ã€€ã€€ã€€ã€€â€¦â€¦</span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line">&#125;</span><br><span class="line">é‚£ä¹ˆï¼Œå¦‚ä¸‹æ˜¯å¯¹çš„ï¼š</span><br><span class="line">http://baidu.com/abc</span><br><span class="line">http://baidu..com/ABC</span><br><span class="line">http://baidu..com/abc?p1=11&amp;p2=22</span><br><span class="line">å¦‚ä¸‹æ˜¯é”™çš„ï¼š</span><br><span class="line">http://baidu..com/abc/</span><br><span class="line">http://baidu..com/abcde</span><br></pre></td></tr></table></figure></li><li><p>^~ ç±»ä¼¼äºæ— ä¿®é¥°ç¬¦çš„è¡Œä¸ºï¼Œä¹Ÿæ˜¯ä»¥æŒ‡å®šæ¨¡å¼å¼€å§‹ï¼Œä¸åŒçš„æ˜¯ï¼Œå¦‚æœæ¨¡å¼åŒ¹é…ï¼Œ<br>é‚£ä¹ˆå°±åœæ­¢æœç´¢å…¶ä»–æ¨¡å¼äº†ã€‚</p></li><li><p>@ ï¼šå®šä¹‰å‘½ålocationåŒºæ®µï¼Œè¿™äº›åŒºæ®µå®¢æˆ·æ®µä¸èƒ½è®¿é—®ï¼Œåªå¯ä»¥ç”±å†…éƒ¨äº§ç”Ÿçš„è¯·<br>æ±‚æ¥è®¿é—®ï¼Œå¦‚try_filesæˆ–error_pageç­‰</p></li></ul></li></ol><h3 id="locationæŸ¥æ‰¾ä¼˜å…ˆçº§"><a href="#locationæŸ¥æ‰¾ä¼˜å…ˆçº§" class="headerlink" title="locationæŸ¥æ‰¾ä¼˜å…ˆçº§"></a>locationæŸ¥æ‰¾ä¼˜å…ˆçº§</h3><p>æŸ¥æ‰¾é¡ºåºå’Œä¼˜å…ˆçº§<br>1ï¼šå¸¦æœ‰â€œ&#x3D;â€œçš„ç²¾ç¡®åŒ¹é…ä¼˜å…ˆ<br>2ï¼šæ²¡æœ‰ä¿®é¥°ç¬¦çš„ç²¾ç¡®åŒ¹é…<br>3ï¼šæ­£åˆ™è¡¨è¾¾å¼æŒ‰ç…§ä»–ä»¬åœ¨é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„é¡ºåº<br>4ï¼šå¸¦æœ‰â€œ^<del>â€ä¿®é¥°ç¬¦çš„ï¼Œå¼€å¤´åŒ¹é…<br>5ï¼šå¸¦æœ‰â€œ</del>â€ æˆ–â€œ~*â€ ä¿®é¥°ç¬¦çš„ï¼Œå¦‚æœæ­£åˆ™è¡¨è¾¾å¼ä¸URIåŒ¹é…<br>6ï¼šæ²¡æœ‰ä¿®é¥°ç¬¦çš„ï¼Œå¦‚æœæŒ‡å®šå­—ç¬¦ä¸²ä¸URIå¼€å¤´åŒ¹é…</p><h3 id="locationå’Œproxy-passä»£ç†è§„åˆ™ï¼ˆæ˜¯å¦ä»¥â€œ-x2F-â€ç»“å°¾ï¼‰"><a href="#locationå’Œproxy-passä»£ç†è§„åˆ™ï¼ˆæ˜¯å¦ä»¥â€œ-x2F-â€ç»“å°¾ï¼‰" class="headerlink" title="locationå’Œproxy_passä»£ç†è§„åˆ™ï¼ˆæ˜¯å¦ä»¥â€œ&#x2F;â€ç»“å°¾ï¼‰"></a>locationå’Œproxy_passä»£ç†è§„åˆ™ï¼ˆæ˜¯å¦ä»¥â€œ&#x2F;â€ç»“å°¾ï¼‰</h3><ol><li>é…ç½® <strong>proxy_pass</strong> æ—¶ï¼Œå½“åœ¨åé¢çš„ <strong>url</strong> åŠ ä¸Šäº† **&#x2F;**ï¼Œç›¸å½“äºæ˜¯ç»å¯¹è·¯å¾„ï¼Œåˆ™ <strong>Nginx</strong> ä¸ä¼šæŠŠ <strong>location</strong> ä¸­åŒ¹é…çš„è·¯å¾„éƒ¨åˆ†åŠ å…¥ä»£ç† <strong>uri</strong>ã€‚</li></ol><ul><li>æ¯”å¦‚ä¸‹é¢é…ç½®ï¼Œæˆ‘ä»¬è®¿é—® <strong><a href="http://ip/proxy/test.html">http://IP/proxy/test.html</a></strong>ï¼Œæœ€ç»ˆä»£ç†åˆ° <strong>URL</strong> æ˜¯ <strong><a href="http://127.0.0.1/test.html">http://127.0.0.1/test.html</a></strong></li></ul>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location /proxy/ &#123;</span><br><span class="line">proxy_pass http://127.0.0.1/;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li><p>å¦‚æœé…ç½® <strong>proxy_pass</strong> æ—¶ï¼Œåé¢æ²¡æœ‰ <strong>&#x2F;<strong>ï¼Œ</strong>Nginx</strong> åˆ™ä¼šæŠŠåŒ¹é…çš„è·¯å¾„éƒ¨åˆ†åŠ å…¥ä»£ç† <strong>uri</strong>ã€‚</p><ul><li>æ¯”å¦‚ä¸‹é¢é…ç½®ï¼Œæˆ‘ä»¬è®¿é—® <strong><a href="http://ip/proxy/test.html">http://IP/proxy/test.html</a></strong>ï¼Œæœ€ç»ˆä»£ç†åˆ° <strong>URL</strong> æ˜¯ <strong><a href="http://127.0.0.1/proxy/test.html">http://127.0.0.1/proxy/test.html</a></strong></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location /proxy/ &#123;</span><br><span class="line">proxy_pass http://127.0.0.1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueå­¦ä¹ ç¬”è®°</title>
      <link href="/2022/11/12/VUE%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"/>
      <url>/2022/11/12/VUE%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h1 id="VUEå•æ–‡ä»¶è°ƒè¯•"><a href="#VUEå•æ–‡ä»¶è°ƒè¯•" class="headerlink" title="VUEå•æ–‡ä»¶è°ƒè¯•"></a><em>VUE</em>å•æ–‡ä»¶è°ƒè¯•</h1><h2 id="å¿«é€ŸåŸå‹å¼€å‘ï¼ˆå•ä¸ªvueæ–‡ä»¶è°ƒè¯•ï¼‰"><a href="#å¿«é€ŸåŸå‹å¼€å‘ï¼ˆå•ä¸ªvueæ–‡ä»¶è°ƒè¯•ï¼‰" class="headerlink" title="å¿«é€ŸåŸå‹å¼€å‘ï¼ˆå•ä¸ªvueæ–‡ä»¶è°ƒè¯•ï¼‰"></a>å¿«é€ŸåŸå‹å¼€å‘ï¼ˆå•ä¸ªvueæ–‡ä»¶è°ƒè¯•ï¼‰</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">npm install -g vue-cli@4</span><br><span class="line"></span><br><span class="line">npm install -g @vue/cli-service-global</span><br><span class="line"></span><br><span class="line">npm i -g eslint &lt;!-- é˜²æ­¢vueæ–‡ä»¶è°ƒç”¨jsæŠ¥é”™--&gt;</span><br><span class="line"></span><br><span class="line">npm install vue-template-compiler </span><br><span class="line">npm init </span><br><span class="line">vue serve test.vue</span><br></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœå¦‚å›¾</p><p><img src="https://cdn.jsdelivr.net/gh/mrthere3/typora_note/img/js/202209281213803.png"></p><h1 id="vueåŸºç¡€"><a href="#vueåŸºç¡€" class="headerlink" title="vueåŸºç¡€"></a>vueåŸºç¡€</h1><h2 id="ç±»ä¸æ ·å¼ç»‘å®š"><a href="#ç±»ä¸æ ·å¼ç»‘å®š" class="headerlink" title="ç±»ä¸æ ·å¼ç»‘å®š"></a>ç±»ä¸æ ·å¼ç»‘å®š</h2><h3 id="ç»‘å®šå¯¹è±¡"><a href="#ç»‘å®šå¯¹è±¡" class="headerlink" title="ç»‘å®šå¯¹è±¡"></a>ç»‘å®šå¯¹è±¡</h3><p>æ•°æ®ç»‘å®šçš„ä¸€ä¸ªå¸¸è§éœ€æ±‚åœºæ™¯æ˜¯æ“çºµå…ƒç´ çš„ CSS class åˆ—è¡¨å’Œå†…è”æ ·å¼ã€‚å› ä¸º class å’Œ style éƒ½æ˜¯ attributeï¼Œæˆ‘ä»¬å¯ä»¥å’Œå…¶ä»– attribute ä¸€æ ·ä½¿ç”¨ v-bind å°†å®ƒä»¬å’ŒåŠ¨æ€çš„å­—ç¬¦ä¸²ç»‘å®šã€‚ä½†æ˜¯ï¼Œåœ¨å¤„ç†æ¯”è¾ƒå¤æ‚çš„ç»‘å®šæ—¶ï¼Œé€šè¿‡æ‹¼æ¥ç”Ÿæˆå­—ç¬¦ä¸²æ˜¯éº»çƒ¦ä¸”æ˜“å‡ºé”™çš„ã€‚å› æ­¤ï¼ŒVue ä¸“é—¨ä¸º class å’Œ style çš„ v-bind ç”¨æ³•æä¾›äº†ç‰¹æ®Šçš„åŠŸèƒ½å¢å¼ºã€‚é™¤äº†å­—ç¬¦ä¸²å¤–ï¼Œè¡¨è¾¾å¼çš„å€¼ä¹Ÿå¯ä»¥æ˜¯å¯¹è±¡æˆ–æ•°ç»„ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç»™ <code>:class</code> (<code>v-bind:class</code> çš„ç¼©å†™) ä¼ é€’ä¸€ä¸ªå¯¹è±¡æ¥åŠ¨æ€åˆ‡æ¢ classï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div :class=&quot;&#123; active: isActive &#125;&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„è¯­æ³•è¡¨ç¤º <code>active</code> æ˜¯å¦å­˜åœ¨å–å†³äºæ•°æ®å±æ€§ <code>isActive</code> çš„çœŸå‡ã€‚</p><h3 id="ç»‘å®šæ•°ç»„"><a href="#ç»‘å®šæ•°ç»„" class="headerlink" title="ç»‘å®šæ•°ç»„"></a>ç»‘å®šæ•°ç»„</h3><p>æˆ‘ä»¬å¯ä»¥ç»™ <code>:class</code> ç»‘å®šä¸€ä¸ªæ•°ç»„æ¥æ¸²æŸ“å¤šä¸ª CSS classï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">activeClass</span>: <span class="string">&#x27;active&#x27;</span>,</span><br><span class="line">    <span class="attr">errorClass</span>: <span class="string">&#x27;text-danger&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;div :<span class="keyword">class</span>=<span class="string">&quot;[activeClass, errorClass]&quot;</span>&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>æ¸²æŸ“çš„ç»“æœæ˜¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;active text-danger&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>é…åˆä¸‰å…ƒè¡¨è¾¾å¼ </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div :class=&quot;[isActive ? activeClass : &#x27;&#x27;, errorClass]&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><h2 id="ç»‘å®šå†…è”æ ·å¼"><a href="#ç»‘å®šå†…è”æ ·å¼" class="headerlink" title="ç»‘å®šå†…è”æ ·å¼"></a>ç»‘å®šå†…è”æ ·å¼</h2><p>:style æ”¯æŒç»‘å®š JavaScript å¯¹è±¡å€¼ï¼Œå¯¹åº”çš„æ˜¯ HTML å…ƒç´ çš„ style å±æ€§ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">activeColor</span>: <span class="string">&#x27;red&#x27;</span>,</span><br><span class="line">    <span class="attr">fontSize</span>: <span class="number">30</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;div :style=<span class="string">&quot;&#123; color: activeColor, fontSize: fontSize + &#x27;px&#x27; &#125;&quot;</span>&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>å°½ç®¡æ¨èä½¿ç”¨ camelCaseï¼Œä½† <code>:style</code> ä¹Ÿæ”¯æŒ kebab-cased å½¢å¼çš„ CSS å±æ€§ key (å¯¹åº”å…¶ CSS ä¸­çš„å®é™…åç§°)ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div :style=&quot;&#123; &#x27;font-size&#x27;: fontSize + &#x27;px&#x27; &#125;&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>ç›´æ¥ç»‘å®šä¸€ä¸ªæ ·å¼å¯¹è±¡é€šå¸¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œè¿™æ ·å¯ä»¥ä½¿æ¨¡æ¿æ›´åŠ ç®€æ´ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">styleObject</span>: &#123;</span><br><span class="line">      <span class="attr">color</span>: <span class="string">&#x27;red&#x27;</span>,</span><br><span class="line">      <span class="attr">fontSize</span>: <span class="string">&#x27;13px&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;div :style=<span class="string">&quot;styleObject&quot;</span>&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><h2 id="æ¡ä»¶æ¸²æŸ“"><a href="#æ¡ä»¶æ¸²æŸ“" class="headerlink" title="æ¡ä»¶æ¸²æŸ“"></a>æ¡ä»¶æ¸²æŸ“</h2><h3 id="v-if"><a href="#v-if" class="headerlink" title="v-if"></a><code>v-if</code></h3><p><code>v-if</code> æŒ‡ä»¤ç”¨äºæ¡ä»¶æ€§åœ°æ¸²æŸ“ä¸€å—å†…å®¹ã€‚è¿™å—å†…å®¹åªä¼šåœ¨æŒ‡ä»¤çš„è¡¨è¾¾å¼è¿”å›çœŸå€¼æ—¶æ‰è¢«æ¸²æŸ“ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1 v-if=&quot;awesome&quot;&gt;Vue is awesome!&lt;/h1&gt;</span><br></pre></td></tr></table></figure><h3 id="v-else"><a href="#v-else" class="headerlink" title="v-else"></a><code>v-else</code></h3><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>v-else</code> ä¸º <code>v-if</code> æ·»åŠ ä¸€ä¸ªâ€œelse åŒºå—â€ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click=&quot;awesome = !awesome&quot;&gt;Toggle&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">&lt;h1 v-if=&quot;awesome&quot;&gt;Vue is awesome!&lt;/h1&gt;</span><br><span class="line">&lt;h1 v-else&gt;Oh no ğŸ˜¢&lt;/h1&gt;</span><br></pre></td></tr></table></figure><h3 id="v-else-if"><a href="#v-else-if" class="headerlink" title="v-else-if"></a><code>v-else-if</code></h3><p>é¡¾åæ€ä¹‰ï¼Œv-else-if æä¾›çš„æ˜¯ç›¸åº”äº v-if çš„â€œelse if åŒºå—â€ã€‚å®ƒå¯ä»¥è¿ç»­å¤šæ¬¡é‡å¤ä½¿ç”¨ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-if=&quot;type === &#x27;A&#x27;&quot;&gt;</span><br><span class="line">  A</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div v-else-if=&quot;type === &#x27;B&#x27;&quot;&gt;</span><br><span class="line">  B</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div v-else-if=&quot;type === &#x27;C&#x27;&quot;&gt;</span><br><span class="line">  C</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div v-else&gt;</span><br><span class="line">  Not A/B/C</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>å’Œ v-else ç±»ä¼¼ï¼Œä¸€ä¸ªä½¿ç”¨ v-else-if çš„å…ƒç´ å¿…é¡»ç´§è·Ÿåœ¨ä¸€ä¸ª v-if æˆ–ä¸€ä¸ª v-else-if å…ƒç´ åé¢ã€‚</p><h3 id="lt-template-gt-ä¸Šçš„-v-if"><a href="#lt-template-gt-ä¸Šçš„-v-if" class="headerlink" title="&lt;template&gt; ä¸Šçš„ v-if"></a><code>&lt;template&gt;</code> ä¸Šçš„ <code>v-if</code></h3><p>å› ä¸º <code>v-if</code> æ˜¯ä¸€ä¸ªæŒ‡ä»¤ï¼Œä»–å¿…é¡»ä¾é™„äºæŸä¸ªå…ƒç´ ã€‚ä½†å¦‚æœæˆ‘ä»¬æƒ³è¦åˆ‡æ¢ä¸æ­¢ä¸€ä¸ªå…ƒç´ å‘¢ï¼Ÿåœ¨è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ª <code>&lt;template&gt;</code> å…ƒç´ ä¸Šä½¿ç”¨ <code>v-if</code>ï¼Œè¿™åªæ˜¯ä¸€ä¸ªä¸å¯è§çš„åŒ…è£…å™¨å…ƒç´ ï¼Œæœ€åæ¸²æŸ“çš„ç»“æœå¹¶ä¸ä¼šåŒ…å«è¿™ä¸ª <code>&lt;template&gt;</code> å…ƒç´ ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template v-if=&quot;ok&quot;&gt;</span><br><span class="line">  &lt;h1&gt;Title&lt;/h1&gt;</span><br><span class="line">  &lt;p&gt;Paragraph 1&lt;/p&gt;</span><br><span class="line">  &lt;p&gt;Paragraph 2&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h3 id="v-show"><a href="#v-show" class="headerlink" title="v-show"></a><code>v-show</code></h3><p>å¦ä¸€ä¸ªå¯ä»¥ç”¨æ¥æŒ‰æ¡ä»¶æ˜¾ç¤ºä¸€ä¸ªå…ƒç´ çš„æŒ‡ä»¤æ˜¯ v-showã€‚å…¶ç”¨æ³•åŸºæœ¬ä¸€æ ·ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1 v-show=&quot;ok&quot;&gt;Hello!&lt;/h1&gt;</span><br></pre></td></tr></table></figure><p>ä¸åŒä¹‹å¤„åœ¨äº v-show ä¼šåœ¨ DOM æ¸²æŸ“ä¸­ä¿ç•™è¯¥å…ƒç´ ï¼›v-show ä»…åˆ‡æ¢äº†è¯¥å…ƒç´ ä¸Šåä¸º display çš„ CSS å±æ€§ã€‚</p><p>v-show ä¸æ”¯æŒåœ¨ <code>template</code>å…ƒç´ ä¸Šä½¿ç”¨ï¼Œä¹Ÿä¸èƒ½å’Œ v-else æ­é…ä½¿ç”¨ã€‚</p><h2 id="åˆ—è¡¨æ¸²æŸ“"><a href="#åˆ—è¡¨æ¸²æŸ“" class="headerlink" title="åˆ—è¡¨æ¸²æŸ“"></a>åˆ—è¡¨æ¸²æŸ“</h2><h3 id="v-for"><a href="#v-for" class="headerlink" title="v-for"></a><code>v-for</code></h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ v-for æŒ‡ä»¤åŸºäºä¸€ä¸ªæ•°ç»„æ¥æ¸²æŸ“ä¸€ä¸ªåˆ—è¡¨ã€‚v-for æŒ‡ä»¤çš„å€¼éœ€è¦ä½¿ç”¨ item in items å½¢å¼çš„ç‰¹æ®Šè¯­æ³•ï¼Œå…¶ä¸­ items æ˜¯æºæ•°æ®çš„æ•°ç»„ï¼Œè€Œ item æ˜¯è¿­ä»£é¡¹çš„åˆ«åï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    items: [&#123; message: &#x27;Foo&#x27; &#125;, &#123; message: &#x27;Bar&#x27; &#125;]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;li v-for=&quot;item in items&quot;&gt;</span><br><span class="line">  &#123;&#123; item.message &#125;&#125;</span><br><span class="line">&lt;/li&gt;</span><br></pre></td></tr></table></figure><p>åœ¨ v-for å—ä¸­å¯ä»¥å®Œæ•´åœ°è®¿é—®çˆ¶ä½œç”¨åŸŸå†…çš„å±æ€§å’Œå˜é‡ã€‚v-for ä¹Ÿæ”¯æŒä½¿ç”¨å¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºå½“å‰é¡¹çš„ä½ç½®ç´¢å¼•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">parentMessage</span>: <span class="string">&#x27;Parent&#x27;</span>,</span><br><span class="line">    <span class="attr">items</span>: [&#123; <span class="attr">message</span>: <span class="string">&#x27;Foo&#x27;</span> &#125;, &#123; <span class="attr">message</span>: <span class="string">&#x27;Bar&#x27;</span> &#125;]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;li v-for=&quot;(item, index) in items&quot;&gt;</span><br><span class="line">  &#123;&#123; parentMessage &#125;&#125; - &#123;&#123; index &#125;&#125; - &#123;&#123; item.message &#125;&#125;</span><br><span class="line">&lt;/li&gt;</span><br></pre></td></tr></table></figure><p>å¯¹äºå¤šå±‚åµŒå¥—çš„ v-forï¼Œä½œç”¨åŸŸçš„å·¥ä½œæ–¹å¼å’Œå‡½æ•°çš„ä½œç”¨åŸŸå¾ˆç±»ä¼¼ã€‚æ¯ä¸ª v-for ä½œç”¨åŸŸéƒ½å¯ä»¥è®¿é—®åˆ°çˆ¶çº§ä½œç”¨åŸŸï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;li v-for=&quot;item in items&quot;&gt;</span><br><span class="line">  &lt;span v-for=&quot;childItem in item.children&quot;&gt;</span><br><span class="line">    &#123;&#123; item.message &#125;&#125; &#123;&#123; childItem &#125;&#125;</span><br><span class="line">  &lt;/span&gt;</span><br><span class="line">&lt;/li&gt;</span><br></pre></td></tr></table></figure><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ of ä½œä¸ºåˆ†éš”ç¬¦æ¥æ›¿ä»£ inï¼Œè¿™æ›´æ¥è¿‘ JavaScript çš„è¿­ä»£å™¨è¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-for=&quot;item of items&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><h3 id="v-for-ä¸å¯¹è±¡"><a href="#v-for-ä¸å¯¹è±¡" class="headerlink" title="v-for ä¸å¯¹è±¡"></a><code>v-for</code> ä¸å¯¹è±¡</h3><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>v-for</code> æ¥éå†ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§ã€‚éå†çš„é¡ºåºä¼šåŸºäºå¯¹è¯¥å¯¹è±¡è°ƒç”¨ <code>Object.keys()</code> çš„è¿”å›å€¼æ¥å†³å®šã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    myObject: &#123;</span><br><span class="line">      title: &#x27;How to do lists in Vue&#x27;,</span><br><span class="line">      author: &#x27;Jane Doe&#x27;,</span><br><span class="line">      publishedAt: &#x27;2016-04-10&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;li v-for=&quot;value in myObject&quot;&gt;</span><br><span class="line">    &#123;&#123; value &#125;&#125; &lt;!--valueè¡¨ç¤ºå±æ€§å€¼--&gt; </span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure><p>å¯ä»¥é€šè¿‡æä¾›ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºå±æ€§å (ä¾‹å¦‚ key)ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;li v-for=&quot;(value, key) in myObject&quot;&gt;</span><br><span class="line">  &#123;&#123; key &#125;&#125;: &#123;&#123; value &#125;&#125;</span><br><span class="line">&lt;/li&gt;</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸‰ä¸ªå‚æ•°è¡¨ç¤ºä½ç½®ç´¢å¼•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;li v-for=&quot;(value, key, index) in myObject&quot;&gt;</span><br><span class="line">  &#123;&#123; index &#125;&#125;. &#123;&#123; key &#125;&#125;: &#123;&#123; value &#125;&#125;</span><br><span class="line">&lt;/li&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="åœ¨-v-for-é‡Œä½¿ç”¨èŒƒå›´å€¼"><a href="#åœ¨-v-for-é‡Œä½¿ç”¨èŒƒå›´å€¼" class="headerlink" title="åœ¨ v-for é‡Œä½¿ç”¨èŒƒå›´å€¼"></a>åœ¨ <code>v-for</code> é‡Œä½¿ç”¨èŒƒå›´å€¼</h3><p>v-for å¯ä»¥ç›´æ¥æ¥å—ä¸€ä¸ªæ•´æ•°å€¼ã€‚åœ¨è¿™ç§ç”¨ä¾‹ä¸­ï¼Œä¼šå°†è¯¥æ¨¡æ¿åŸºäº 1â€¦n çš„å–å€¼èŒƒå›´é‡å¤å¤šæ¬¡ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;span v-for=&quot;n in 10&quot;&gt;&#123;&#123; n &#125;&#125;&lt;/span&gt;</span><br></pre></td></tr></table></figure><p>æ³¨æ„æ­¤å¤„ n çš„åˆå€¼æ˜¯ä» 1 å¼€å§‹è€Œé 0ã€‚</p><h3 id="lt-template-gt-ä¸Šçš„-v-for"><a href="#lt-template-gt-ä¸Šçš„-v-for" class="headerlink" title="&lt;template&gt; ä¸Šçš„ v-for"></a><code>&lt;template&gt;</code> ä¸Šçš„ <code>v-for</code></h3><p>ä¸æ¨¡æ¿ä¸Šçš„ <code>v-if</code> ç±»ä¼¼ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ <code>&lt;template&gt;</code> æ ‡ç­¾ä¸Šä½¿ç”¨ <code>v-for</code> æ¥æ¸²æŸ“ä¸€ä¸ªåŒ…å«å¤šä¸ªå…ƒç´ çš„å—ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;template v-for=&quot;item in items&quot;&gt;</span><br><span class="line">    &lt;li&gt;&#123;&#123; item.msg &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;li class=&quot;divider&quot; role=&quot;presentation&quot;&gt;&lt;/li&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="v-for-ä¸-v-if"><a href="#v-for-ä¸-v-if" class="headerlink" title="v-for ä¸ v-if"></a><code>v-for</code> ä¸ <code>v-if</code></h3><p>å½“å®ƒä»¬åŒæ—¶å­˜åœ¨äºä¸€ä¸ªèŠ‚ç‚¹ä¸Šæ—¶ï¼Œ<code>v-if</code> æ¯” <code>v-for</code> çš„ä¼˜å…ˆçº§æ›´é«˜ã€‚è¿™æ„å‘³ç€ <code>v-if</code> çš„æ¡ä»¶å°†æ— æ³•è®¿é—®åˆ° <code>v-for</code> ä½œç”¨åŸŸå†…å®šä¹‰çš„å˜é‡åˆ«åï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--</span><br><span class="line"> è¿™ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸ºå±æ€§ todo æ­¤æ—¶</span><br><span class="line"> æ²¡æœ‰åœ¨è¯¥å®ä¾‹ä¸Šå®šä¹‰</span><br><span class="line">--&gt;</span><br><span class="line">&lt;li v-for=&quot;todo in todos&quot; v-if=&quot;!todo.isComplete&quot;&gt;</span><br><span class="line">  &#123;&#123; todo.name &#125;&#125;</span><br><span class="line">&lt;/li&gt;</span><br><span class="line">&lt;!--</span><br><span class="line"> è¿™ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸ºå±æ€§ todo æ­¤æ—¶</span><br><span class="line"> æ²¡æœ‰åœ¨è¯¥å®ä¾‹ä¸Šå®šä¹‰</span><br><span class="line">--&gt;</span><br><span class="line">&lt;li v-for=&quot;todo in todos&quot; v-if=&quot;!todo.isComplete&quot;&gt;</span><br><span class="line">  &#123;&#123; todo.name &#125;&#125;</span><br><span class="line">&lt;/li&gt;</span><br></pre></td></tr></table></figure><h2 id="äº‹ä»¶å¤„ç†v-on"><a href="#äº‹ä»¶å¤„ç†v-on" class="headerlink" title="äº‹ä»¶å¤„ç†v-on"></a>äº‹ä»¶å¤„ç†<code>v-on</code></h2><h3 id="ç›‘å¬äº‹ä»¶v-on"><a href="#ç›‘å¬äº‹ä»¶v-on" class="headerlink" title="ç›‘å¬äº‹ä»¶v-on"></a>ç›‘å¬äº‹ä»¶<code>v-on</code></h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>v-on</code> æŒ‡ä»¤ (ç®€å†™ä¸º <code>@</code>) æ¥ç›‘å¬ DOM äº‹ä»¶ï¼Œå¹¶åœ¨äº‹ä»¶è§¦å‘æ—¶æ‰§è¡Œå¯¹åº”çš„ JavaScriptã€‚ç”¨æ³•ï¼š<code>v-on:click=&quot;methodName&quot;</code> æˆ– <code>@click=&quot;handler&quot;</code>ã€‚</p><p>äº‹ä»¶å¤„ç†å™¨çš„å€¼å¯ä»¥æ˜¯ï¼š</p><ol><li><p><strong>å†…è”äº‹ä»¶å¤„ç†å™¨</strong>ï¼šäº‹ä»¶è¢«è§¦å‘æ—¶æ‰§è¡Œçš„å†…è” JavaScript è¯­å¥ (ä¸ <code>onclick</code> ç±»ä¼¼)ã€‚</p></li><li><p><strong>æ–¹æ³•äº‹ä»¶å¤„ç†å™¨</strong>ï¼šä¸€ä¸ªæŒ‡å‘ç»„ä»¶ä¸Šå®šä¹‰çš„æ–¹æ³•çš„å±æ€§åæˆ–æ˜¯è·¯å¾„ã€‚     </p><hr></li></ol><h3 id="å†…è”äº‹ä»¶å¤„ç†å™¨"><a href="#å†…è”äº‹ä»¶å¤„ç†å™¨" class="headerlink" title="å†…è”äº‹ä»¶å¤„ç†å™¨"></a>å†…è”äº‹ä»¶å¤„ç†å™¨</h3><p>å†…è”äº‹ä»¶å¤„ç†å™¨é€šå¸¸ç”¨äºç®€å•åœºæ™¯ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    count: 0</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;button @click=&quot;count++&quot;&gt;Add 1&lt;/button&gt;</span><br><span class="line">&lt;p&gt;Count is: &#123;&#123; count &#125;&#125;&lt;/p&gt;</span><br></pre></td></tr></table></figure><hr><h3 id="æ–¹æ³•äº‹ä»¶å¤„ç†å™¨"><a href="#æ–¹æ³•äº‹ä»¶å¤„ç†å™¨" class="headerlink" title="æ–¹æ³•äº‹ä»¶å¤„ç†å™¨"></a>æ–¹æ³•äº‹ä»¶å¤„ç†å™¨</h3><p>éšç€äº‹ä»¶å¤„ç†å™¨çš„é€»è¾‘å˜å¾—æ„ˆå‘å¤æ‚ï¼Œå†…è”ä»£ç æ–¹å¼å˜å¾—ä¸å¤Ÿçµæ´»ã€‚å› æ­¤ v-on ä¹Ÿå¯ä»¥æ¥å—ä¸€ä¸ªæ–¹æ³•åæˆ–å¯¹æŸä¸ªæ–¹æ³•çš„è°ƒç”¨ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    name: &#x27;Vue.js&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">  greet(event) &#123;</span><br><span class="line">    // æ–¹æ³•ä¸­çš„ `this` æŒ‡å‘å½“å‰æ´»è·ƒçš„ç»„ä»¶å®ä¾‹</span><br><span class="line">    alert(`Hello $&#123;this.name&#125;!`)</span><br><span class="line">    // `event` æ˜¯ DOM åŸç”Ÿäº‹ä»¶</span><br><span class="line">    if (event) &#123;</span><br><span class="line">      alert(event.target.tagName)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;!-- `greet` æ˜¯ä¸Šé¢å®šä¹‰è¿‡çš„æ–¹æ³•å --&gt;</span><br><span class="line">&lt;button @click=&quot;greet&quot;&gt;Greet&lt;/button&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•ä¸å†…è”äº‹ä»¶åˆ¤æ–­"><a href="#æ–¹æ³•ä¸å†…è”äº‹ä»¶åˆ¤æ–­" class="headerlink" title="æ–¹æ³•ä¸å†…è”äº‹ä»¶åˆ¤æ–­"></a>æ–¹æ³•ä¸å†…è”äº‹ä»¶åˆ¤æ–­</h3><p>æ¨¡æ¿ç¼–è¯‘å™¨ä¼šé€šè¿‡æ£€æŸ¥ v-on çš„å€¼æ˜¯å¦æ˜¯åˆæ³•çš„ JavaScript æ ‡è¯†ç¬¦æˆ–å±æ€§è®¿é—®è·¯å¾„æ¥æ–­å®šæ˜¯ä½•ç§å½¢å¼çš„äº‹ä»¶å¤„ç†å™¨ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œfooã€foo.bar å’Œ foo[â€˜barâ€™] ä¼šè¢«è§†ä¸ºæ–¹æ³•äº‹ä»¶å¤„ç†å™¨ï¼Œè€Œ foo() å’Œ count++ ä¼šè¢«è§†ä¸ºå†…è”äº‹ä»¶å¤„ç†å™¨</p><h3 id="åœ¨å†…è”å¤„ç†å™¨ä¸­è°ƒç”¨æ–¹æ³•"><a href="#åœ¨å†…è”å¤„ç†å™¨ä¸­è°ƒç”¨æ–¹æ³•" class="headerlink" title="åœ¨å†…è”å¤„ç†å™¨ä¸­è°ƒç”¨æ–¹æ³•"></a>åœ¨å†…è”å¤„ç†å™¨ä¸­è°ƒç”¨æ–¹æ³•</h3><p>é™¤äº†ç›´æ¥ç»‘å®šæ–¹æ³•åï¼Œä½ è¿˜å¯ä»¥åœ¨å†…è”äº‹ä»¶å¤„ç†å™¨ä¸­è°ƒç”¨æ–¹æ³•ã€‚è¿™å…è®¸æˆ‘ä»¬å‘æ–¹æ³•ä¼ å…¥è‡ªå®šä¹‰å‚æ•°ä»¥ä»£æ›¿åŸç”Ÿäº‹ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  say(message) &#123;</span><br><span class="line">    alert(message)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;button @click=&quot;say(&#x27;hello&#x27;)&quot;&gt;Say hello&lt;/button&gt;</span><br><span class="line">&lt;button @click=&quot;say(&#x27;bye&#x27;)&quot;&gt;Say bye&lt;/button&gt;</span><br></pre></td></tr></table></figure><hr><h3 id="åœ¨å†…è”äº‹ä»¶å¤„ç†å™¨ä¸­è®¿é—®äº‹ä»¶å‚æ•°"><a href="#åœ¨å†…è”äº‹ä»¶å¤„ç†å™¨ä¸­è®¿é—®äº‹ä»¶å‚æ•°" class="headerlink" title="åœ¨å†…è”äº‹ä»¶å¤„ç†å™¨ä¸­è®¿é—®äº‹ä»¶å‚æ•°"></a>åœ¨å†…è”äº‹ä»¶å¤„ç†å™¨ä¸­è®¿é—®äº‹ä»¶å‚æ•°</h3><p>æœ‰æ—¶æˆ‘ä»¬éœ€è¦åœ¨å†…è”äº‹ä»¶å¤„ç†å™¨ä¸­è®¿é—®åŸç”Ÿ DOM äº‹ä»¶ã€‚ä½ å¯ä»¥å‘è¯¥å¤„ç†å™¨æ–¹æ³•ä¼ å…¥ä¸€ä¸ªç‰¹æ®Šçš„ <code>$event</code> å˜é‡ï¼Œæˆ–è€…ä½¿ç”¨å†…è”ç®­å¤´å‡½æ•°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ä½¿ç”¨ç‰¹æ®Šçš„ $event å˜é‡ --&gt;</span><br><span class="line">&lt;button @click=&quot;warn(&#x27;Form cannot be submitted yet.&#x27;, $event)&quot;&gt;</span><br><span class="line">  Submit</span><br><span class="line">&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ä½¿ç”¨å†…è”ç®­å¤´å‡½æ•° --&gt;</span><br><span class="line">&lt;button @click=&quot;(event) =&gt; warn(&#x27;Form cannot be submitted yet.&#x27;, event)&quot;&gt;</span><br><span class="line">  Submit</span><br><span class="line">&lt;/button&gt;</span><br><span class="line">methods: &#123;</span><br><span class="line">  warn(message, event) &#123;</span><br><span class="line">    // è¿™é‡Œå¯ä»¥è®¿é—® DOM åŸç”Ÿäº‹ä»¶</span><br><span class="line">    if (event) &#123;</span><br><span class="line">      event.preventDefault()</span><br><span class="line">    &#125;</span><br><span class="line">    alert(message)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h3 id="äº‹ä»¶ä¿®é¥°ç¬¦"><a href="#äº‹ä»¶ä¿®é¥°ç¬¦" class="headerlink" title="äº‹ä»¶ä¿®é¥°ç¬¦"></a>äº‹ä»¶ä¿®é¥°ç¬¦</h3><p>åœ¨å¤„ç†äº‹ä»¶æ—¶è°ƒç”¨ <code>event.preventDefault()</code> æˆ– <code>event.stopPropagation()</code> æ˜¯å¾ˆå¸¸è§çš„ã€‚å°½ç®¡æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨æ–¹æ³•å†…è°ƒç”¨ï¼Œä½†å¦‚æœæ–¹æ³•èƒ½æ›´ä¸“æ³¨äºæ•°æ®é€»è¾‘è€Œä¸ç”¨å»å¤„ç† DOM äº‹ä»¶çš„ç»†èŠ‚ä¼šæ›´å¥½ã€‚</p><p>ä¸ºè§£å†³è¿™ä¸€é—®é¢˜ï¼ŒVue ä¸º <code>v-on</code> æä¾›äº†<strong>äº‹ä»¶ä¿®é¥°ç¬¦</strong>ã€‚ä¿®é¥°ç¬¦æ˜¯ç”¨ <code>.</code> è¡¨ç¤ºçš„æŒ‡ä»¤åç¼€ï¼ŒåŒ…å«ä»¥ä¸‹è¿™äº›ï¼š</p><ul><li><p><code>.stop</code></p></li><li><p><code>.prevent</code></p></li><li><p><code>.self</code></p></li><li><p><code>.capture</code></p></li><li><p><code>.once</code></p></li><li><p><code>.passive</code></p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å•å‡»äº‹ä»¶å°†åœæ­¢ä¼ é€’ --&gt;</span><br><span class="line">&lt;a @click.stop=&quot;doThis&quot;&gt;&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- æäº¤äº‹ä»¶å°†ä¸å†é‡æ–°åŠ è½½é¡µé¢ --&gt;</span><br><span class="line">&lt;form @submit.prevent=&quot;onSubmit&quot;&gt;&lt;/form&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ä¿®é¥°è¯­å¯ä»¥ä½¿ç”¨é“¾å¼ä¹¦å†™ --&gt;</span><br><span class="line">&lt;a @click.stop.prevent=&quot;doThat&quot;&gt;&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ä¹Ÿå¯ä»¥åªæœ‰ä¿®é¥°ç¬¦ --&gt;</span><br><span class="line">&lt;form @submit.prevent&gt;&lt;/form&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ä»…å½“ event.target æ˜¯å…ƒç´ æœ¬èº«æ—¶æ‰ä¼šè§¦å‘äº‹ä»¶å¤„ç†å™¨ --&gt;</span><br><span class="line">&lt;!-- ä¾‹å¦‚ï¼šäº‹ä»¶å¤„ç†å™¨ä¸æ¥è‡ªå­å…ƒç´  --&gt;</span><br><span class="line">&lt;div @click.self=&quot;doThat&quot;&gt;...&lt;/div&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h3 id="æŒ‰é”®ä¿®é¥°ç¬¦"><a href="#æŒ‰é”®ä¿®é¥°ç¬¦" class="headerlink" title="æŒ‰é”®ä¿®é¥°ç¬¦"></a>æŒ‰é”®ä¿®é¥°ç¬¦</h3><p>åœ¨ç›‘å¬é”®ç›˜äº‹ä»¶æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦æ£€æŸ¥ç‰¹å®šçš„æŒ‰é”®ã€‚Vue å…è®¸åœ¨ <code>v-on</code> æˆ– <code>@</code> ç›‘å¬æŒ‰é”®äº‹ä»¶æ—¶æ·»åŠ æŒ‰é”®ä¿®é¥°ç¬¦ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ä»…åœ¨ `key` ä¸º `Enter` æ—¶è°ƒç”¨ `submit` --&gt;</span><br><span class="line">&lt;input @keyup.enter=&quot;submit&quot; /&gt;</span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥ç›´æ¥ä½¿ç”¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/KeyboardEvent/key/Key_Values"><code>KeyboardEvent.key</code></a> æš´éœ²çš„æŒ‰é”®åç§°ä½œä¸ºä¿®é¥°ç¬¦ï¼Œä½†éœ€è¦è½¬ä¸º kebab-case å½¢å¼ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input @keyup.page-down=&quot;onPageDown&quot; /&gt;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œä»…ä¼šåœ¨ <code>$event.key</code> ä¸º <code>&#39;PageDown&#39;</code> æ—¶è°ƒç”¨äº‹ä»¶å¤„ç†ã€‚</p><h3 id="æŒ‰é”®åˆ«å"><a href="#æŒ‰é”®åˆ«å" class="headerlink" title="æŒ‰é”®åˆ«å"></a>æŒ‰é”®åˆ«å</h3><p>Vue ä¸ºä¸€äº›å¸¸ç”¨çš„æŒ‰é”®æä¾›äº†åˆ«åï¼š</p><ul><li><code>.enter</code></li><li><code>.tab</code></li><li><code>.delete</code> (æ•è·â€œDeleteâ€å’Œâ€œBackspaceâ€ä¸¤ä¸ªæŒ‰é”®)</li><li><code>.esc</code></li><li><code>.space</code></li><li><code>.up</code></li><li><code>.down</code></li><li><code>.left</code></li><li><code>.right</code></li></ul><h3 id="ç³»ç»ŸæŒ‰é”®ä¿®é¥°ç¬¦"><a href="#ç³»ç»ŸæŒ‰é”®ä¿®é¥°ç¬¦" class="headerlink" title="ç³»ç»ŸæŒ‰é”®ä¿®é¥°ç¬¦"></a>ç³»ç»ŸæŒ‰é”®ä¿®é¥°ç¬¦</h3><p>ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ç³»ç»ŸæŒ‰é”®ä¿®é¥°ç¬¦æ¥è§¦å‘é¼ æ ‡æˆ–é”®ç›˜äº‹ä»¶ç›‘å¬å™¨ï¼Œåªæœ‰å½“æŒ‰é”®è¢«æŒ‰ä¸‹æ—¶æ‰ä¼šè§¦å‘ã€‚</p><ul><li><code>.ctrl</code></li><li><code>.alt</code></li><li><code>.shift</code></li><li><code>.meta</code></li></ul><p>æ³¨æ„</p><p>åœ¨ Mac é”®ç›˜ä¸Šï¼Œmeta æ˜¯ Command é”® (âŒ˜)ã€‚åœ¨ Windows é”®ç›˜ä¸Šï¼Œmeta é”®æ˜¯ Windows é”® (âŠ)ã€‚åœ¨ Sun å¾®æœºç³»ç»Ÿé”®ç›˜ä¸Šï¼Œmeta æ˜¯é’»çŸ³é”® (â—†)ã€‚åœ¨æŸäº›é”®ç›˜ä¸Šï¼Œç‰¹åˆ«æ˜¯ MIT å’Œ Lisp æœºå™¨çš„é”®ç›˜åŠå…¶åä»£ç‰ˆæœ¬çš„é”®ç›˜ï¼Œå¦‚ Knight é”®ç›˜ï¼Œspace-cadet é”®ç›˜ï¼Œmeta éƒ½è¢«æ ‡è®°ä¸ºâ€œMETAâ€ã€‚åœ¨ Symbolics é”®ç›˜ä¸Šï¼Œmeta ä¹Ÿè¢«æ ‡è¯†ä¸ºâ€œMETAâ€æˆ–â€œMetaâ€ã€‚</p><h3 id="exact-ä¿®é¥°ç¬¦"><a href="#exact-ä¿®é¥°ç¬¦" class="headerlink" title=".exact ä¿®é¥°ç¬¦"></a><code>.exact</code> ä¿®é¥°ç¬¦</h3><p><code>.exact</code> ä¿®é¥°ç¬¦å…è®¸æ§åˆ¶è§¦å‘ä¸€ä¸ªäº‹ä»¶æ‰€éœ€çš„ç¡®å®šç»„åˆçš„ç³»ç»ŸæŒ‰é”®ä¿®é¥°ç¬¦ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å½“æŒ‰ä¸‹ Ctrl æ—¶ï¼Œå³ä½¿åŒæ—¶æŒ‰ä¸‹ Alt æˆ– Shift ä¹Ÿä¼šè§¦å‘ --&gt;</span><br><span class="line">&lt;button @click.ctrl=&quot;onClick&quot;&gt;A&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ä»…å½“æŒ‰ä¸‹ Ctrl ä¸”æœªæŒ‰ä»»ä½•å…¶ä»–é”®æ—¶æ‰ä¼šè§¦å‘ --&gt;</span><br><span class="line">&lt;button @click.ctrl.exact=&quot;onCtrlClick&quot;&gt;A&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ä»…å½“æ²¡æœ‰æŒ‰ä¸‹ä»»ä½•ç³»ç»ŸæŒ‰é”®æ—¶è§¦å‘ --&gt;</span><br><span class="line">&lt;button @click.exact=&quot;onClick&quot;&gt;A&lt;/button&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h3 id="é¼ æ ‡æŒ‰é”®ä¿®é¥°ç¬¦"><a href="#é¼ æ ‡æŒ‰é”®ä¿®é¥°ç¬¦" class="headerlink" title="é¼ æ ‡æŒ‰é”®ä¿®é¥°ç¬¦"></a>é¼ æ ‡æŒ‰é”®ä¿®é¥°ç¬¦</h3><ul><li><code>.left</code></li><li><code>.right</code></li><li><code>.middle</code></li></ul><p>è¿™äº›ä¿®é¥°ç¬¦å°†å¤„ç†ç¨‹åºé™å®šä¸ºç”±ç‰¹å®šé¼ æ ‡æŒ‰é”®è§¦å‘çš„äº‹ä»¶ã€‚</p><h2 id="è¡¨å•è¾“å…¥ç»‘å®š"><a href="#è¡¨å•è¾“å…¥ç»‘å®š" class="headerlink" title="è¡¨å•è¾“å…¥ç»‘å®š"></a>è¡¨å•è¾“å…¥ç»‘å®š</h2><p>åœ¨å‰ç«¯å¤„ç†è¡¨å•æ—¶ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦å°†è¡¨å•è¾“å…¥æ¡†çš„å†…å®¹åŒæ­¥ç»™ JavaScript ä¸­ç›¸åº”çš„å˜é‡ã€‚æ‰‹åŠ¨è¿æ¥å€¼ç»‘å®šå’Œæ›´æ”¹äº‹ä»¶ç›‘å¬å™¨å¯èƒ½ä¼šå¾ˆéº»çƒ¦ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;input</span><br><span class="line">  :value=&quot;text&quot;</span><br><span class="line">  @input=&quot;event =&gt; text = event.target.value&quot;&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>v-model</code> æŒ‡ä»¤å¸®æˆ‘ä»¬ç®€åŒ–äº†è¿™ä¸€æ­¥éª¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;input v-model=&quot;text&quot;&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦å¤–ï¼Œ<code>v-model</code> è¿˜å¯ä»¥ç”¨äºå„ç§ä¸åŒç±»å‹çš„è¾“å…¥ï¼Œ<code>&lt;textarea&gt;</code>ã€<code>&lt;select&gt;</code> å…ƒç´ ã€‚å®ƒä¼šæ ¹æ®æ‰€ä½¿ç”¨çš„å…ƒç´ è‡ªåŠ¨ä½¿ç”¨å¯¹åº”çš„ DOM å±æ€§å’Œäº‹ä»¶ç»„åˆï¼š</p><ul><li>æ–‡æœ¬ç±»å‹çš„ <code>&lt;input&gt;</code> å’Œ <code>&lt;textarea&gt;</code> å…ƒç´ ä¼šç»‘å®š <code>value</code> property å¹¶ä¾¦å¬ <code>input</code> äº‹ä»¶ï¼›</li><li><code>&lt;input type=&quot;checkbox&quot;&gt;</code> å’Œ <code>&lt;input type=&quot;radio&quot;&gt;</code> ä¼šç»‘å®š <code>checked</code> property å¹¶ä¾¦å¬ <code>change</code> äº‹ä»¶ï¼›</li><li><code>&lt;select&gt;</code> ä¼šç»‘å®š <code>value</code> property å¹¶ä¾¦å¬ <code>change</code> äº‹ä»¶</li></ul><h3 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><h4 id="æ–‡æœ¬"><a href="#æ–‡æœ¬" class="headerlink" title="æ–‡æœ¬"></a>æ–‡æœ¬</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;Message is: &#123;&#123; message &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;input v-model=&quot;message&quot; placeholder=&quot;edit me&quot; /&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å¤šè¡Œæ–‡æœ¬"><a href="#å¤šè¡Œæ–‡æœ¬" class="headerlink" title="å¤šè¡Œæ–‡æœ¬"></a>å¤šè¡Œæ–‡æœ¬</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;span&gt;Multiline message is:&lt;/span&gt;</span><br><span class="line">&lt;p style=&quot;white-space: pre-line;&quot;&gt;&#123;&#123; message &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;textarea v-model=&quot;message&quot; placeholder=&quot;add multiple lines&quot;&gt;&lt;/textarea&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ³¨æ„åœ¨ <code>&lt;textarea&gt;</code> ä¸­æ˜¯ä¸æ”¯æŒæ’å€¼è¡¨è¾¾å¼çš„ã€‚è¯·ä½¿ç”¨ <code>v-model</code> æ¥æ›¿ä»£ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- é”™è¯¯ --&gt;</span><br><span class="line">&lt;textarea&gt;&#123;&#123; text &#125;&#125;&lt;/textarea&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- æ­£ç¡® --&gt;</span><br><span class="line">&lt;textarea v-model=&quot;text&quot;&gt;&lt;/textarea&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å¤é€‰æ¡†"><a href="#å¤é€‰æ¡†" class="headerlink" title="å¤é€‰æ¡†"></a>å¤é€‰æ¡†</h4><p>å•ä¸€çš„å¤é€‰æ¡†ï¼Œç»‘å®šå¸ƒå°”ç±»å‹å€¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;checkbox&quot; id=&quot;checkbox&quot; v-model=&quot;checked&quot; /&gt;</span><br><span class="line">&lt;label for=&quot;checkbox&quot;&gt;&#123;&#123; checked &#125;&#125;&lt;/label&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å¤šä¸ªå¤é€‰æ¡†ç»‘å®šåˆ°åŒä¸€ä¸ªæ•°ç»„æˆ–é›†åˆçš„å€¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      checkedNames: []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;div&gt;Checked names: &#123;&#123; checkedNames &#125;&#125;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;input type=&quot;checkbox&quot; id=&quot;jack&quot; value=&quot;Jack&quot; v-model=&quot;checkedNames&quot;&gt;</span><br><span class="line">&lt;label for=&quot;jack&quot;&gt;Jack&lt;/label&gt;</span><br><span class="line"></span><br><span class="line">&lt;input type=&quot;checkbox&quot; id=&quot;john&quot; value=&quot;John&quot; v-model=&quot;checkedNames&quot;&gt;</span><br><span class="line">&lt;label for=&quot;john&quot;&gt;John&lt;/label&gt;</span><br><span class="line"></span><br><span class="line">&lt;input type=&quot;checkbox&quot; id=&quot;mike&quot; value=&quot;Mike&quot; v-model=&quot;checkedNames&quot;&gt;</span><br><span class="line">&lt;label for=&quot;mike&quot;&gt;Mike&lt;/label&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å•é€‰æŒ‰é’®"><a href="#å•é€‰æŒ‰é’®" class="headerlink" title="å•é€‰æŒ‰é’®"></a>å•é€‰æŒ‰é’®</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;Picked: &#123;&#123; picked &#125;&#125;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;input type=&quot;radio&quot; id=&quot;one&quot; value=&quot;One&quot; v-model=&quot;picked&quot; /&gt;</span><br><span class="line">&lt;label for=&quot;one&quot;&gt;One&lt;/label&gt;</span><br><span class="line"></span><br><span class="line">&lt;input type=&quot;radio&quot; id=&quot;two&quot; value=&quot;Two&quot; v-model=&quot;picked&quot; /&gt;</span><br><span class="line">&lt;label for=&quot;two&quot;&gt;Two&lt;/label&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="é€‰æ‹©å™¨"><a href="#é€‰æ‹©å™¨" class="headerlink" title="é€‰æ‹©å™¨"></a>é€‰æ‹©å™¨</h4><p>å•ä¸ªé€‰æ‹©å™¨çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;Selected: &#123;&#123; selected &#125;&#125;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;select v-model=&quot;selected&quot;&gt;</span><br><span class="line">  &lt;option disabled value=&quot;&quot;&gt;Please select one&lt;/option&gt;</span><br><span class="line">  &lt;option&gt;A&lt;/option&gt;</span><br><span class="line">  &lt;option&gt;B&lt;/option&gt;</span><br><span class="line">  &lt;option&gt;C&lt;/option&gt;</span><br><span class="line">&lt;/select&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¤šé€‰ (å€¼ç»‘å®šåˆ°ä¸€ä¸ªæ•°ç»„)ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;Selected: &#123;&#123; selected &#125;&#125;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;select v-model=&quot;selected&quot; multiple&gt;</span><br><span class="line">  &lt;option&gt;A&lt;/option&gt;</span><br><span class="line">  &lt;option&gt;B&lt;/option&gt;</span><br><span class="line">  &lt;option&gt;C&lt;/option&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure><p>é€‰æ‹©å™¨çš„é€‰é¡¹å¯ä»¥ä½¿ç”¨ <code>v-for</code> åŠ¨æ€æ¸²æŸ“ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      selected: &#x27;A&#x27;,</span><br><span class="line">      options: [</span><br><span class="line">        &#123; text: &#x27;One&#x27;, value: &#x27;A&#x27; &#125;,</span><br><span class="line">        &#123; text: &#x27;Two&#x27;, value: &#x27;B&#x27; &#125;,</span><br><span class="line">        &#123; text: &#x27;Three&#x27;, value: &#x27;C&#x27; &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;select v-model=&quot;selected&quot;&gt;</span><br><span class="line">  &lt;option v-for=&quot;option in options&quot; :value=&quot;option.value&quot;&gt;</span><br><span class="line">    &#123;&#123; option.text &#125;&#125;</span><br><span class="line">  &lt;/option&gt;</span><br><span class="line">&lt;/select&gt;</span><br><span class="line"></span><br><span class="line">&lt;div&gt;Selected: &#123;&#123; selected &#125;&#125;&lt;/div&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å€¼ç»‘å®š"><a href="#å€¼ç»‘å®š" class="headerlink" title="å€¼ç»‘å®š"></a>å€¼ç»‘å®š</h4><p>å¯¹äºå•é€‰æŒ‰é’®ï¼Œå¤é€‰æ¡†å’Œé€‰æ‹©å™¨é€‰é¡¹ï¼Œ<code>v-model</code> ç»‘å®šçš„å€¼é€šå¸¸æ˜¯é™æ€çš„å­—ç¬¦ä¸² (æˆ–è€…å¯¹å¤é€‰æ¡†æ˜¯å¸ƒå°”å€¼)ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- `picked` åœ¨è¢«é€‰æ‹©æ—¶æ˜¯å­—ç¬¦ä¸² &quot;a&quot; --&gt;</span><br><span class="line">&lt;input type=&quot;radio&quot; v-model=&quot;picked&quot; value=&quot;a&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- `toggle` åªä¼šä¸º true æˆ– false --&gt;</span><br><span class="line">&lt;input type=&quot;checkbox&quot; v-model=&quot;toggle&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- `selected` åœ¨ç¬¬ä¸€é¡¹è¢«é€‰ä¸­æ—¶ä¸ºå­—ç¬¦ä¸² &quot;abc&quot; --&gt;</span><br><span class="line">&lt;select v-model=&quot;selected&quot;&gt;</span><br><span class="line">  &lt;option value=&quot;abc&quot;&gt;ABC&lt;/option&gt;</span><br><span class="line">&lt;/select&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½†æœ‰æ—¶æˆ‘ä»¬å¯èƒ½å¸Œæœ›å°†è¯¥å€¼ç»‘å®šåˆ°å½“å‰ç»„ä»¶å®ä¾‹ä¸Šçš„åŠ¨æ€æ•°æ®ã€‚è¿™å¯ä»¥é€šè¿‡ä½¿ç”¨ <code>v-bind</code> æ¥å®ç°ã€‚æ­¤å¤–ï¼Œä½¿ç”¨ <code>v-bind</code> è¿˜ä½¿æˆ‘ä»¬å¯ä»¥å°†é€‰é¡¹å€¼ç»‘å®šä¸ºéå­—ç¬¦ä¸²çš„æ•°æ®ç±»å‹ã€‚</p><h4 id="å¤é€‰æ¡†-1"><a href="#å¤é€‰æ¡†-1" class="headerlink" title="å¤é€‰æ¡†"></a>å¤é€‰æ¡†</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;input</span><br><span class="line">  type=&quot;checkbox&quot;</span><br><span class="line">  v-model=&quot;toggle&quot;</span><br><span class="line">  true-value=&quot;yes&quot;</span><br><span class="line">  false-value=&quot;no&quot; /&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>true-value</code> å’Œ <code>false-value</code> æ˜¯ Vue ç‰¹æœ‰çš„ attributesï¼Œä»…æ”¯æŒå’Œ <code>v-model</code> é…å¥—ä½¿ç”¨ã€‚è¿™é‡Œ <code>toggle</code> å±æ€§çš„å€¼ä¼šåœ¨é€‰ä¸­æ—¶è¢«è®¾ä¸º <code>&#39;yes&#39;</code>ï¼Œå–æ¶ˆé€‰æ‹©æ—¶è®¾ä¸º <code>&#39;no&#39;</code>ã€‚ä½ åŒæ ·å¯ä»¥é€šè¿‡ <code>v-bind</code> å°†å…¶ç»‘å®šä¸ºå…¶ä»–åŠ¨æ€å€¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;input</span><br><span class="line">  type=&quot;checkbox&quot;</span><br><span class="line">  v-model=&quot;toggle&quot;</span><br><span class="line">  :true-value=&quot;dynamicTrueValue&quot;</span><br><span class="line">  :false-value=&quot;dynamicFalseValue&quot; /&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å•é€‰æŒ‰é’®-1"><a href="#å•é€‰æŒ‰é’®-1" class="headerlink" title="å•é€‰æŒ‰é’®"></a>å•é€‰æŒ‰é’®</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;radio&quot; v-model=&quot;pick&quot; :value=&quot;first&quot; /&gt;</span><br><span class="line">&lt;input type=&quot;radio&quot; v-model=&quot;pick&quot; :value=&quot;second&quot; /&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>pick</code> ä¼šåœ¨ç¬¬ä¸€ä¸ªæŒ‰é’®é€‰ä¸­æ—¶è¢«è®¾ä¸º <code>first</code>ï¼Œåœ¨ç¬¬äºŒä¸ªæŒ‰é’®é€‰ä¸­æ—¶è¢«è®¾ä¸º <code>second</code>ã€‚</p><h4 id="é€‰æ‹©å™¨é€‰é¡¹"><a href="#é€‰æ‹©å™¨é€‰é¡¹" class="headerlink" title="é€‰æ‹©å™¨é€‰é¡¹"></a>é€‰æ‹©å™¨é€‰é¡¹</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;select v-model=&quot;selected&quot;&gt;</span><br><span class="line">  &lt;!-- å†…è”å¯¹è±¡å­—é¢é‡ --&gt;</span><br><span class="line">  &lt;option :value=&quot;&#123; number: 123 &#125;&quot;&gt;123&lt;/option&gt;</span><br><span class="line">&lt;/select&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>v-model</code> åŒæ ·ä¹Ÿæ”¯æŒéå­—ç¬¦ä¸²ç±»å‹çš„å€¼ç»‘å®šï¼åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œå½“æŸä¸ªé€‰é¡¹è¢«é€‰ä¸­ï¼Œ<code>selected</code> ä¼šè¢«è®¾ä¸ºè¯¥å¯¹è±¡å­—é¢é‡å€¼ <code>&#123; number: 123 &#125;</code>ã€‚</p><h4 id="ä¿®é¥°ç¬¦"><a href="#ä¿®é¥°ç¬¦" class="headerlink" title="ä¿®é¥°ç¬¦"></a>ä¿®é¥°ç¬¦</h4><h5 id="lazy"><a href="#lazy" class="headerlink" title=".lazy"></a><code>.lazy</code></h5><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>v-model</code> ä¼šåœ¨æ¯æ¬¡ <code>input</code> äº‹ä»¶åæ›´æ–°æ•°æ® (<a href="https://cn.vuejs.org/guide/essentials/forms.html#vmodel-ime-tip">IME æ‹¼å­—é˜¶æ®µçš„çŠ¶æ€</a>ä¾‹å¤–)ã€‚ä½ å¯ä»¥æ·»åŠ  <code>lazy</code> ä¿®é¥°ç¬¦æ¥æ”¹ä¸ºåœ¨æ¯æ¬¡ <code>change</code> äº‹ä»¶åæ›´æ–°æ•°æ®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- åœ¨ &quot;change&quot; äº‹ä»¶ååŒæ­¥æ›´æ–°è€Œä¸æ˜¯ &quot;input&quot; --&gt;</span><br><span class="line">&lt;input v-model.lazy=&quot;msg&quot; /&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="number"><a href="#number" class="headerlink" title=".number"></a><code>.number</code></h5><p>å¦‚æœä½ æƒ³è®©ç”¨æˆ·è¾“å…¥è‡ªåŠ¨è½¬æ¢ä¸ºæ•°å­—ï¼Œä½ å¯ä»¥åœ¨ <code>v-model</code> åæ·»åŠ  <code>.number</code> ä¿®é¥°ç¬¦æ¥ç®¡ç†è¾“å…¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input v-model.number=&quot;age&quot; /&gt;</span><br></pre></td></tr></table></figure><p>å¦‚æœè¯¥å€¼æ— æ³•è¢« <code>parseFloat()</code> å¤„ç†ï¼Œé‚£ä¹ˆå°†è¿”å›åŸå§‹å€¼ã€‚</p><p><code>number</code> ä¿®é¥°ç¬¦ä¼šåœ¨è¾“å…¥æ¡†æœ‰ <code>type=&quot;number&quot;</code> æ—¶è‡ªåŠ¨å¯ç”¨ã€‚</p><h5 id="trim"><a href="#trim" class="headerlink" title=".trim"></a><code>.trim</code></h5><p>å¦‚æœä½ æƒ³è¦é»˜è®¤è‡ªåŠ¨å»é™¤ç”¨æˆ·è¾“å…¥å†…å®¹ä¸­ä¸¤ç«¯çš„ç©ºæ ¼ï¼Œä½ å¯ä»¥åœ¨ <code>v-model</code> åæ·»åŠ  <code>.trim</code> ä¿®é¥°ç¬¦ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input v-model.trim=&quot;msg&quot; /&gt;</span><br></pre></td></tr></table></figure><h2 id="ç”Ÿå‘½å‘¨æœŸé’©å­"><a href="#ç”Ÿå‘½å‘¨æœŸé’©å­" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸé’©å­"></a>ç”Ÿå‘½å‘¨æœŸé’©å­</h2><p>æ¯ä¸ª Vue ç»„ä»¶å®ä¾‹åœ¨åˆ›å»ºæ—¶éƒ½éœ€è¦ç»å†ä¸€ç³»åˆ—çš„åˆå§‹åŒ–æ­¥éª¤ï¼Œæ¯”å¦‚è®¾ç½®å¥½æ•°æ®ä¾¦å¬ï¼Œç¼–è¯‘æ¨¡æ¿ï¼ŒæŒ‚è½½å®ä¾‹åˆ° DOMï¼Œä»¥åŠåœ¨æ•°æ®æ”¹å˜æ—¶æ›´æ–° DOMã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œå®ƒä¹Ÿä¼šè¿è¡Œè¢«ç§°ä¸ºç”Ÿå‘½å‘¨æœŸé’©å­çš„å‡½æ•°ï¼Œè®©å¼€å‘è€…æœ‰æœºä¼šåœ¨ç‰¹å®šé˜¶æ®µè¿è¡Œè‡ªå·±çš„ä»£ç ã€‚</p><h3 id="æ³¨å†Œå‘¨æœŸé’©å­"><a href="#æ³¨å†Œå‘¨æœŸé’©å­" class="headerlink" title="æ³¨å†Œå‘¨æœŸé’©å­"></a>æ³¨å†Œå‘¨æœŸé’©å­</h3><p>ä¸¾ä¾‹æ¥è¯´ï¼Œ<code>mounted</code> é’©å­å¯ä»¥ç”¨æ¥åœ¨ç»„ä»¶å®Œæˆåˆå§‹æ¸²æŸ“å¹¶åˆ›å»º DOM èŠ‚ç‚¹åè¿è¡Œä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`the component is now mounted.`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰å…¶ä»–ä¸€äº›é’©å­ï¼Œä¼šåœ¨å®ä¾‹ç”Ÿå‘½å‘¨æœŸçš„ä¸åŒé˜¶æ®µè¢«è°ƒç”¨ï¼Œæœ€å¸¸ç”¨çš„æ˜¯ <a href="https://cn.vuejs.org/api/options-lifecycle.html#mounted"><code>mounted</code></a>ã€<a href="https://cn.vuejs.org/api/options-lifecycle.html#updated"><code>updated</code></a> å’Œ <a href="https://cn.vuejs.org/api/options-lifecycle.html#unmounted"><code>unmounted</code></a>ã€‚</p><p>æ‰€æœ‰ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°çš„ <code>this</code> ä¸Šä¸‹æ–‡éƒ½ä¼šè‡ªåŠ¨æŒ‡å‘å½“å‰è°ƒç”¨å®ƒçš„ç»„ä»¶å®ä¾‹ã€‚æ³¨æ„ï¼šé¿å…ç”¨ç®­å¤´å‡½æ•°æ¥å®šä¹‰ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œå› ä¸ºå¦‚æœè¿™æ ·çš„è¯ä½ å°†æ— æ³•åœ¨å‡½æ•°ä¸­é€šè¿‡ <code>this</code> è·å–ç»„ä»¶å®ä¾‹ã€‚</p><p>ä¸‹é¢æ˜¯å®ä¾‹ç”Ÿå‘½å‘¨æœŸçš„å›¾è¡¨ã€‚ä½ ç°åœ¨å¹¶ä¸éœ€è¦å®Œå…¨ç†è§£å›¾ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œä½†ä»¥åå®ƒå°†æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„å‚è€ƒã€‚</p><p><img src="https://cn.vuejs.org/assets/lifecycle.16e4c08e.png" alt="ç”Ÿå‘½å‘¨æœŸå›¾ç¤º"></p><h2 id="ä¾¦å¬å™¨"><a href="#ä¾¦å¬å™¨" class="headerlink" title="ä¾¦å¬å™¨"></a>ä¾¦å¬å™¨</h2><h3 id="åŸºæœ¬ç¤ºä¾‹"><a href="#åŸºæœ¬ç¤ºä¾‹" class="headerlink" title="åŸºæœ¬ç¤ºä¾‹"></a>åŸºæœ¬ç¤ºä¾‹</h3><p>è®¡ç®—å±æ€§å…è®¸æˆ‘ä»¬å£°æ˜æ€§åœ°è®¡ç®—è¡ç”Ÿå€¼ã€‚ç„¶è€Œåœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨çŠ¶æ€å˜åŒ–æ—¶æ‰§è¡Œä¸€äº›â€œå‰¯ä½œç”¨â€ï¼šä¾‹å¦‚æ›´æ”¹ DOMï¼Œæˆ–æ˜¯æ ¹æ®å¼‚æ­¥æ“ä½œçš„ç»“æœå»ä¿®æ”¹å¦ä¸€å¤„çš„çŠ¶æ€ã€‚</p><p>åœ¨é€‰é¡¹å¼ API ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <a href="https://cn.vuejs.org/api/options-state.html#watch"><code>watch</code> é€‰é¡¹</a>åœ¨æ¯æ¬¡å“åº”å¼å±æ€§å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘ä¸€ä¸ªå‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">question</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="attr">answer</span>: <span class="string">&#x27;Questions usually contain a question mark. ;-)&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">watch</span>: &#123;</span><br><span class="line">    <span class="comment">// æ¯å½“ question æ”¹å˜æ—¶ï¼Œè¿™ä¸ªå‡½æ•°å°±ä¼šæ‰§è¡Œ</span></span><br><span class="line">    <span class="title function_">question</span>(<span class="params">newQuestion, oldQuestion</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (newQuestion.<span class="title function_">includes</span>(<span class="string">&#x27;?&#x27;</span>)) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">getAnswer</span>()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">getAnswer</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">answer</span> = <span class="string">&#x27;Thinking...&#x27;</span></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://yesno.wtf/api&#x27;</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">answer</span> = (<span class="keyword">await</span> res.<span class="title function_">json</span>()).<span class="property">answer</span></span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">answer</span> = <span class="string">&#x27;Error! Could not reach the API. &#x27;</span> + error</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;</span><br><span class="line">  <span class="title class_">Ask</span> a yes/no <span class="attr">question</span>:</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;question&quot;</span> /&gt;</span></span></span><br><span class="line">&lt;/p&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; answer &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h3 id="æ·±å±‚ä¾¦å¬å™¨"><a href="#æ·±å±‚ä¾¦å¬å™¨" class="headerlink" title="æ·±å±‚ä¾¦å¬å™¨"></a>æ·±å±‚ä¾¦å¬å™¨</h3><p><code>watch</code> é»˜è®¤æ˜¯æµ…å±‚çš„ï¼šè¢«ä¾¦å¬çš„å±æ€§ï¼Œä»…åœ¨è¢«èµ‹æ–°å€¼æ—¶ï¼Œæ‰ä¼šè§¦å‘å›è°ƒå‡½æ•°â€”â€”è€ŒåµŒå¥—å±æ€§çš„å˜åŒ–ä¸ä¼šè§¦å‘ã€‚å¦‚æœæƒ³ä¾¦å¬æ‰€æœ‰åµŒå¥—çš„å˜æ›´ï¼Œä½ éœ€è¦æ·±å±‚ä¾¦å¬å™¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">watch</span>: &#123;</span><br><span class="line">    <span class="attr">someObject</span>: &#123;</span><br><span class="line">      <span class="title function_">handler</span>(<span class="params">newValue, oldValue</span>) &#123;</span><br><span class="line">        <span class="comment">// æ³¨æ„ï¼šåœ¨åµŒå¥—çš„å˜æ›´ä¸­ï¼Œ</span></span><br><span class="line">        <span class="comment">// åªè¦æ²¡æœ‰æ›¿æ¢å¯¹è±¡æœ¬èº«ï¼Œ</span></span><br><span class="line">        <span class="comment">// é‚£ä¹ˆè¿™é‡Œçš„ `newValue` å’Œ `oldValue` ç›¸åŒ</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">deep</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h3 id="å³æ—¶å›è°ƒçš„ä¾¦å¬å™¨"><a href="#å³æ—¶å›è°ƒçš„ä¾¦å¬å™¨" class="headerlink" title="å³æ—¶å›è°ƒçš„ä¾¦å¬å™¨"></a>å³æ—¶å›è°ƒçš„ä¾¦å¬å™¨</h3><p><code>watch</code> é»˜è®¤æ˜¯æ‡’æ‰§è¡Œçš„ï¼šä»…å½“æ•°æ®æºå˜åŒ–æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œå›è°ƒã€‚ä½†åœ¨æŸäº›åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨åˆ›å»ºä¾¦å¬å™¨æ—¶ï¼Œç«‹å³æ‰§è¡Œä¸€éå›è°ƒã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘ä»¬æƒ³è¯·æ±‚ä¸€äº›åˆå§‹æ•°æ®ï¼Œç„¶ååœ¨ç›¸å…³çŠ¶æ€æ›´æ”¹æ—¶é‡æ–°è¯·æ±‚æ•°æ®ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªå¯¹è±¡æ¥å£°æ˜ä¾¦å¬å™¨ï¼Œè¿™ä¸ªå¯¹è±¡æœ‰ <code>handler</code> æ–¹æ³•å’Œ <code>immediate: true</code> é€‰é¡¹ï¼Œè¿™æ ·ä¾¿èƒ½å¼ºåˆ¶å›è°ƒå‡½æ•°ç«‹å³æ‰§è¡Œï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">watch</span>: &#123;</span><br><span class="line">    <span class="attr">question</span>: &#123;</span><br><span class="line">      <span class="title function_">handler</span>(<span class="params">newQuestion</span>) &#123;</span><br><span class="line">        <span class="comment">// åœ¨ç»„ä»¶å®ä¾‹åˆ›å»ºæ—¶ä¼šç«‹å³è°ƒç”¨</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// å¼ºåˆ¶ç«‹å³æ‰§è¡Œå›è°ƒ</span></span><br><span class="line">      <span class="attr">immediate</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å›è°ƒçš„è§¦å‘æ—¶æœº"><a href="#å›è°ƒçš„è§¦å‘æ—¶æœº" class="headerlink" title="å›è°ƒçš„è§¦å‘æ—¶æœº"></a>å›è°ƒçš„è§¦å‘æ—¶æœº</h3><p>å½“ä½ æ›´æ”¹äº†å“åº”å¼çŠ¶æ€ï¼Œå®ƒå¯èƒ½ä¼šåŒæ—¶è§¦å‘ Vue ç»„ä»¶æ›´æ–°å’Œä¾¦å¬å™¨å›è°ƒã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œç”¨æˆ·åˆ›å»ºçš„ä¾¦å¬å™¨å›è°ƒï¼Œéƒ½ä¼šåœ¨ Vue ç»„ä»¶æ›´æ–°<strong>ä¹‹å‰</strong>è¢«è°ƒç”¨ã€‚è¿™æ„å‘³ç€ä½ åœ¨ä¾¦å¬å™¨å›è°ƒä¸­è®¿é—®çš„ DOM å°†æ˜¯è¢« Vue æ›´æ–°ä¹‹å‰çš„çŠ¶æ€ã€‚</p><p>å¦‚æœæƒ³åœ¨ä¾¦å¬å™¨å›è°ƒä¸­èƒ½è®¿é—®è¢« Vue æ›´æ–°<strong>ä¹‹å</strong>çš„DOMï¼Œä½ éœ€è¦æŒ‡æ˜ <code>flush: &#39;post&#39;</code> é€‰é¡¹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">watch</span>: &#123;</span><br><span class="line">    <span class="attr">key</span>: &#123;</span><br><span class="line">      <span class="title function_">handler</span>(<span class="params"></span>) &#123;&#125;,</span><br><span class="line">      <span class="attr">flush</span>: <span class="string">&#x27;post&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="this-watch"><a href="#this-watch" class="headerlink" title="this.$watch()"></a><code>this.$watch()</code></h3><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ç»„ä»¶å®ä¾‹çš„ <a href="https://cn.vuejs.org/api/component-instance.html#watch"><code>$watch()</code> æ–¹æ³•</a>æ¥å‘½ä»¤å¼åœ°åˆ›å»ºä¸€ä¸ªä¾¦å¬å™¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.$watch(<span class="string">&#x27;question&#x27;</span>, <span class="function">(<span class="params">newQuestion</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦‚æœè¦åœ¨ç‰¹å®šæ¡ä»¶ä¸‹è®¾ç½®ä¸€ä¸ªä¾¦å¬å™¨ï¼Œæˆ–è€…åªä¾¦å¬å“åº”ç”¨æˆ·äº¤äº’çš„å†…å®¹ï¼Œè¿™æ–¹æ³•å¾ˆæœ‰ç”¨ã€‚å®ƒè¿˜å…è®¸ä½ æå‰åœæ­¢è¯¥ä¾¦å¬å™¨ã€‚</p><h3 id="åœæ­¢ä¾¦å¬å™¨"><a href="#åœæ­¢ä¾¦å¬å™¨" class="headerlink" title="åœæ­¢ä¾¦å¬å™¨"></a>åœæ­¢ä¾¦å¬å™¨</h3><p>ç”¨ <code>watch</code> é€‰é¡¹æˆ–è€… <code>$watch()</code> å®ä¾‹æ–¹æ³•å£°æ˜çš„ä¾¦å¬å™¨ï¼Œä¼šåœ¨å®¿ä¸»ç»„ä»¶å¸è½½æ—¶è‡ªåŠ¨åœæ­¢ã€‚å› æ­¤ï¼Œåœ¨å¤§å¤šæ•°åœºæ™¯ä¸‹ï¼Œä½ æ— éœ€å…³å¿ƒæ€ä¹ˆåœæ­¢å®ƒã€‚</p><p>åœ¨å°‘æ•°æƒ…å†µä¸‹ï¼Œä½ çš„ç¡®éœ€è¦åœ¨ç»„ä»¶å¸è½½ä¹‹å‰å°±åœæ­¢ä¸€ä¸ªä¾¦å¬å™¨ï¼Œè¿™æ—¶å¯ä»¥è°ƒç”¨ <code>$watch()</code> API è¿”å›çš„å‡½æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> unwatch = <span class="variable language_">this</span>.$watch(<span class="string">&#x27;foo&#x27;</span>, callback)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...å½“è¯¥ä¾¦å¬å™¨ä¸å†éœ€è¦æ—¶</span></span><br><span class="line"><span class="title function_">unwatch</span>()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æ¨¡æ¿å¼•ç”¨"><a href="#æ¨¡æ¿å¼•ç”¨" class="headerlink" title="æ¨¡æ¿å¼•ç”¨"></a>æ¨¡æ¿å¼•ç”¨</h2><p>è™½ç„¶ Vue çš„å£°æ˜æ€§æ¸²æŸ“æ¨¡å‹ä¸ºä½ æŠ½è±¡äº†å¤§éƒ¨åˆ†å¯¹ DOM çš„ç›´æ¥æ“ä½œï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦ç›´æ¥è®¿é—®åº•å±‚ DOM å…ƒç´ ã€‚è¦å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç‰¹æ®Šçš„ <code>ref</code> attributeï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input ref=&quot;input&quot;&gt;</span><br></pre></td></tr></table></figure><p><code>ref</code> æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ attributeï¼Œå’Œ <code>v-for</code> ç« èŠ‚ä¸­æåˆ°çš„ <code>key</code> ç±»ä¼¼ã€‚å®ƒå…è®¸æˆ‘ä»¬åœ¨ä¸€ä¸ªç‰¹å®šçš„ DOM å…ƒç´ æˆ–å­ç»„ä»¶å®ä¾‹è¢«æŒ‚è½½åï¼Œè·å¾—å¯¹å®ƒçš„ç›´æ¥å¼•ç”¨ã€‚è¿™å¯èƒ½å¾ˆæœ‰ç”¨ï¼Œæ¯”å¦‚è¯´åœ¨ç»„ä»¶æŒ‚è½½æ—¶å°†ç„¦ç‚¹è®¾ç½®åˆ°ä¸€ä¸ª input å…ƒç´ ä¸Šï¼Œæˆ–åœ¨ä¸€ä¸ªå…ƒç´ ä¸Šåˆå§‹åŒ–ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“ã€‚</p><h4 id="è®¿é—®æ¨¡æ¿å¼•ç”¨"><a href="#è®¿é—®æ¨¡æ¿å¼•ç”¨" class="headerlink" title="è®¿é—®æ¨¡æ¿å¼•ç”¨"></a>è®¿é—®æ¨¡æ¿å¼•ç”¨</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">input</span>.<span class="title function_">focus</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&quot;input&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œä½ åªå¯ä»¥<strong>åœ¨ç»„ä»¶æŒ‚è½½å</strong>æ‰èƒ½è®¿é—®æ¨¡æ¿å¼•ç”¨ã€‚å¦‚æœä½ æƒ³åœ¨æ¨¡æ¿ä¸­çš„è¡¨è¾¾å¼ä¸Šè®¿é—® <code>$refs.input</code>ï¼Œåœ¨åˆæ¬¡æ¸²æŸ“æ—¶ä¼šæ˜¯ <code>null</code>ã€‚è¿™æ˜¯å› ä¸ºåœ¨åˆæ¬¡æ¸²æŸ“å‰è¿™ä¸ªå…ƒç´ è¿˜ä¸å­˜åœ¨å‘¢ï¼</p><h4 id="v-for-ä¸­çš„æ¨¡æ¿å¼•ç”¨-éœ€è¦-v3-2-25-åŠä»¥ä¸Šç‰ˆæœ¬"><a href="#v-for-ä¸­çš„æ¨¡æ¿å¼•ç”¨-éœ€è¦-v3-2-25-åŠä»¥ä¸Šç‰ˆæœ¬" class="headerlink" title="v-for ä¸­çš„æ¨¡æ¿å¼•ç”¨(éœ€è¦ v3.2.25 åŠä»¥ä¸Šç‰ˆæœ¬)"></a><code>v-for</code> ä¸­çš„æ¨¡æ¿å¼•ç”¨(éœ€è¦ v3.2.25 åŠä»¥ä¸Šç‰ˆæœ¬)</h4><p>å½“åœ¨ <code>v-for</code> ä¸­ä½¿ç”¨æ¨¡æ¿å¼•ç”¨æ—¶ï¼Œç›¸åº”çš„å¼•ç”¨ä¸­åŒ…å«çš„å€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">list</span>: [</span><br><span class="line">        <span class="comment">/* ... */</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">items</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;item in list&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;items&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;&#123; item &#125;&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p style="color:red">åº”è¯¥æ³¨æ„çš„æ˜¯ï¼Œref æ•°ç»„**å¹¶ä¸**ä¿è¯ä¸æºæ•°ç»„ç›¸åŒçš„é¡ºåºã€‚</p><hr><h4 id="å‡½æ•°æ¨¡æ¿å¼•ç”¨"><a href="#å‡½æ•°æ¨¡æ¿å¼•ç”¨" class="headerlink" title="å‡½æ•°æ¨¡æ¿å¼•ç”¨"></a>å‡½æ•°æ¨¡æ¿å¼•ç”¨</h4><p>é™¤äº†ä½¿ç”¨å­—ç¬¦ä¸²å€¼ä½œåå­—ï¼Œ<code>ref</code> attribute è¿˜å¯ä»¥ç»‘å®šä¸ºä¸€ä¸ªå‡½æ•°ï¼Œä¼šåœ¨æ¯æ¬¡ç»„ä»¶æ›´æ–°æ—¶éƒ½è¢«è°ƒç”¨ã€‚è¯¥å‡½æ•°ä¼šæ”¶åˆ°å…ƒç´ å¼•ç”¨ä½œä¸ºå…¶ç¬¬ä¸€ä¸ªå‚æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input :ref=<span class="string">&quot;(el) =&gt; &#123; /* å°† el èµ‹å€¼ç»™ä¸€ä¸ªæ•°æ®å±æ€§æˆ– ref å˜é‡ */ &#125;&quot;</span>&gt;</span><br></pre></td></tr></table></figure><p>æ³¨æ„æˆ‘ä»¬è¿™é‡Œéœ€è¦ä½¿ç”¨åŠ¨æ€çš„ <code>:ref</code> ç»‘å®šæ‰èƒ½å¤Ÿä¼ å…¥ä¸€ä¸ªå‡½æ•°ã€‚å½“ç»‘å®šçš„å…ƒç´ è¢«å¸è½½æ—¶ï¼Œå‡½æ•°ä¹Ÿä¼šè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œæ­¤æ—¶çš„ <code>el</code> å‚æ•°ä¼šæ˜¯ <code>null</code>ã€‚ä½ å½“ç„¶ä¹Ÿå¯ä»¥ç»‘å®šä¸€ä¸ªç»„ä»¶æ–¹æ³•è€Œä¸æ˜¯å†…è”å‡½æ•°ã€‚</p><h4 id="ç»„ä»¶ä¸Šçš„-ref"><a href="#ç»„ä»¶ä¸Šçš„-ref" class="headerlink" title="ç»„ä»¶ä¸Šçš„ ref"></a>ç»„ä»¶ä¸Šçš„ ref</h4><p>æ¨¡æ¿å¼•ç”¨ä¹Ÿå¯ä»¥è¢«ç”¨åœ¨ä¸€ä¸ªå­ç»„ä»¶ä¸Šã€‚è¿™ç§æƒ…å†µä¸‹å¼•ç”¨ä¸­è·å¾—çš„å€¼æ˜¯ç»„ä»¶å®ä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&#x27;./Child.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    <span class="title class_">Child</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// this.$refs.child æ˜¯ &lt;Child /&gt; ç»„ä»¶çš„å®ä¾‹</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">Child</span> <span class="attr">ref</span>=<span class="string">&quot;child&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>å¦‚æœä¸€ä¸ªå­ç»„ä»¶ä½¿ç”¨çš„æ˜¯é€‰é¡¹å¼ API ï¼Œè¢«å¼•ç”¨çš„ç»„ä»¶å®ä¾‹å’Œè¯¥å­ç»„ä»¶çš„ <code>this</code> å®Œå…¨ä¸€è‡´ï¼Œè¿™æ„å‘³ç€çˆ¶ç»„ä»¶å¯¹å­ç»„ä»¶çš„æ¯ä¸€ä¸ªå±æ€§å’Œæ–¹æ³•éƒ½æœ‰å®Œå…¨çš„è®¿é—®æƒã€‚è¿™ä½¿å¾—åœ¨çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶ä¹‹é—´åˆ›å»ºç´§å¯†è€¦åˆçš„å®ç°ç»†èŠ‚å˜å¾—å¾ˆå®¹æ˜“ï¼Œå½“ç„¶ä¹Ÿå› æ­¤ï¼Œåº”è¯¥åªåœ¨ç»å¯¹éœ€è¦æ—¶æ‰ä½¿ç”¨ç»„ä»¶å¼•ç”¨ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ åº”è¯¥é¦–å…ˆä½¿ç”¨æ ‡å‡†çš„ props å’Œ emit æ¥å£æ¥å®ç°çˆ¶å­ç»„ä»¶äº¤äº’ã€‚</p><p><code>expose</code> é€‰é¡¹å¯ä»¥ç”¨äºé™åˆ¶å¯¹å­ç»„ä»¶å®ä¾‹çš„è®¿é—®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">expose</span>: [<span class="string">&#x27;publicData&#x27;</span>, <span class="string">&#x27;publicMethod&#x27;</span>],</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">publicData</span>: <span class="string">&#x27;foo&#x27;</span>,</span><br><span class="line">      <span class="attr">privateData</span>: <span class="string">&#x27;bar&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">publicMethod</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">/* ... */</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">privateMethod</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">/* ... */</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p style="color:yellow">åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œçˆ¶ç»„ä»¶é€šè¿‡æ¨¡æ¿å¼•ç”¨è®¿é—®åˆ°å­ç»„ä»¶å®ä¾‹åï¼Œä»…èƒ½è®¿é—® `publicData` å’Œ `publicMethod`ã€‚</p><h2 id="ç»„ä»¶åŸºç¡€"><a href="#ç»„ä»¶åŸºç¡€" class="headerlink" title="ç»„ä»¶åŸºç¡€"></a>ç»„ä»¶åŸºç¡€</h2><h3 id="ä½¿ç”¨ç»„ä»¶"><a href="#ä½¿ç”¨ç»„ä»¶" class="headerlink" title="ä½¿ç”¨ç»„ä»¶"></a>ä½¿ç”¨ç»„ä»¶</h3><p>è¦ä½¿ç”¨ä¸€ä¸ªå­ç»„ä»¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨çˆ¶ç»„ä»¶ä¸­å¯¼å…¥å®ƒã€‚å‡è®¾æˆ‘ä»¬æŠŠè®¡æ•°å™¨ç»„ä»¶æ”¾åœ¨äº†ä¸€ä¸ªå«åš <code>ButtonCounter.vue</code> çš„æ–‡ä»¶ä¸­ï¼Œè¿™ä¸ªç»„ä»¶å°†ä¼šä»¥é»˜è®¤å¯¼å‡ºçš„å½¢å¼è¢«æš´éœ²ç»™å¤–éƒ¨ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import ButtonCounter from &#x27;./ButtonCounter.vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    ButtonCounter</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;Here is a child component!&lt;/h1&gt;</span><br><span class="line">  &lt;ButtonCounter /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è‹¥è¦å°†å¯¼å…¥çš„ç»„ä»¶æš´éœ²ç»™æ¨¡æ¿ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ <code>components</code> é€‰é¡¹ä¸Š<a href="https://cn.vuejs.org/guide/components/registration.html">æ³¨å†Œ</a>å®ƒã€‚è¿™ä¸ªç»„ä»¶å°†ä¼šä»¥å…¶æ³¨å†Œæ—¶çš„åå­—ä½œä¸ºæ¨¡æ¿ä¸­çš„æ ‡ç­¾åã€‚</p><p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥å…¨å±€åœ°æ³¨å†Œä¸€ä¸ªç»„ä»¶ï¼Œä½¿å¾—å®ƒåœ¨å½“å‰åº”ç”¨ä¸­çš„ä»»ä½•ç»„ä»¶ä¸Šéƒ½å¯ä»¥ä½¿ç”¨ï¼Œè€Œä¸éœ€è¦é¢å¤–å†å¯¼å…¥ã€‚å…³äºç»„ä»¶çš„å…¨å±€æ³¨å†Œå’Œå±€éƒ¨æ³¨å†Œä¸¤ç§æ–¹å¼çš„åˆ©å¼Šï¼Œæˆ‘ä»¬æ”¾åœ¨äº†<a href="https://cn.vuejs.org/guide/components/registration.html">ç»„ä»¶æ³¨å†Œ</a>è¿™ä¸€ç« èŠ‚ä¸­ä¸“é—¨è®¨è®ºã€‚</p><p>ç»„ä»¶å¯ä»¥è¢«é‡ç”¨ä»»æ„å¤šæ¬¡ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1&gt;Here is a child component!&lt;/h1&gt;</span><br><span class="line">&lt;ButtonCounter /&gt;</span><br><span class="line">&lt;ButtonCounter /&gt;</span><br><span class="line">&lt;ButtonCounter /&gt;</span><br></pre></td></tr></table></figure><p>ä½ ä¼šæ³¨æ„åˆ°ï¼Œæ¯å½“ç‚¹å‡»è¿™äº›æŒ‰é’®æ—¶ï¼Œæ¯ä¸€ä¸ªç»„ä»¶éƒ½ç»´æŠ¤ç€è‡ªå·±çš„çŠ¶æ€ï¼Œæ˜¯ä¸åŒçš„ <code>count</code>ã€‚è¿™æ˜¯å› ä¸ºæ¯å½“ä½ ä½¿ç”¨ä¸€ä¸ªç»„ä»¶ï¼Œå°±åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„<strong>å®ä¾‹</strong>ã€‚</p><p>åœ¨å•æ–‡ä»¶ç»„ä»¶ä¸­ï¼Œæ¨èä¸ºå­ç»„ä»¶ä½¿ç”¨ <code>PascalCase</code> çš„æ ‡ç­¾åï¼Œä»¥æ­¤æ¥å’ŒåŸç”Ÿçš„ HTML å…ƒç´ ä½œåŒºåˆ†ã€‚è™½ç„¶åŸç”Ÿ HTML æ ‡ç­¾åæ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ï¼Œä½† Vue å•æ–‡ä»¶ç»„ä»¶æ˜¯å¯ä»¥åœ¨ç¼–è¯‘ä¸­åŒºåˆ†å¤§å°å†™çš„ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>/&gt;</code> æ¥å…³é—­ä¸€ä¸ªæ ‡ç­¾ã€‚</p><p>å¦‚æœä½ æ˜¯ç›´æ¥åœ¨ DOM ä¸­ä¹¦å†™æ¨¡æ¿ (ä¾‹å¦‚åŸç”Ÿ <code>&lt;template&gt;</code> å…ƒç´ çš„å†…å®¹)ï¼Œæ¨¡æ¿çš„ç¼–è¯‘éœ€è¦éµä»æµè§ˆå™¨ä¸­ HTML çš„è§£æè¡Œä¸ºã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ åº”è¯¥éœ€è¦ä½¿ç”¨ <code>kebab-case</code> å½¢å¼å¹¶æ˜¾å¼åœ°å…³é—­è¿™äº›ç»„ä»¶çš„æ ‡ç­¾ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å¦‚æœæ˜¯åœ¨ <span class="variable constant_">DOM</span> ä¸­ä¹¦å†™è¯¥æ¨¡æ¿ --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button-counter</span>&gt;</span><span class="tag">&lt;/<span class="name">button-counter</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button-counter</span>&gt;</span><span class="tag">&lt;/<span class="name">button-counter</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button-counter</span>&gt;</span><span class="tag">&lt;/<span class="name">button-counter</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h3 id="ä¼ é€’-props"><a href="#ä¼ é€’-props" class="headerlink" title="ä¼ é€’ props"></a>ä¼ é€’ props</h3><p>å¦‚æœæˆ‘ä»¬æ­£åœ¨æ„å»ºä¸€ä¸ªåšå®¢ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ä¸€ä¸ªè¡¨ç¤ºåšå®¢æ–‡ç« çš„ç»„ä»¶ã€‚æˆ‘ä»¬å¸Œæœ›æ‰€æœ‰çš„åšå®¢æ–‡ç« åˆ†äº«ç›¸åŒçš„è§†è§‰å¸ƒå±€ï¼Œä½†æœ‰ä¸åŒçš„å†…å®¹ã€‚è¦å®ç°è¿™æ ·çš„æ•ˆæœè‡ªç„¶å¿…é¡»å‘ç»„ä»¶ä¸­ä¼ é€’æ•°æ®ï¼Œä¾‹å¦‚æ¯ç¯‡æ–‡ç« æ ‡é¢˜å’Œå†…å®¹ï¼Œè¿™å°±ä¼šä½¿ç”¨åˆ° propsã€‚</p><p>Props æ˜¯ä¸€ç§ç‰¹åˆ«çš„ attributesï¼Œä½ å¯ä»¥åœ¨ç»„ä»¶ä¸Šå£°æ˜æ³¨å†Œã€‚è¦ä¼ é€’ç»™åšå®¢æ–‡ç« ç»„ä»¶ä¸€ä¸ªæ ‡é¢˜ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨ç»„ä»¶çš„ props åˆ—è¡¨ä¸Šå£°æ˜å®ƒã€‚è¿™é‡Œè¦ç”¨åˆ° <a href="https://cn.vuejs.org/api/options-state.html#props"><code>props</code></a> é€‰é¡¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- BlogPost.vue --&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  props: [&#x27;title&#x27;]</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h4&gt;&#123;&#123; title &#125;&#125;&lt;/h4&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å½“ä¸€ä¸ªå€¼è¢«ä¼ é€’ç»™ prop æ—¶ï¼Œå®ƒå°†æˆä¸ºè¯¥ç»„ä»¶å®ä¾‹ä¸Šçš„ä¸€ä¸ªå±æ€§ã€‚è¯¥å±æ€§çš„å€¼å¯ä»¥åƒå…¶ä»–ç»„ä»¶å±æ€§ä¸€æ ·ï¼Œåœ¨æ¨¡æ¿å’Œç»„ä»¶çš„ <code>this</code> ä¸Šä¸‹æ–‡ä¸­è®¿é—®ã€‚</p><p>ä¸€ä¸ªç»„ä»¶å¯ä»¥æœ‰ä»»æ„å¤šçš„ propsï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰ prop éƒ½æ¥å—ä»»æ„ç±»å‹çš„å€¼ã€‚</p><p>å½“ä¸€ä¸ª prop è¢«æ³¨å†Œåï¼Œå¯ä»¥åƒè¿™æ ·ä»¥è‡ªå®šä¹‰ attribute çš„å½¢å¼ä¼ é€’æ•°æ®ç»™å®ƒï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">BlogPost</span> <span class="attr">title</span>=<span class="string">&quot;My journey with Vue&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">BlogPost</span> <span class="attr">title</span>=<span class="string">&quot;Blogging with Vue&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">BlogPost</span> <span class="attr">title</span>=<span class="string">&quot;Why Vue is so fun&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½åœ¨çˆ¶ç»„ä»¶ä¸­ä¼šæœ‰å¦‚ä¸‹çš„ä¸€ä¸ªåšå®¢æ–‡ç« æ•°ç»„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">posts</span>: [</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">title</span>: <span class="string">&#x27;My journey with Vue&#x27;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">title</span>: <span class="string">&#x27;Blogging with Vue&#x27;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">title</span>: <span class="string">&#x27;Why Vue is so fun&#x27;</span> &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>v-for</code> æ¥æ¸²æŸ“å®ƒä»¬ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">BlogPost</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-for</span>=<span class="string">&quot;post in posts&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:key</span>=<span class="string">&quot;post.id&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:title</span>=<span class="string">&quot;post.title&quot;</span></span></span><br><span class="line"><span class="tag"> /&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ç›‘å¬äº‹ä»¶"><a href="#ç›‘å¬äº‹ä»¶" class="headerlink" title="ç›‘å¬äº‹ä»¶"></a>ç›‘å¬äº‹ä»¶</h3><p>è®©æˆ‘ä»¬ç»§ç»­å…³æ³¨æˆ‘ä»¬çš„ <code>&lt;BlogPost&gt;</code> ç»„ä»¶ã€‚æˆ‘ä»¬ä¼šå‘ç°æœ‰æ—¶å€™å®ƒéœ€è¦ä¸çˆ¶ç»„ä»¶è¿›è¡Œäº¤äº’ã€‚ä¾‹å¦‚ï¼Œè¦åœ¨æ­¤å¤„å®ç° A11y çš„éœ€æ±‚ï¼Œå°†åšå®¢æ–‡ç« çš„æ–‡å­—èƒ½å¤Ÿæ”¾å¤§ï¼Œè€Œé¡µé¢çš„å…¶ä½™éƒ¨åˆ†ä»ä½¿ç”¨é»˜è®¤å­—å·ã€‚</p><p>åœ¨çˆ¶ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€ä¸ª <code>postFontSize</code> æ•°æ®å±æ€§æ¥å®ç°è¿™ä¸ªæ•ˆæœï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">posts</span>: [</span><br><span class="line">      <span class="comment">/* ... */</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">postFontSize</span>: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨æ¨¡æ¿ä¸­ç”¨å®ƒæ¥æ§åˆ¶æ‰€æœ‰åšå®¢æ–‡ç« çš„å­—ä½“å¤§å°ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:style</span>=<span class="string">&quot;&#123; fontSize: postFontSize + &#x27;em&#x27; &#125;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">BlogPost</span></span></span><br><span class="line"><span class="tag">    <span class="attr">v-for</span>=<span class="string">&quot;post in posts&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:key</span>=<span class="string">&quot;post.id&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:title</span>=<span class="string">&quot;post.title&quot;</span></span></span><br><span class="line"><span class="tag">   /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œç»™ <code>&lt;BlogPost&gt;</code> ç»„ä»¶æ·»åŠ ä¸€ä¸ªæŒ‰é’®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- BlogPost.vue, çœç•¥äº† &lt;script&gt; --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;blog-post&quot;&gt;</span><br><span class="line">    &lt;h4&gt;&#123;&#123; title &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;button&gt;Enlarge text&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæŒ‰é’®ç›®å‰è¿˜æ²¡æœ‰åšä»»ä½•äº‹æƒ…ï¼Œæˆ‘ä»¬æƒ³è¦ç‚¹å‡»è¿™ä¸ªæŒ‰é’®æ¥å‘Šè¯‰çˆ¶ç»„ä»¶å®ƒåº”è¯¥æ”¾å¤§æ‰€æœ‰åšå®¢æ–‡ç« çš„æ–‡å­—ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç»„ä»¶å®ä¾‹æä¾›äº†ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶ç³»ç»Ÿã€‚çˆ¶ç»„ä»¶å¯ä»¥é€šè¿‡ <code>v-on</code> æˆ– <code>@</code> æ¥é€‰æ‹©æ€§åœ°ç›‘å¬å­ç»„ä»¶ä¸ŠæŠ›çš„äº‹ä»¶ï¼Œå°±åƒç›‘å¬åŸç”Ÿ DOM äº‹ä»¶é‚£æ ·ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">BlogPost</span></span></span><br><span class="line"><span class="tag">  <span class="attr">...</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">enlarge-text</span>=<span class="string">&quot;postFontSize += 0.1&quot;</span></span></span><br><span class="line"><span class="tag"> /&gt;</span></span><br></pre></td></tr></table></figure><p>å­ç»„ä»¶å¯ä»¥é€šè¿‡è°ƒç”¨å†…ç½®çš„ <a href="https://cn.vuejs.org/api/component-instance.html#emit"><strong><code>$emit</code></strong> æ–¹æ³•</a>ï¼Œé€šè¿‡ä¼ å…¥äº‹ä»¶åç§°æ¥æŠ›å‡ºä¸€ä¸ªäº‹ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- BlogPost.vue, çœç•¥äº† &lt;script&gt; --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;blog-post&quot;&gt;</span><br><span class="line">    &lt;h4&gt;&#123;&#123; title &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;button @click=&quot;$emit(&#x27;enlarge-text&#x27;)&quot;&gt;Enlarge text&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å› ä¸ºæœ‰äº† <code>@enlarge-text=&quot;postFontSize += 0.1&quot;</code> çš„ç›‘å¬ï¼Œçˆ¶ç»„ä»¶ä¼šæ¥æ”¶è¿™ä¸€äº‹ä»¶ï¼Œä»è€Œæ›´æ–° <code>postFontSize</code> çš„å€¼ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ <a href="https://cn.vuejs.org/api/options-state.html#emits"><code>emits</code></a> é€‰é¡¹æ¥å£°æ˜éœ€è¦æŠ›å‡ºçš„äº‹ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- BlogPost.vue --&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  props: [&#x27;title&#x27;],</span><br><span class="line">  emits: [&#x27;enlarge-text&#x27;]</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™å£°æ˜äº†ä¸€ä¸ªç»„ä»¶å¯èƒ½è§¦å‘çš„æ‰€æœ‰äº‹ä»¶ï¼Œè¿˜å¯ä»¥å¯¹äº‹ä»¶çš„å‚æ•°è¿›è¡Œ<a href="https://cn.vuejs.org/guide/components/events.html#validate-emitted-events">éªŒè¯</a>ã€‚åŒæ—¶ï¼Œè¿™è¿˜å¯ä»¥è®© Vue é¿å…å°†å®ƒä»¬ä½œä¸ºåŸç”Ÿäº‹ä»¶ç›‘å¬å™¨éšå¼åœ°åº”ç”¨äºå­ç»„ä»¶çš„æ ¹å…ƒç´ ã€‚</p><p>ä»¥ä¸Šå°±æ˜¯ç›®å‰ä½ éœ€è¦äº†è§£çš„å…³äºç»„ä»¶è‡ªå®šä¹‰äº‹ä»¶çš„æ‰€æœ‰çŸ¥è¯†äº†ã€‚å¦‚æœä½ çœ‹å®Œæœ¬ç« èŠ‚åè¿˜æƒ³çŸ¥é“æ›´å¤šç»†èŠ‚ï¼Œè¯·æ·±å…¥é˜…è¯»<a href="https://cn.vuejs.org/guide/components/events.html">ç»„ä»¶äº‹ä»¶</a>ç« èŠ‚ã€‚</p><h3 id="é€šè¿‡æ’æ§½æ¥åˆ†é…å†…å®¹"><a href="#é€šè¿‡æ’æ§½æ¥åˆ†é…å†…å®¹" class="headerlink" title="é€šè¿‡æ’æ§½æ¥åˆ†é…å†…å®¹#"></a>é€šè¿‡æ’æ§½æ¥åˆ†é…å†…å®¹<a href="https://cn.vuejs.org/guide/essentials/component-basics.html#content-distribution-with-slots">#</a></h3><p>ä¸€äº›æƒ…å†µä¸‹æˆ‘ä»¬ä¼šå¸Œæœ›èƒ½å’Œ HTML å…ƒç´ ä¸€æ ·å‘ç»„ä»¶ä¸­ä¼ é€’å†…å®¹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">AlertBox</span>&gt;</span></span><br><span class="line">  Something bad happened.</span><br><span class="line"><span class="tag">&lt;/<span class="name">AlertBox</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™å¯ä»¥é€šè¿‡ Vue çš„è‡ªå®šä¹‰ <code>&lt;slot&gt;</code> å…ƒç´ æ¥å®ç°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;alert-box&quot;&gt;</span><br><span class="line">    &lt;strong&gt;This is an Error for Demo Purposes&lt;/strong&gt;</span><br><span class="line">    &lt;slot /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.alert-box &#123;</span><br><span class="line">  /* ... */</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;alert-box&quot;&gt;</span><br><span class="line">    &lt;strong&gt;Error!&lt;/strong&gt;</span><br><span class="line">    &lt;br/&gt;</span><br><span class="line">    &lt;slot /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.alert-box &#123;</span><br><span class="line">  color: #666;</span><br><span class="line">  border: 1px solid red;</span><br><span class="line">  border-radius: 4px;</span><br><span class="line">  padding: 20px;</span><br><span class="line">  background-color: #f8f8f8;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">strong &#123;</span><br><span class="line">color: red;    </span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import AlertBox from &#x27;./AlertBox.vue&#x27;</span><br><span class="line">  </span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123; AlertBox &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;AlertBox&gt;</span><br><span class="line">  Something bad happened.</span><br><span class="line">&lt;/AlertBox&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå°±æ˜¯ç›®å‰ä½ éœ€è¦äº†è§£çš„å…³äºæ’æ§½çš„æ‰€æœ‰çŸ¥è¯†äº†ã€‚å¦‚æœä½ çœ‹å®Œæœ¬ç« èŠ‚åè¿˜æƒ³çŸ¥é“æ›´å¤šç»†èŠ‚ï¼Œè¯·æ·±å…¥é˜…è¯»<a href="https://cn.vuejs.org/guide/components/slots.html">ç»„ä»¶æ’æ§½</a>ç« èŠ‚ã€‚</p><h3 id="åŠ¨æ€ç»„ä»¶"><a href="#åŠ¨æ€ç»„ä»¶" class="headerlink" title="åŠ¨æ€ç»„ä»¶"></a>åŠ¨æ€ç»„ä»¶</h3><p>æœ‰äº›åœºæ™¯ä¼šéœ€è¦åœ¨ä¸¤ä¸ªç»„ä»¶é—´æ¥å›åˆ‡æ¢ï¼Œæ¯”å¦‚ Tab ç•Œé¢ï¼š</p><p>ä¸Šé¢çš„ä¾‹å­æ˜¯é€šè¿‡ Vue çš„ <code>&lt;component&gt;</code> å…ƒç´ å’Œç‰¹æ®Šçš„ <code>is</code> attribute å®ç°çš„ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- currentTab æ”¹å˜æ—¶ç»„ä»¶ä¹Ÿæ”¹å˜ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;currentTab&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè¢«ä¼ ç»™ <code>:is</code> çš„å€¼å¯ä»¥æ˜¯ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li>è¢«æ³¨å†Œçš„ç»„ä»¶å</li><li>å¯¼å…¥çš„ç»„ä»¶å¯¹è±¡</li></ul><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>is</code> attribute æ¥åˆ›å»ºä¸€èˆ¬çš„ HTML å…ƒç´ ã€‚</p><p>å½“ä½¿ç”¨ <code>&lt;component :is=&quot;...&quot;&gt;</code> æ¥åœ¨å¤šä¸ªç»„ä»¶é—´ä½œåˆ‡æ¢æ—¶ï¼Œè¢«åˆ‡æ¢æ‰çš„ç»„ä»¶ä¼šè¢«å¸è½½ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ <a href="https://cn.vuejs.org/guide/built-ins/keep-alive.html">&#96;&#96; ç»„ä»¶</a>å¼ºåˆ¶è¢«åˆ‡æ¢æ‰çš„ç»„ä»¶ä»ç„¶ä¿æŒâ€œå­˜æ´»â€çš„çŠ¶æ€ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--Home.vue--&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;tab&quot;&gt;</span><br><span class="line">    Archive component</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--Posts.vue--&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;tab&quot;&gt;</span><br><span class="line">    Posts component</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;!--Archive.vue--&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;tab&quot;&gt;</span><br><span class="line">    Home component</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Home from &#x27;./Home.vue&#x27;</span><br><span class="line">import Posts from &#x27;./Posts.vue&#x27;</span><br><span class="line">import Archive from &#x27;./Archive.vue&#x27;</span><br><span class="line">  </span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    Home,</span><br><span class="line">    Posts,</span><br><span class="line">    Archive</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      currentTab: &#x27;Home&#x27;,</span><br><span class="line">      tabs: [&#x27;Home&#x27;, &#x27;Posts&#x27;, &#x27;Archive&#x27;]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;demo&quot;&gt;</span><br><span class="line">    &lt;button</span><br><span class="line">       v-for=&quot;tab in tabs&quot;</span><br><span class="line">       :key=&quot;tab&quot;</span><br><span class="line">       :class=&quot;[&#x27;tab-button&#x27;, &#123; active: currentTab === tab &#125;]&quot;</span><br><span class="line">       @click=&quot;currentTab = tab&quot;</span><br><span class="line">     &gt;</span><br><span class="line">      &#123;&#123; tab &#125;&#125;</span><br><span class="line">    &lt;/button&gt;</span><br><span class="line">  &lt;component :is=&quot;currentTab&quot; class=&quot;tab&quot;&gt;&lt;/component&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.demo &#123;</span><br><span class="line">  font-family: sans-serif;</span><br><span class="line">  border: 1px solid #eee;</span><br><span class="line">  border-radius: 2px;</span><br><span class="line">  padding: 20px 30px;</span><br><span class="line">  margin-top: 1em;</span><br><span class="line">  margin-bottom: 40px;</span><br><span class="line">  user-select: none;</span><br><span class="line">  overflow-x: auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.tab-button &#123;</span><br><span class="line">  padding: 6px 10px;</span><br><span class="line">  border-top-left-radius: 3px;</span><br><span class="line">  border-top-right-radius: 3px;</span><br><span class="line">  border: 1px solid #ccc;</span><br><span class="line">  cursor: pointer;</span><br><span class="line">  background: #f0f0f0;</span><br><span class="line">  margin-bottom: -1px;</span><br><span class="line">  margin-right: -1px;</span><br><span class="line">&#125;</span><br><span class="line">.tab-button:hover &#123;</span><br><span class="line">  background: #e0e0e0;</span><br><span class="line">&#125;</span><br><span class="line">.tab-button.active &#123;</span><br><span class="line">  background: #e0e0e0;</span><br><span class="line">&#125;</span><br><span class="line">.tab &#123;</span><br><span class="line">  border: 1px solid #ccc;</span><br><span class="line">  padding: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h1 id="æ·±å…¥ç»„ä»¶"><a href="#æ·±å…¥ç»„ä»¶" class="headerlink" title="æ·±å…¥ç»„ä»¶"></a><em>æ·±å…¥ç»„ä»¶</em></h1><h2 id="ç»„ä»¶æ³¨å†Œ"><a href="#ç»„ä»¶æ³¨å†Œ" class="headerlink" title="ç»„ä»¶æ³¨å†Œ"></a>ç»„ä»¶æ³¨å†Œ</h2><p>ä¸€ä¸ª Vue ç»„ä»¶åœ¨ä½¿ç”¨å‰éœ€è¦å…ˆè¢«â€œæ³¨å†Œâ€ï¼Œè¿™æ · Vue æ‰èƒ½åœ¨æ¸²æŸ“æ¨¡æ¿æ—¶æ‰¾åˆ°å…¶å¯¹åº”çš„å®ç°ã€‚ç»„ä»¶æ³¨å†Œæœ‰ä¸¤ç§æ–¹å¼ï¼šå…¨å±€æ³¨å†Œå’Œå±€éƒ¨æ³¨å†Œã€‚</p><h3 id="å…¨å±€æ³¨å†Œ"><a href="#å…¨å±€æ³¨å†Œ" class="headerlink" title="å…¨å±€æ³¨å†Œ"></a>å…¨å±€æ³¨å†Œ</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <a href="https://cn.vuejs.org/guide/essentials/application.html">Vue åº”ç”¨å®ä¾‹</a>çš„ <code>app.component()</code> æ–¹æ³•ï¼Œè®©ç»„ä»¶åœ¨å½“å‰ Vue åº”ç”¨ä¸­å…¨å±€å¯ç”¨ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;&#125;)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">component</span>(</span><br><span class="line">  <span class="comment">// æ³¨å†Œçš„åå­—</span></span><br><span class="line">  <span class="string">&#x27;MyComponent&#x27;</span>,</span><br><span class="line">  <span class="comment">// ç»„ä»¶çš„å®ç°</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">/* ... */</span></span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>å¦‚æœä½¿ç”¨å•æ–‡ä»¶ç»„ä»¶ï¼Œä½ å¯ä»¥æ³¨å†Œè¢«å¯¼å…¥çš„ <code>.vue</code> æ–‡ä»¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">MyComponent</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">component</span>(<span class="string">&#x27;MyComponent&#x27;</span>, <span class="title class_">MyComponent</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>app.component()</code> æ–¹æ³•å¯ä»¥è¢«é“¾å¼è°ƒç”¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app</span><br><span class="line">  .<span class="title function_">component</span>(<span class="string">&#x27;ComponentA&#x27;</span>, <span class="title class_">ComponentA</span>)</span><br><span class="line">  .<span class="title function_">component</span>(<span class="string">&#x27;ComponentB&#x27;</span>, <span class="title class_">ComponentB</span>)</span><br><span class="line">  .<span class="title function_">component</span>(<span class="string">&#x27;ComponentC&#x27;</span>, <span class="title class_">ComponentC</span>)</span><br></pre></td></tr></table></figure><p>å…¨å±€æ³¨å†Œçš„ç»„ä»¶å¯ä»¥åœ¨æ­¤åº”ç”¨çš„ä»»æ„ç»„ä»¶çš„æ¨¡æ¿ä¸­ä½¿ç”¨ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- è¿™åœ¨å½“å‰åº”ç”¨çš„ä»»æ„ç»„ä»¶ä¸­éƒ½å¯ç”¨ --&gt;</span><br><span class="line">&lt;ComponentA/&gt;</span><br><span class="line">&lt;ComponentB/&gt;</span><br><span class="line">&lt;ComponentC/&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ‰€æœ‰çš„å­ç»„ä»¶ä¹Ÿå¯ä»¥ä½¿ç”¨å…¨å±€æ³¨å†Œçš„ç»„ä»¶ï¼Œè¿™æ„å‘³ç€è¿™ä¸‰ä¸ªç»„ä»¶ä¹Ÿéƒ½å¯ä»¥åœ¨<em>å½¼æ­¤å†…éƒ¨</em>ä½¿ç”¨ã€‚</p><h3 id="å±€éƒ¨æ³¨å†Œ"><a href="#å±€éƒ¨æ³¨å†Œ" class="headerlink" title="å±€éƒ¨æ³¨å†Œ"></a>å±€éƒ¨æ³¨å†Œ</h3><p>å…¨å±€æ³¨å†Œè™½ç„¶å¾ˆæ–¹ä¾¿ï¼Œä½†æœ‰ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š</p><ol><li>å…¨å±€æ³¨å†Œï¼Œä½†å¹¶æ²¡æœ‰è¢«ä½¿ç”¨çš„ç»„ä»¶æ— æ³•åœ¨ç”Ÿäº§æ‰“åŒ…æ—¶è¢«è‡ªåŠ¨ç§»é™¤ (ä¹Ÿå«â€œtree-shakingâ€)ã€‚å¦‚æœä½ å…¨å±€æ³¨å†Œäº†ä¸€ä¸ªç»„ä»¶ï¼Œå³ä½¿å®ƒå¹¶æ²¡æœ‰è¢«å®é™…ä½¿ç”¨ï¼Œå®ƒä»ç„¶ä¼šå‡ºç°åœ¨æ‰“åŒ…åçš„ JS æ–‡ä»¶ä¸­ã€‚</li><li>å…¨å±€æ³¨å†Œåœ¨å¤§å‹é¡¹ç›®ä¸­ä½¿é¡¹ç›®çš„ä¾èµ–å…³ç³»å˜å¾—ä¸é‚£ä¹ˆæ˜ç¡®ã€‚åœ¨çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨å­ç»„ä»¶æ—¶ï¼Œä¸å¤ªå®¹æ˜“å®šä½å­ç»„ä»¶çš„å®ç°ã€‚å’Œä½¿ç”¨è¿‡å¤šçš„å…¨å±€å˜é‡ä¸€æ ·ï¼Œè¿™å¯èƒ½ä¼šå½±å“åº”ç”¨é•¿æœŸçš„å¯ç»´æŠ¤æ€§ã€‚</li></ol><p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œå±€éƒ¨æ³¨å†Œçš„ç»„ä»¶éœ€è¦åœ¨ä½¿ç”¨å®ƒçš„çˆ¶ç»„ä»¶ä¸­æ˜¾å¼å¯¼å…¥ï¼Œå¹¶ä¸”åªèƒ½åœ¨è¯¥çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨ã€‚å®ƒçš„ä¼˜ç‚¹æ˜¯ä½¿ç»„ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»æ›´åŠ æ˜ç¡®ï¼Œå¹¶ä¸”å¯¹ tree-shaking æ›´åŠ å‹å¥½ã€‚</p><p>å±€éƒ¨æ³¨å†Œéœ€è¦ä½¿ç”¨ <code>components</code> é€‰é¡¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import ComponentA from &#x27;./ComponentA.vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    ComponentA</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ComponentA /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯¹äºæ¯ä¸ª <code>components</code> å¯¹è±¡é‡Œçš„å±æ€§ï¼Œå®ƒä»¬çš„ key åå°±æ˜¯æ³¨å†Œçš„ç»„ä»¶åï¼Œè€Œå€¼å°±æ˜¯ç›¸åº”ç»„ä»¶çš„å®ç°ã€‚ä¸Šé¢çš„ä¾‹å­ä¸­ä½¿ç”¨çš„æ˜¯ ES2015 çš„ç¼©å†™è¯­æ³•ï¼Œç­‰ä»·äºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    <span class="title class_">ComponentA</span>: <span class="title class_">ComponentA</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„ï¼š<strong>å±€éƒ¨æ³¨å†Œçš„ç»„ä»¶åœ¨åä»£ç»„ä»¶ä¸­å¹¶*ä¸*å¯ç”¨</strong>ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>ComponentA</code> æ³¨å†Œåä»…åœ¨å½“å‰ç»„ä»¶å¯ç”¨ï¼Œè€Œåœ¨ä»»ä½•çš„å­ç»„ä»¶æˆ–æ›´æ·±å±‚çš„å­ç»„ä»¶ä¸­éƒ½ä¸å¯ç”¨ã€‚</p><h3 id="ç»„ä»¶åæ ¼å¼"><a href="#ç»„ä»¶åæ ¼å¼" class="headerlink" title="ç»„ä»¶åæ ¼å¼**"></a>ç»„ä»¶åæ ¼å¼<a href="https://cn.vuejs.org/guide/components/registration.html#component-name-casing">**</a></h3><p>åœ¨æ•´ä¸ªæŒ‡å¼•ä¸­ï¼Œæˆ‘ä»¬éƒ½ä½¿ç”¨ PascalCase ä½œä¸ºç»„ä»¶åçš„æ³¨å†Œæ ¼å¼ï¼Œè¿™æ˜¯å› ä¸ºï¼š</p><ol><li>PascalCase æ˜¯åˆæ³•çš„ JavaScript æ ‡è¯†ç¬¦ã€‚è¿™ä½¿å¾—åœ¨ JavaScript ä¸­å¯¼å…¥å’Œæ³¨å†Œç»„ä»¶éƒ½å¾ˆå®¹æ˜“ï¼ŒåŒæ—¶ IDE ä¹Ÿèƒ½æä¾›è¾ƒå¥½çš„è‡ªåŠ¨è¡¥å…¨ã€‚</li><li><code>&lt;PascalCase /&gt;</code> åœ¨æ¨¡æ¿ä¸­æ›´æ˜æ˜¾åœ°è¡¨æ˜äº†è¿™æ˜¯ä¸€ä¸ª Vue ç»„ä»¶ï¼Œè€Œä¸æ˜¯åŸç”Ÿ HTML å…ƒç´ ã€‚åŒæ—¶ä¹Ÿèƒ½å¤Ÿå°† Vue ç»„ä»¶å’Œè‡ªå®šä¹‰å…ƒç´  (web components) åŒºåˆ†å¼€æ¥ã€‚</li></ol><p>åœ¨å•æ–‡ä»¶ç»„ä»¶å’Œå†…è”å­—ç¬¦ä¸²æ¨¡æ¿ä¸­ï¼Œæˆ‘ä»¬éƒ½æ¨èè¿™æ ·åšã€‚ä½†æ˜¯ï¼ŒPascalCase çš„æ ‡ç­¾ååœ¨ DOM æ¨¡æ¿ä¸­æ˜¯ä¸å¯ç”¨çš„ï¼Œè¯¦æƒ…å‚è§ <a href="https://cn.vuejs.org/guide/essentials/component-basics.html#dom-template-parsing-caveats">DOM æ¨¡æ¿è§£ææ³¨æ„äº‹é¡¹</a>ã€‚</p><p>ä¸ºäº†æ–¹ä¾¿ï¼ŒVue æ”¯æŒå°†æ¨¡æ¿ä¸­ä½¿ç”¨ kebab-case çš„æ ‡ç­¾è§£æä¸ºä½¿ç”¨ PascalCase æ³¨å†Œçš„ç»„ä»¶ã€‚è¿™æ„å‘³ç€ä¸€ä¸ªä»¥ <code>MyComponent</code> ä¸ºåæ³¨å†Œçš„ç»„ä»¶ï¼Œåœ¨æ¨¡æ¿ä¸­å¯ä»¥é€šè¿‡ <code>&lt;MyComponent&gt;</code> æˆ– <code>&lt;my-component&gt;</code> å¼•ç”¨ã€‚è¿™è®©æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨åŒæ ·çš„ JavaScript ç»„ä»¶æ³¨å†Œä»£ç æ¥é…åˆä¸åŒæ¥æºçš„æ¨¡æ¿ã€‚</p><h2 id="Props"><a href="#Props" class="headerlink" title="Props"></a>Props</h2><h3 id="Props-å£°æ˜"><a href="#Props-å£°æ˜" class="headerlink" title="Props å£°æ˜"></a>Props å£°æ˜</h3><p>ä¸€ä¸ªç»„ä»¶éœ€è¦æ˜¾å¼å£°æ˜å®ƒæ‰€æ¥å—çš„ propsï¼Œè¿™æ · Vue æ‰èƒ½çŸ¥é“å¤–éƒ¨ä¼ å…¥çš„å“ªäº›æ˜¯ propsï¼Œå“ªäº›æ˜¯é€ä¼  attribute (å…³äºé€ä¼  attributeï¼Œæˆ‘ä»¬ä¼šåœ¨<a href="https://cn.vuejs.org/guide/components/attrs.html">ä¸“é—¨çš„ç« èŠ‚</a>ä¸­è®¨è®º)ã€‚</p><p>props éœ€è¦ä½¿ç”¨ <a href="https://cn.vuejs.org/api/options-state.html#props"><code>props</code></a> é€‰é¡¹æ¥å®šä¹‰ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">props</span>: [<span class="string">&#x27;foo&#x27;</span>],</span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// props ä¼šæš´éœ²åˆ° `this` ä¸Š</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">foo</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é™¤äº†ä½¿ç”¨å­—ç¬¦ä¸²æ•°ç»„æ¥å£°æ˜ prop å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å¯¹è±¡çš„å½¢å¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="title class_">String</span>,</span><br><span class="line">    <span class="attr">likes</span>: <span class="title class_">Number</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹äºä»¥å¯¹è±¡å½¢å¼å£°æ˜ä¸­çš„æ¯ä¸ªå±æ€§ï¼Œkey æ˜¯ prop çš„åç§°ï¼Œè€Œå€¼åˆ™æ˜¯è¯¥ prop é¢„æœŸç±»å‹çš„æ„é€ å‡½æ•°ã€‚æ¯”å¦‚ï¼Œå¦‚æœè¦æ±‚ä¸€ä¸ª prop çš„å€¼æ˜¯ <code>number</code> ç±»å‹ï¼Œåˆ™å¯ä½¿ç”¨ <code>Number</code> æ„é€ å‡½æ•°ä½œä¸ºå…¶å£°æ˜çš„å€¼ã€‚</p><p>å¯¹è±¡å½¢å¼çš„ props å£°æ˜ä¸ä»…å¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šä½œä¸ºç»„ä»¶çš„æ–‡æ¡£ï¼Œè€Œä¸”å¦‚æœå…¶ä»–å¼€å‘è€…åœ¨ä½¿ç”¨ä½ çš„ç»„ä»¶æ—¶ä¼ é€’äº†é”™è¯¯çš„ç±»å‹ï¼Œä¹Ÿä¼šåœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­æŠ›å‡ºè­¦å‘Šã€‚æˆ‘ä»¬å°†åœ¨æœ¬ç« èŠ‚ç¨åè¿›ä¸€æ­¥è®¨è®ºæœ‰å…³ <a href="https://cn.vuejs.org/guide/components/props.html#prop-validation">prop æ ¡éªŒ</a>çš„æ›´å¤šç»†èŠ‚ã€‚</p><h3 id="ä¼ é€’-prop-çš„ç»†èŠ‚"><a href="#ä¼ é€’-prop-çš„ç»†èŠ‚" class="headerlink" title="ä¼ é€’ prop çš„ç»†èŠ‚"></a>ä¼ é€’ prop çš„ç»†èŠ‚</h3><p>å¦‚æœä¸€ä¸ª prop çš„åå­—å¾ˆé•¿ï¼Œåº”ä½¿ç”¨ camelCase å½¢å¼ï¼Œå› ä¸ºå®ƒä»¬æ˜¯åˆæ³•çš„ JavaScript æ ‡è¯†ç¬¦ï¼Œå¯ä»¥ç›´æ¥åœ¨æ¨¡æ¿çš„è¡¨è¾¾å¼ä¸­ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥é¿å…åœ¨ä½œä¸ºå±æ€§ key åæ—¶å¿…é¡»åŠ ä¸Šå¼•å·ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">greetingMessage</span>: <span class="title class_">String</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; greetingMessage &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è™½ç„¶ç†è®ºä¸Šä½ ä¹Ÿå¯ä»¥åœ¨å‘å­ç»„ä»¶ä¼ é€’ props æ—¶ä½¿ç”¨ camelCase å½¢å¼ (ä½¿ç”¨ <a href="https://cn.vuejs.org/guide/essentials/component-basics.html#dom-template-parsing-caveats">DOM æ¨¡æ¿</a>æ—¶ä¾‹å¤–)ï¼Œä½†å®é™…ä¸Šä¸ºäº†å’Œ HTML attribute å¯¹é½ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå°†å…¶å†™ä¸º kebab-case å½¢å¼</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">MyComponent</span> <span class="attr">greeting-message</span>=<span class="string">&quot;hello&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>å¯¹äºç»„ä»¶åæˆ‘ä»¬æ¨èä½¿ç”¨ <a href="https://cn.vuejs.org/guide/components/registration.html#component-name-casing">PascalCase</a>ï¼Œå› ä¸ºè¿™æé«˜äº†æ¨¡æ¿çš„å¯è¯»æ€§ï¼Œèƒ½å¸®åŠ©æˆ‘ä»¬åŒºåˆ† Vue ç»„ä»¶å’ŒåŸç”Ÿ HTML å…ƒç´ ã€‚ç„¶è€Œå¯¹äºä¼ é€’ props æ¥è¯´ï¼Œä½¿ç”¨ camelCase å¹¶æ²¡æœ‰å¤ªå¤šä¼˜åŠ¿ï¼Œå› æ­¤æˆ‘ä»¬æ¨èæ›´è´´è¿‘ HTML çš„ä¹¦å†™é£æ ¼ã€‚</p><h3 id="é™æ€-vs-åŠ¨æ€-Prop"><a href="#é™æ€-vs-åŠ¨æ€-Prop" class="headerlink" title="é™æ€ vs. åŠ¨æ€ Prop"></a>é™æ€ vs. åŠ¨æ€ Prop</h3><p>è‡³æ­¤ï¼Œä½ å·²ç»è§è¿‡äº†å¾ˆå¤šåƒè¿™æ ·çš„é™æ€å€¼å½¢å¼çš„ propsï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">BlogPost</span> <span class="attr">title</span>=<span class="string">&quot;My journey with Vue&quot;</span> /&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç›¸åº”åœ°ï¼Œè¿˜æœ‰ä½¿ç”¨ <code>v-bind</code> æˆ–ç¼©å†™ <code>:</code> æ¥è¿›è¡ŒåŠ¨æ€ç»‘å®šçš„ propsï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ ¹æ®ä¸€ä¸ªå˜é‡çš„å€¼åŠ¨æ€ä¼ å…¥ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">BlogPost</span> <span class="attr">:title</span>=<span class="string">&quot;post.title&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ ¹æ®ä¸€ä¸ªæ›´å¤æ‚è¡¨è¾¾å¼çš„å€¼åŠ¨æ€ä¼ å…¥ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">BlogPost</span> <span class="attr">:title</span>=<span class="string">&quot;post.title + &#x27; by &#x27; + post.author.name&quot;</span> /&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="ä¼ é€’ä¸åŒçš„å€¼ç±»å‹"><a href="#ä¼ é€’ä¸åŒçš„å€¼ç±»å‹" class="headerlink" title="ä¼ é€’ä¸åŒçš„å€¼ç±»å‹**"></a>ä¼ é€’ä¸åŒçš„å€¼ç±»å‹<a href="https://cn.vuejs.org/guide/components/props.html#passing-different-value-types">**</a></h4><p>åœ¨ä¸Šè¿°çš„ä¸¤ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åªä¼ å…¥äº†å­—ç¬¦ä¸²å€¼ï¼Œä½†å®é™…ä¸Š<strong>ä»»ä½•</strong>ç±»å‹çš„å€¼éƒ½å¯ä»¥ä½œä¸º props çš„å€¼è¢«ä¼ é€’ã€‚</p><h5 id="Number"><a href="#Number" class="headerlink" title="Number"></a>Number</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è™½ç„¶ `42` æ˜¯ä¸ªå¸¸é‡ï¼Œæˆ‘ä»¬è¿˜æ˜¯éœ€è¦ä½¿ç”¨ v-bind --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å› ä¸ºè¿™æ˜¯ä¸€ä¸ª JavaScript è¡¨è¾¾å¼è€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸² --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">BlogPost</span> <span class="attr">:likes</span>=<span class="string">&quot;42&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ ¹æ®ä¸€ä¸ªå˜é‡çš„å€¼åŠ¨æ€ä¼ å…¥ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">BlogPost</span> <span class="attr">:likes</span>=<span class="string">&quot;post.likes&quot;</span> /&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="Boolean"><a href="#Boolean" class="headerlink" title="Boolean"></a>Boolean</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ä»…å†™ä¸Š prop ä½†ä¸ä¼ å€¼ï¼Œä¼šéšå¼è½¬æ¢ä¸º `true` --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">BlogPost</span> <span class="attr">is-published</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- è™½ç„¶ `false` æ˜¯é™æ€çš„å€¼ï¼Œæˆ‘ä»¬è¿˜æ˜¯éœ€è¦ä½¿ç”¨ v-bind --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å› ä¸ºè¿™æ˜¯ä¸€ä¸ª JavaScript è¡¨è¾¾å¼è€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸² --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">BlogPost</span> <span class="attr">:is-published</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ ¹æ®ä¸€ä¸ªå˜é‡çš„å€¼åŠ¨æ€ä¼ å…¥ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">BlogPost</span> <span class="attr">:is-published</span>=<span class="string">&quot;post.isPublished&quot;</span> /&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- è™½ç„¶è¿™ä¸ªæ•°ç»„æ˜¯ä¸ªå¸¸é‡ï¼Œæˆ‘ä»¬è¿˜æ˜¯éœ€è¦ä½¿ç”¨ v-bind --&gt;</span><br><span class="line">&lt;!-- å› ä¸ºè¿™æ˜¯ä¸€ä¸ª JavaScript è¡¨è¾¾å¼è€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸² --&gt;</span><br><span class="line">&lt;BlogPost :comment-ids=&quot;[234, 266, 273]&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- æ ¹æ®ä¸€ä¸ªå˜é‡çš„å€¼åŠ¨æ€ä¼ å…¥ --&gt;</span><br><span class="line">&lt;BlogPost :comment-ids=&quot;post.commentIds&quot; /&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- è™½ç„¶è¿™ä¸ªå¯¹è±¡å­—é¢é‡æ˜¯ä¸ªå¸¸é‡ï¼Œæˆ‘ä»¬è¿˜æ˜¯éœ€è¦ä½¿ç”¨ v-bind --&gt;</span><br><span class="line">&lt;!-- å› ä¸ºè¿™æ˜¯ä¸€ä¸ª JavaScript è¡¨è¾¾å¼è€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸² --&gt;</span><br><span class="line">&lt;BlogPost</span><br><span class="line">  :author=&quot;&#123;</span><br><span class="line">    name: &#x27;Veronica&#x27;,</span><br><span class="line">    company: &#x27;Veridian Dynamics&#x27;</span><br><span class="line">  &#125;&quot;</span><br><span class="line"> /&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- æ ¹æ®ä¸€ä¸ªå˜é‡çš„å€¼åŠ¨æ€ä¼ å…¥ --&gt;</span><br><span class="line">&lt;BlogPost :author=&quot;post.author&quot; /&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡ç»‘å®šå¤šä¸ª-prop"><a href="#ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡ç»‘å®šå¤šä¸ª-prop" class="headerlink" title="ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡ç»‘å®šå¤šä¸ª prop"></a>ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡ç»‘å®šå¤šä¸ª prop</h4><p>å¦‚æœä½ æƒ³è¦å°†ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§éƒ½å½“ä½œ props ä¼ å…¥ï¼Œä½ å¯ä»¥ä½¿ç”¨<a href="https://cn.vuejs.org/guide/essentials/template-syntax.html#dynamically-binding-multiple-attributes">æ²¡æœ‰å‚æ•°çš„ <code>v-bind</code></a>ï¼Œå³åªä½¿ç”¨ <code>v-bind</code> è€Œé <code>:prop-name</code>ã€‚ä¾‹å¦‚ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ª <code>post</code> å¯¹è±¡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">post</span>: &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;My Journey with Vue&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä»¥åŠä¸‹é¢çš„æ¨¡æ¿ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">BlogPost</span> <span class="attr">v-bind</span>=<span class="string">&quot;post&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>è€Œè¿™å®é™…ä¸Šç­‰ä»·äºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;BlogPost :id=&quot;post.id&quot; :title=&quot;post.title&quot; /&gt;</span><br></pre></td></tr></table></figure><h3 id="å•å‘æ•°æ®æµ"><a href="#å•å‘æ•°æ®æµ" class="headerlink" title="å•å‘æ•°æ®æµ"></a>å•å‘æ•°æ®æµ</h3><p>æ‰€æœ‰çš„ props éƒ½éµå¾ªç€<strong>å•å‘ç»‘å®š</strong>åŸåˆ™ï¼Œprops å› çˆ¶ç»„ä»¶çš„æ›´æ–°è€Œå˜åŒ–ï¼Œè‡ªç„¶åœ°å°†æ–°çš„çŠ¶æ€å‘ä¸‹æµå¾€å­ç»„ä»¶ï¼Œè€Œä¸ä¼šé€†å‘ä¼ é€’ã€‚è¿™é¿å…äº†å­ç»„ä»¶æ„å¤–ä¿®æ”¹çˆ¶ç»„ä»¶çš„çŠ¶æ€çš„æƒ…å†µï¼Œä¸ç„¶åº”ç”¨çš„æ•°æ®æµå°†å¾ˆå®¹æ˜“å˜å¾—æ··ä¹±è€Œéš¾ä»¥ç†è§£ã€‚</p><p>å¦å¤–ï¼Œæ¯æ¬¡çˆ¶ç»„ä»¶æ›´æ–°åï¼Œæ‰€æœ‰çš„å­ç»„ä»¶ä¸­çš„ props éƒ½ä¼šè¢«æ›´æ–°åˆ°æœ€æ–°å€¼ï¼Œè¿™æ„å‘³ç€ä½ <strong>ä¸åº”è¯¥</strong>åœ¨å­ç»„ä»¶ä¸­å»æ›´æ”¹ä¸€ä¸ª propã€‚è‹¥ä½ è¿™ä¹ˆåšäº†ï¼ŒVue ä¼šåœ¨æ§åˆ¶å°ä¸Šå‘ä½ æŠ›å‡ºè­¦å‘Šï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">props</span>: [<span class="string">&#x27;foo&#x27;</span>],</span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// âŒ è­¦å‘Šï¼prop æ˜¯åªè¯»çš„ï¼</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">foo</span> = <span class="string">&#x27;bar&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¼è‡´ä½ æƒ³è¦æ›´æ”¹ä¸€ä¸ª prop çš„éœ€æ±‚é€šå¸¸æ¥æºäºä»¥ä¸‹ä¸¤ç§åœºæ™¯ï¼š</p><ol><li><p><strong>prop è¢«ç”¨äºä¼ å…¥åˆå§‹å€¼ï¼›è€Œå­ç»„ä»¶æƒ³åœ¨ä¹‹åå°†å…¶ä½œä¸ºä¸€ä¸ªå±€éƒ¨æ•°æ®å±æ€§</strong>ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€å¥½æ˜¯æ–°å®šä¹‰ä¸€ä¸ªå±€éƒ¨æ•°æ®å±æ€§ï¼Œä» props ä¸Šè·å–åˆå§‹å€¼å³å¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">props</span>: [<span class="string">&#x27;initialCounter&#x27;</span>],</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="comment">// è®¡æ•°å™¨åªæ˜¯å°† this.initialCounter ä½œä¸ºåˆå§‹å€¼</span></span><br><span class="line">      <span class="comment">// åƒä¸‹é¢è¿™æ ·åšå°±ä½¿ prop å’Œåç»­æ›´æ–°æ— å…³äº†</span></span><br><span class="line">      <span class="attr">counter</span>: <span class="variable language_">this</span>.<span class="property">initialCounter</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p><strong>éœ€è¦å¯¹ä¼ å…¥çš„ prop å€¼åšè¿›ä¸€æ­¥çš„è½¬æ¢</strong>ã€‚åœ¨è¿™ç§æƒ…å†µä¸­ï¼Œæœ€å¥½æ˜¯åŸºäºè¯¥ prop å€¼å®šä¹‰ä¸€ä¸ªè®¡ç®—å±æ€§</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">props</span>: [<span class="string">&#x27;size&#x27;</span>],</span><br><span class="line">  <span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="comment">// è¯¥ prop å˜æ›´æ—¶è®¡ç®—å±æ€§ä¹Ÿä¼šè‡ªåŠ¨æ›´æ–°</span></span><br><span class="line">    <span class="title function_">normalizedSize</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">size</span>.<span class="title function_">trim</span>().<span class="title function_">toLowerCase</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><h3 id="æ›´æ”¹å¯¹è±¡-x2F-æ•°ç»„ç±»å‹çš„-props"><a href="#æ›´æ”¹å¯¹è±¡-x2F-æ•°ç»„ç±»å‹çš„-props" class="headerlink" title="æ›´æ”¹å¯¹è±¡ &#x2F; æ•°ç»„ç±»å‹çš„ props"></a>æ›´æ”¹å¯¹è±¡ &#x2F; æ•°ç»„ç±»å‹çš„ props</h3><p>å½“å¯¹è±¡æˆ–æ•°ç»„ä½œä¸º props è¢«ä¼ å…¥æ—¶ï¼Œè™½ç„¶å­ç»„ä»¶æ— æ³•æ›´æ”¹ props ç»‘å®šï¼Œä½†ä»ç„¶<strong>å¯ä»¥</strong>æ›´æ”¹å¯¹è±¡æˆ–æ•°ç»„å†…éƒ¨çš„å€¼ã€‚è¿™æ˜¯å› ä¸º JavaScript çš„å¯¹è±¡å’Œæ•°ç»„æ˜¯æŒ‰å¼•ç”¨ä¼ é€’ï¼Œè€Œå¯¹ Vue æ¥è¯´ï¼Œç¦æ­¢è¿™æ ·çš„æ”¹åŠ¨è™½ç„¶å¯èƒ½ï¼Œä½†æœ‰å¾ˆå¤§çš„æ€§èƒ½æŸè€—ï¼Œæ¯”è¾ƒå¾—ä¸å¿å¤±ã€‚</p><p>è¿™ç§æ›´æ”¹çš„ä¸»è¦ç¼ºé™·æ˜¯å®ƒå…è®¸äº†å­ç»„ä»¶ä»¥æŸç§ä¸æ˜æ˜¾çš„æ–¹å¼å½±å“çˆ¶ç»„ä»¶çš„çŠ¶æ€ï¼Œå¯èƒ½ä¼šä½¿æ•°æ®æµåœ¨å°†æ¥å˜å¾—æ›´éš¾ä»¥ç†è§£ã€‚åœ¨æœ€ä½³å®è·µä¸­ï¼Œä½ åº”è¯¥å°½å¯èƒ½é¿å…è¿™æ ·çš„æ›´æ”¹ï¼Œé™¤éçˆ¶å­ç»„ä»¶åœ¨è®¾è®¡ä¸Šæœ¬æ¥å°±éœ€è¦ç´§å¯†è€¦åˆã€‚åœ¨å¤§å¤šæ•°åœºæ™¯ä¸‹ï¼Œå­ç»„ä»¶åº”è¯¥<a href="https://cn.vuejs.org/guide/components/events.html">æŠ›å‡ºä¸€ä¸ªäº‹ä»¶</a>æ¥é€šçŸ¥çˆ¶ç»„ä»¶åšå‡ºæ”¹å˜ã€‚</p><h3 id="Prop-æ ¡éªŒ"><a href="#Prop-æ ¡éªŒ" class="headerlink" title="Prop æ ¡éªŒ"></a>Prop æ ¡éªŒ</h3><p>Vue ç»„ä»¶å¯ä»¥æ›´ç»†è‡´åœ°å£°æ˜å¯¹ä¼ å…¥çš„ props çš„æ ¡éªŒè¦æ±‚ã€‚æ¯”å¦‚æˆ‘ä»¬ä¸Šé¢å·²ç»çœ‹åˆ°è¿‡çš„ç±»å‹å£°æ˜ï¼Œå¦‚æœä¼ å…¥çš„å€¼ä¸æ»¡è¶³ç±»å‹è¦æ±‚ï¼ŒVue ä¼šåœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­æŠ›å‡ºè­¦å‘Šæ¥æé†’ä½¿ç”¨è€…ã€‚è¿™åœ¨å¼€å‘ç»™å…¶ä»–å¼€å‘è€…ä½¿ç”¨çš„ç»„ä»¶æ—¶éå¸¸æœ‰ç”¨ã€‚</p><p>è¦å£°æ˜å¯¹ props çš„æ ¡éªŒï¼Œä½ å¯ä»¥å‘ <code>props</code> é€‰é¡¹æä¾›ä¸€ä¸ªå¸¦æœ‰ props æ ¡éªŒé€‰é¡¹çš„å¯¹è±¡ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="comment">// åŸºç¡€ç±»å‹æ£€æŸ¥</span></span><br><span class="line">    <span class="comment">//ï¼ˆç»™å‡º `null` å’Œ `undefined` å€¼åˆ™ä¼šè·³è¿‡ä»»ä½•ç±»å‹æ£€æŸ¥ï¼‰</span></span><br><span class="line">    <span class="attr">propA</span>: <span class="title class_">Number</span>,</span><br><span class="line">    <span class="comment">// å¤šç§å¯èƒ½çš„ç±»å‹</span></span><br><span class="line">    <span class="attr">propB</span>: [<span class="title class_">String</span>, <span class="title class_">Number</span>],</span><br><span class="line">    <span class="comment">// å¿…ä¼ ï¼Œä¸”ä¸º String ç±»å‹</span></span><br><span class="line">    <span class="attr">propC</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">      <span class="attr">required</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// Number ç±»å‹çš„é»˜è®¤å€¼</span></span><br><span class="line">    <span class="attr">propD</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">Number</span>,</span><br><span class="line">      <span class="attr">default</span>: <span class="number">100</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// å¯¹è±¡ç±»å‹çš„é»˜è®¤å€¼</span></span><br><span class="line">    <span class="attr">propE</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">Object</span>,</span><br><span class="line">      <span class="comment">// å¯¹è±¡æˆ–è€…æ•°ç»„åº”å½“ç”¨å·¥å‚å‡½æ•°è¿”å›ã€‚</span></span><br><span class="line">      <span class="comment">// å·¥å‚å‡½æ•°ä¼šæ”¶åˆ°ç»„ä»¶æ‰€æ¥æ”¶çš„åŸå§‹ props</span></span><br><span class="line">      <span class="comment">// ä½œä¸ºå‚æ•°</span></span><br><span class="line">      <span class="title function_">default</span>(<span class="params">rawProps</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123; <span class="attr">message</span>: <span class="string">&#x27;hello&#x27;</span> &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// è‡ªå®šä¹‰ç±»å‹æ ¡éªŒå‡½æ•°</span></span><br><span class="line">    <span class="attr">propF</span>: &#123;</span><br><span class="line">      <span class="title function_">validator</span>(<span class="params">value</span>) &#123;</span><br><span class="line">        <span class="comment">// The value must match one of these strings</span></span><br><span class="line">        <span class="keyword">return</span> [<span class="string">&#x27;success&#x27;</span>, <span class="string">&#x27;warning&#x27;</span>, <span class="string">&#x27;danger&#x27;</span>].<span class="title function_">includes</span>(value)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// å‡½æ•°ç±»å‹çš„é»˜è®¤å€¼</span></span><br><span class="line">    <span class="attr">propG</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="title class_">Function</span>,</span><br><span class="line">      <span class="comment">// ä¸åƒå¯¹è±¡æˆ–æ•°ç»„çš„é»˜è®¤ï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªå·¥å‚å‡½æ•°ã€‚è¿™ä¼šæ˜¯ä¸€ä¸ªç”¨æ¥ä½œä¸ºé»˜è®¤å€¼çš„å‡½æ•°</span></span><br><span class="line">      <span class="title function_">default</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;Default function&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸€äº›è¡¥å……ç»†èŠ‚ï¼š</p><ul><li>æ‰€æœ‰ prop é»˜è®¤éƒ½æ˜¯å¯é€‰çš„ï¼Œé™¤éå£°æ˜äº† <code>required: true</code>ã€‚</li><li>é™¤ <code>Boolean</code> å¤–çš„æœªä¼ é€’çš„å¯é€‰ prop å°†ä¼šæœ‰ä¸€ä¸ªé»˜è®¤å€¼ <code>undefined</code>ã€‚</li><li><code>Boolean</code> ç±»å‹çš„æœªä¼ é€’ prop å°†è¢«è½¬æ¢ä¸º <code>false</code>ã€‚ä½ åº”è¯¥ä¸ºå®ƒè®¾ç½®ä¸€ä¸ª <code>default</code> å€¼æ¥ç¡®ä¿è¡Œä¸ºç¬¦åˆé¢„æœŸã€‚</li><li>å¦‚æœå£°æ˜äº† <code>default</code> å€¼ï¼Œé‚£ä¹ˆåœ¨ prop çš„å€¼è¢«è§£æä¸º <code>undefined</code> æ—¶ï¼Œæ— è®º prop æ˜¯æœªè¢«ä¼ é€’è¿˜æ˜¯æ˜¾å¼æŒ‡æ˜çš„ <code>undefined</code>ï¼Œéƒ½ä¼šæ”¹ä¸º <code>default</code> å€¼ã€‚</li></ul><p>å½“ prop çš„æ ¡éªŒå¤±è´¥åï¼ŒVue ä¼šæŠ›å‡ºä¸€ä¸ªæ§åˆ¶å°è­¦å‘Š (åœ¨å¼€å‘æ¨¡å¼ä¸‹)ã€‚</p><h4 id="è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥"><a href="#è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥" class="headerlink" title="è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥#"></a>è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥<a href="https://cn.vuejs.org/guide/components/props.html#runtime-type-checks">#</a></h4><p>æ ¡éªŒé€‰é¡¹ä¸­çš„ <code>type</code> å¯ä»¥æ˜¯ä¸‹åˆ—è¿™äº›åŸç”Ÿæ„é€ å‡½æ•°ï¼š</p><ul><li><code>String</code></li><li><code>Number</code></li><li><code>Boolean</code></li><li><code>Array</code></li><li><code>Object</code></li><li><code>Date</code></li><li><code>Function</code></li><li><code>Symbol</code></li></ul><p>å¦å¤–ï¼Œ<code>type</code> ä¹Ÿå¯ä»¥æ˜¯è‡ªå®šä¹‰çš„ç±»æˆ–æ„é€ å‡½æ•°ï¼ŒVue å°†ä¼šé€šè¿‡ <code>instanceof</code> æ¥æ£€æŸ¥ç±»å‹æ˜¯å¦åŒ¹é…ã€‚ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªç±»ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">firstName, lastName</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">firstName</span> = firstName</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">lastName</span> = lastName</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥å°†å…¶ä½œä¸ºä¸€ä¸ª prop çš„ç±»å‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">author</span>: <span class="title class_">Person</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Vue ä¼šé€šè¿‡ <code>instanceof Person</code> æ¥æ ¡éªŒ <code>author</code> prop çš„å€¼æ˜¯å¦æ˜¯ <code>Person</code> ç±»çš„ä¸€ä¸ªå®ä¾‹ã€‚</p><h3 id="Boolean-ç±»å‹è½¬æ¢"><a href="#Boolean-ç±»å‹è½¬æ¢" class="headerlink" title="Boolean ç±»å‹è½¬æ¢"></a>Boolean ç±»å‹è½¬æ¢</h3><p>ä¸ºäº†æ›´è´´è¿‘åŸç”Ÿ boolean attributes çš„è¡Œä¸ºï¼Œå£°æ˜ä¸º <code>Boolean</code> ç±»å‹çš„ props æœ‰ç‰¹åˆ«çš„ç±»å‹è½¬æ¢è§„åˆ™ã€‚ä»¥å¸¦æœ‰å¦‚ä¸‹å£°æ˜çš„ <code>&lt;MyComponent&gt;</code> ç»„ä»¶ä¸ºä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">disabled</span>: <span class="title class_">Boolean</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥ç»„ä»¶å¯ä»¥è¢«è¿™æ ·ä½¿ç”¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ç­‰åŒäºä¼ å…¥ :disabled=<span class="string">&quot;true&quot;</span> --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">MyComponent</span> <span class="attr">disabled</span> /&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;!-- ç­‰åŒäºä¼ å…¥ :disabled=<span class="string">&quot;false&quot;</span> --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">MyComponent</span> /&gt;</span></span></span><br></pre></td></tr></table></figure><p>å½“ä¸€ä¸ª prop è¢«å£°æ˜ä¸ºå…è®¸å¤šç§ç±»å‹æ—¶ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">disabled</span>: [<span class="title class_">Boolean</span>, <span class="title class_">Number</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ— è®ºå£°æ˜ç±»å‹çš„é¡ºåºå¦‚ä½•ï¼Œ<code>Boolean</code> ç±»å‹çš„ç‰¹æ®Šè½¬æ¢è§„åˆ™éƒ½ä¼šè¢«åº”ç”¨ã€‚</p><h2 id="ç»„ä»¶äº‹ä»¶"><a href="#ç»„ä»¶äº‹ä»¶" class="headerlink" title="ç»„ä»¶äº‹ä»¶"></a>ç»„ä»¶äº‹ä»¶</h2><h3 id="è§¦å‘ä¸ç›‘å¬äº‹ä»¶"><a href="#è§¦å‘ä¸ç›‘å¬äº‹ä»¶" class="headerlink" title="è§¦å‘ä¸ç›‘å¬äº‹ä»¶"></a>è§¦å‘ä¸ç›‘å¬äº‹ä»¶</h3><p>åœ¨ç»„ä»¶çš„æ¨¡æ¿è¡¨è¾¾å¼ä¸­ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ <code>$emit</code> æ–¹æ³•è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ (ä¾‹å¦‚ï¼šåœ¨ <code>v-on</code> çš„å¤„ç†å‡½æ•°ä¸­)ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- MyComponent --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;$emit(&#x27;someEvent&#x27;)&quot;</span>&gt;</span>click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>$emit()</code> æ–¹æ³•åœ¨ç»„ä»¶å®ä¾‹ä¸Šä¹ŸåŒæ ·ä»¥ <code>this.$emit()</code> çš„å½¢å¼å¯ç”¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">submit</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.$emit(<span class="string">&#x27;submit&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çˆ¶ç»„ä»¶å¯ä»¥é€šè¿‡ <code>v-on</code> (ç¼©å†™ä¸º <code>@</code>) æ¥ç›‘å¬äº‹ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;MyComponent @some-event=&quot;callback&quot; /&gt;</span><br></pre></td></tr></table></figure><p>åŒæ ·ï¼Œç»„ä»¶çš„äº‹ä»¶ç›‘å¬å™¨ä¹Ÿæ”¯æŒ <code>.once</code> ä¿®é¥°ç¬¦ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;MyComponent @some-event.once=&quot;callback&quot; /&gt;</span><br></pre></td></tr></table></figure><p>åƒç»„ä»¶ä¸ prop ä¸€æ ·ï¼Œäº‹ä»¶çš„åå­—ä¹Ÿæä¾›äº†è‡ªåŠ¨çš„æ ¼å¼è½¬æ¢ã€‚æ³¨æ„è¿™é‡Œæˆ‘ä»¬è§¦å‘äº†ä¸€ä¸ªä»¥ camelCase å½¢å¼å‘½åçš„äº‹ä»¶ï¼Œä½†åœ¨çˆ¶ç»„ä»¶ä¸­å¯ä»¥ä½¿ç”¨ kebab-case å½¢å¼æ¥ç›‘å¬ã€‚ä¸ <a href="https://cn.vuejs.org/guide/components/props.html#prop-name-casing">prop å¤§å°å†™æ ¼å¼</a>ä¸€æ ·ï¼Œåœ¨æ¨¡æ¿ä¸­æˆ‘ä»¬ä¹Ÿæ¨èä½¿ç”¨ kebab-case å½¢å¼æ¥ç¼–å†™ç›‘å¬å™¨ã€‚</p><h3 id="äº‹ä»¶å‚æ•°"><a href="#äº‹ä»¶å‚æ•°" class="headerlink" title="äº‹ä»¶å‚æ•°"></a>äº‹ä»¶å‚æ•°</h3><p>æœ‰æ—¶å€™æˆ‘ä»¬ä¼šéœ€è¦åœ¨è§¦å‘äº‹ä»¶æ—¶é™„å¸¦ä¸€ä¸ªç‰¹å®šçš„å€¼ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘ä»¬æƒ³è¦ <code>&lt;BlogPost&gt;</code> ç»„ä»¶æ¥ç®¡ç†æ–‡æœ¬ä¼šç¼©æ”¾å¾—å¤šå¤§ã€‚åœ¨è¿™ä¸ªåœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ç»™ <code>$emit</code> æä¾›ä¸€ä¸ªé¢å¤–çš„å‚æ•°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click=&quot;$emit(&#x27;increaseBy&#x27;, 1)&quot;&gt;</span><br><span class="line">  Increase by 1</span><br><span class="line">&lt;/button&gt;</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬åœ¨çˆ¶ç»„ä»¶ä¸­ç›‘å¬äº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆç®€å•å†™ä¸€ä¸ªå†…è”çš„ç®­å¤´å‡½æ•°ä½œä¸ºç›‘å¬å™¨ï¼Œæ­¤å‡½æ•°ä¼šæ¥æ”¶åˆ°äº‹ä»¶é™„å¸¦çš„å‚æ•°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;MyButton @increase-by=&quot;(n) =&gt; count += n&quot; /&gt;</span><br></pre></td></tr></table></figure><p>æˆ–è€…ï¼Œä¹Ÿå¯ä»¥ç”¨ä¸€ä¸ªç»„ä»¶æ–¹æ³•æ¥ä½œä¸ºäº‹ä»¶å¤„ç†å‡½æ•°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;MyButton @increase-by=&quot;increaseCount&quot; /&gt;</span><br></pre></td></tr></table></figure><p>è¯¥æ–¹æ³•ä¹Ÿä¼šæ¥æ”¶åˆ°äº‹ä»¶æ‰€ä¼ é€’çš„å‚æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">increaseCount</span>(<span class="params">n</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">count</span> += n</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å£°æ˜è§¦å‘çš„äº‹ä»¶"><a href="#å£°æ˜è§¦å‘çš„äº‹ä»¶" class="headerlink" title="å£°æ˜è§¦å‘çš„äº‹ä»¶"></a>å£°æ˜è§¦å‘çš„äº‹ä»¶</h3><p>ç»„ä»¶è¦è§¦å‘çš„äº‹ä»¶å¯ä»¥æ˜¾å¼åœ°é€šè¿‡ <a href="https://cn.vuejs.org/api/options-state.html#emits"><code>emits</code></a> é€‰é¡¹æ¥å£°æ˜ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">emits</span>: [<span class="string">&#x27;inFocus&#x27;</span>, <span class="string">&#x27;submit&#x27;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ª <code>emits</code> é€‰é¡¹è¿˜æ”¯æŒå¯¹è±¡è¯­æ³•ï¼Œå®ƒå…è®¸æˆ‘ä»¬å¯¹è§¦å‘äº‹ä»¶çš„å‚æ•°è¿›è¡ŒéªŒè¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">emits</span>: &#123;</span><br><span class="line">    <span class="title function_">submit</span>(<span class="params">payload</span>) &#123;</span><br><span class="line">      <span class="comment">// é€šè¿‡è¿”å›å€¼ä¸º `true` è¿˜æ˜¯ä¸º `false` æ¥åˆ¤æ–­</span></span><br><span class="line">      <span class="comment">// éªŒè¯æ˜¯å¦é€šè¿‡</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="äº‹ä»¶æ ¡éªŒ"><a href="#äº‹ä»¶æ ¡éªŒ" class="headerlink" title="äº‹ä»¶æ ¡éªŒ"></a>äº‹ä»¶æ ¡éªŒ</h3><p>å’Œå¯¹ props æ·»åŠ ç±»å‹æ ¡éªŒçš„æ–¹å¼ç±»ä¼¼ï¼Œæ‰€æœ‰è§¦å‘çš„äº‹ä»¶ä¹Ÿå¯ä»¥ä½¿ç”¨å¯¹è±¡å½¢å¼æ¥æè¿°ã€‚</p><p>è¦ä¸ºäº‹ä»¶æ·»åŠ æ ¡éªŒï¼Œé‚£ä¹ˆäº‹ä»¶å¯ä»¥è¢«èµ‹å€¼ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œæ¥å—çš„å‚æ•°å°±æ˜¯æŠ›å‡ºäº‹ä»¶æ—¶ä¼ å…¥ <code>this.$emit</code> çš„å†…å®¹ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼æ¥è¡¨æ˜äº‹ä»¶æ˜¯å¦åˆæ³•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">emits</span>: &#123;</span><br><span class="line">    <span class="comment">// æ²¡æœ‰æ ¡éªŒ</span></span><br><span class="line">    <span class="attr">click</span>: <span class="literal">null</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ ¡éªŒ submit äº‹ä»¶</span></span><br><span class="line">    <span class="attr">submit</span>: <span class="function">(<span class="params">&#123; email, password &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (email &amp;&amp; password) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&#x27;Invalid submit event payload!&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">submitForm</span>(<span class="params">email, password</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.$emit(<span class="string">&#x27;submit&#x27;</span>, &#123; email, password &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="é…åˆ-v-model-ä½¿ç”¨"><a href="#é…åˆ-v-model-ä½¿ç”¨" class="headerlink" title="é…åˆ v-model ä½¿ç”¨"></a>é…åˆ <code>v-model</code> ä½¿ç”¨</h3><p>è‡ªå®šä¹‰äº‹ä»¶å¯ä»¥ç”¨äºå¼€å‘æ”¯æŒ <code>v-model</code> çš„è‡ªå®šä¹‰è¡¨å•ç»„ä»¶ã€‚å›å¿†ä¸€ä¸‹ <code>v-model</code> åœ¨åŸç”Ÿå…ƒç´ ä¸Šçš„ç”¨æ³•ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;searchText&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç å…¶å®ç­‰ä»·äºä¸‹é¢è¿™æ®µ (ç¼–è¯‘å™¨ä¼šå¯¹ <code>v-model</code> è¿›è¡Œå±•å¼€)ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:value</span>=<span class="string">&quot;searchText&quot;</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">input</span>=<span class="string">&quot;searchText = $event.target.value&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure><p>è€Œå½“ä½¿ç”¨åœ¨ä¸€ä¸ªç»„ä»¶ä¸Šæ—¶ï¼Œ<code>v-model</code> ä¼šè¢«å±•å¼€ä¸ºå¦‚ä¸‹çš„å½¢å¼ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">CustomInput</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:modelValue</span>=<span class="string">&quot;searchText&quot;</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">update:modelValue</span>=<span class="string">&quot;newValue =&gt; searchText = newValue&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure><p>è¦è®©è¿™ä¸ªä¾‹å­å®é™…å·¥ä½œèµ·æ¥ï¼Œ<code>&lt;CustomInput&gt;</code> ç»„ä»¶å†…éƒ¨éœ€è¦åšä¸¤ä»¶äº‹ï¼š</p><ol><li>å°†å†…éƒ¨åŸç”Ÿ <code>input</code> å…ƒç´ çš„ <code>value</code> attribute ç»‘å®šåˆ° <code>modelValue</code> prop</li><li>è¾“å…¥æ–°çš„å€¼æ—¶åœ¨ <code>input</code> å…ƒç´ ä¸Šè§¦å‘ <code>update:modelValue</code> äº‹ä»¶</li></ol><p>è¿™é‡Œæ˜¯ç›¸åº”çš„ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- CustomInput.vue --&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  props: [&#x27;modelValue&#x27;],</span><br><span class="line">  emits: [&#x27;update:modelValue&#x27;]</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;input</span><br><span class="line">    :value=&quot;modelValue&quot;</span><br><span class="line">    @input=&quot;$emit(&#x27;update:modelValue&#x27;, $event.target.value)&quot;</span><br><span class="line">  /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç°åœ¨ <code>v-model</code> ä¹Ÿå¯ä»¥åœ¨è¿™ä¸ªç»„ä»¶ä¸Šæ­£å¸¸å·¥ä½œäº†ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;CustomInput v-model=&quot;searchText&quot; /&gt;</span><br></pre></td></tr></table></figure><p>å¦ä¸€ç§åœ¨ç»„ä»¶å†…å®ç° <code>v-model</code> çš„æ–¹å¼æ˜¯ä½¿ç”¨ä¸€ä¸ªå¯å†™çš„ï¼ŒåŒæ—¶å…·æœ‰ getter å’Œ setter çš„è®¡ç®—å±æ€§ã€‚<code>get</code> æ–¹æ³•éœ€è¿”å› <code>modelValue</code> propï¼Œè€Œ <code>set</code> æ–¹æ³•éœ€è§¦å‘ç›¸åº”çš„äº‹ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- CustomInput.vue --&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  props: [&#x27;modelValue&#x27;],</span><br><span class="line">  emits: [&#x27;update:modelValue&#x27;],</span><br><span class="line">  computed: &#123;</span><br><span class="line">    value: &#123;</span><br><span class="line">      get() &#123;</span><br><span class="line">        return this.modelValue</span><br><span class="line">      &#125;,</span><br><span class="line">      set(value) &#123;</span><br><span class="line">        this.$emit(&#x27;update:modelValue&#x27;, value)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;input v-model=&quot;value&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="v-model-çš„å‚æ•°"><a href="#v-model-çš„å‚æ•°" class="headerlink" title="v-model çš„å‚æ•°"></a><code>v-model</code> çš„å‚æ•°</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>v-model</code> åœ¨ç»„ä»¶ä¸Šéƒ½æ˜¯ä½¿ç”¨ <code>modelValue</code> ä½œä¸º propï¼Œå¹¶ä»¥ <code>update:modelValue</code> ä½œä¸ºå¯¹åº”çš„äº‹ä»¶ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ç»™ <code>v-model</code> æŒ‡å®šä¸€ä¸ªå‚æ•°æ¥æ›´æ”¹è¿™äº›åå­—ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">MyComponent</span> <span class="attr">v-model:title</span>=<span class="string">&quot;bookTitle&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå­ç»„ä»¶åº”å£°æ˜ä¸€ä¸ª <code>title</code> propï¼Œå¹¶é€šè¿‡è§¦å‘ <code>update:title</code> äº‹ä»¶æ›´æ–°çˆ¶ç»„ä»¶å€¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- MyComponent.vue --&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  props: [&#x27;title&#x27;],</span><br><span class="line">  emits: [&#x27;update:title&#x27;]</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;input</span><br><span class="line">    type=&quot;text&quot;</span><br><span class="line">    :value=&quot;title&quot;</span><br><span class="line">    @input=&quot;$emit(&#x27;update:title&#x27;, $event.target.value)&quot;</span><br><span class="line">  /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å¤šä¸ª-v-model-ç»‘å®š"><a href="#å¤šä¸ª-v-model-ç»‘å®š" class="headerlink" title="å¤šä¸ª v-model ç»‘å®š"></a>å¤šä¸ª <code>v-model</code> ç»‘å®š</h4><p>åˆ©ç”¨åˆšæ‰åœ¨ <a href="https://cn.vuejs.org/guide/components/events.html#v-model-arguments"><code>v-model</code> å‚æ•°</a>å°èŠ‚ä¸­å­¦åˆ°çš„æŠ€å·§ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªç»„ä»¶ä¸Šåˆ›å»ºå¤šä¸ª <code>v-model</code> åŒå‘ç»‘å®šï¼Œæ¯ä¸€ä¸ª <code>v-model</code> éƒ½ä¼šåŒæ­¥ä¸åŒçš„ propï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;UserName</span><br><span class="line">  v-model:first-name=&quot;first&quot;</span><br><span class="line">  v-model:last-name=&quot;last&quot;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    firstName: String,</span><br><span class="line">    lastName: String</span><br><span class="line">  &#125;,</span><br><span class="line">  emits: [&#x27;update:firstName&#x27;, &#x27;update:lastName&#x27;]</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;input</span><br><span class="line">    type=&quot;text&quot;</span><br><span class="line">    :value=&quot;firstName&quot;</span><br><span class="line">    @input=&quot;$emit(&#x27;update:firstName&#x27;, $event.target.value)&quot;</span><br><span class="line">  /&gt;</span><br><span class="line">  &lt;input</span><br><span class="line">    type=&quot;text&quot;</span><br><span class="line">    :value=&quot;lastName&quot;</span><br><span class="line">    @input=&quot;$emit(&#x27;update:lastName&#x27;, $event.target.value)&quot;</span><br><span class="line">  /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--APP.vue--&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import UserName from &#x27;./UserName.vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123; UserName &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      first: &#x27;John&#x27;,</span><br><span class="line">      last: &#x27;Doe&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;&#123;&#123; first &#125;&#125; &#123;&#123; last &#125;&#125;&lt;/h1&gt;</span><br><span class="line">  &lt;UserName</span><br><span class="line">    v-model:first-name=&quot;first&quot;</span><br><span class="line">    v-model:last-name=&quot;last&quot;</span><br><span class="line">  /&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h4 id="å¤„ç†-v-model-ä¿®é¥°ç¬¦"><a href="#å¤„ç†-v-model-ä¿®é¥°ç¬¦" class="headerlink" title="å¤„ç† v-model ä¿®é¥°ç¬¦"></a>å¤„ç† <code>v-model</code> ä¿®é¥°ç¬¦</h4><p>åœ¨å­¦ä¹ è¾“å…¥ç»‘å®šæ—¶ï¼Œæˆ‘ä»¬çŸ¥é“äº† <code>v-model</code> æœ‰ä¸€äº›<a href="https://cn.vuejs.org/guide/essentials/forms.html#modifiers">å†…ç½®çš„ä¿®é¥°ç¬¦</a>ï¼Œä¾‹å¦‚ <code>.trim</code>ï¼Œ<code>.number</code> å’Œ <code>.lazy</code>ã€‚åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œä½ å¯èƒ½æƒ³è¦ä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶çš„ <code>v-model</code> æ”¯æŒè‡ªå®šä¹‰çš„ä¿®é¥°ç¬¦ã€‚</p><p>æˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ä¿®é¥°ç¬¦ <code>capitalize</code>ï¼Œå®ƒä¼šè‡ªåŠ¨å°† <code>v-model</code> ç»‘å®šè¾“å…¥çš„å­—ç¬¦ä¸²å€¼ç¬¬ä¸€ä¸ªå­—æ¯è½¬ä¸ºå¤§å†™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;MyComponent v-model.capitalize=&quot;myText&quot; /&gt;</span><br></pre></td></tr></table></figure><p>ç»„ä»¶çš„ <code>v-model</code> ä¸Šæ‰€æ·»åŠ çš„ä¿®é¥°ç¬¦ï¼Œå¯ä»¥é€šè¿‡ <code>modelModifiers</code> prop åœ¨ç»„ä»¶å†…è®¿é—®åˆ°ã€‚åœ¨ä¸‹é¢çš„ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬å£°æ˜äº† <code>modelModifiers</code> è¿™ä¸ª propï¼Œå®ƒçš„é»˜è®¤å€¼æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    modelValue: String,</span><br><span class="line">    modelModifiers: &#123;</span><br><span class="line">      default: () =&gt; (&#123;&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  emits: [&#x27;update:modelValue&#x27;],</span><br><span class="line">  created() &#123;</span><br><span class="line">    console.log(this.modelModifiers) // &#123; capitalize: true &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;input</span><br><span class="line">    type=&quot;text&quot;</span><br><span class="line">    :value=&quot;modelValue&quot;</span><br><span class="line">    @input=&quot;$emit(&#x27;update:modelValue&#x27;, $event.target.value)&quot;</span><br><span class="line">  /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ³¨æ„è¿™é‡Œç»„ä»¶çš„ <code>modelModifiers</code> prop åŒ…å«äº† <code>capitalize</code> ä¸”å…¶å€¼ä¸º <code>true</code>ï¼Œå› ä¸ºå®ƒåœ¨æ¨¡æ¿ä¸­çš„ <code>v-model</code> ç»‘å®šä¸Šè¢«ä½¿ç”¨äº†ã€‚</p><p>æœ‰äº† <code>modelModifiers</code> è¿™ä¸ª propï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨åŸç”Ÿäº‹ä»¶ä¾¦å¬å‡½æ•°ä¸­æ£€æŸ¥å®ƒçš„å€¼ï¼Œç„¶åå†³å®šè§¦å‘çš„è‡ªå®šä¹‰äº‹ä»¶ä¸­è¦å‘çˆ¶ç»„ä»¶ä¼ é€’ä»€ä¹ˆå€¼ã€‚åœ¨ä¸‹é¢çš„ä»£ç é‡Œï¼Œæˆ‘ä»¬å°±æ˜¯åœ¨æ¯æ¬¡ <code>&lt;input&gt;</code> å…ƒç´ è§¦å‘ <code>input</code> äº‹ä»¶æ—¶å°†å€¼çš„é¦–å­—æ¯å¤§å†™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    modelValue: String,</span><br><span class="line">    modelModifiers: &#123;</span><br><span class="line">      default: () =&gt; (&#123;&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  emits: [&#x27;update:modelValue&#x27;],</span><br><span class="line">  methods: &#123;</span><br><span class="line">    emitValue(e) &#123;</span><br><span class="line">      let value = e.target.value</span><br><span class="line">      if (this.modelModifiers.capitalize) &#123;</span><br><span class="line">        value = value.charAt(0).toUpperCase() + value.slice(1)</span><br><span class="line">      &#125;</span><br><span class="line">      this.$emit(&#x27;update:modelValue&#x27;, value)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;input type=&quot;text&quot; :value=&quot;modelValue&quot; @input=&quot;emitValue&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯¹äºåˆæœ‰å‚æ•°åˆæœ‰ä¿®é¥°ç¬¦çš„ <code>v-model</code> ç»‘å®šï¼Œç”Ÿæˆçš„ prop åå°†æ˜¯ <code>arg + &quot;Modifiers&quot;</code>ã€‚ä¸¾ä¾‹æ¥è¯´ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">MyComponent</span> <span class="attr">v-model:title.capitalize</span>=<span class="string">&quot;myText&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç›¸åº”çš„å£°æ˜åº”è¯¥æ˜¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">props</span>: [<span class="string">&#x27;title&#x27;</span>, <span class="string">&#x27;titleModifiers&#x27;</span>],</span><br><span class="line">  <span class="attr">emits</span>: [<span class="string">&#x27;update:title&#x27;</span>],</span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">titleModifiers</span>) <span class="comment">// &#123; capitalize: true &#125;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="Attributes-ç»§æ‰¿"><a href="#Attributes-ç»§æ‰¿" class="headerlink" title="Attributes ç»§æ‰¿"></a>Attributes ç»§æ‰¿</h2><p>â€œé€ä¼  attributeâ€æŒ‡çš„æ˜¯ä¼ é€’ç»™ä¸€ä¸ªç»„ä»¶ï¼Œå´æ²¡æœ‰è¢«è¯¥ç»„ä»¶å£°æ˜ä¸º <a href="https://cn.vuejs.org/guide/components/props.html">props</a> æˆ– <a href="https://cn.vuejs.org/guide/components/events.html#defining-custom-events">emits</a> çš„ attribute æˆ–è€… <code>v-on</code> äº‹ä»¶ç›‘å¬å™¨ã€‚æœ€å¸¸è§çš„ä¾‹å­å°±æ˜¯ <code>class</code>ã€<code>style</code> å’Œ <code>id</code>ã€‚</p><p>å½“ä¸€ä¸ªç»„ä»¶ä»¥å•ä¸ªå…ƒç´ ä¸ºæ ¹ä½œæ¸²æŸ“æ—¶ï¼Œé€ä¼ çš„ attribute ä¼šè‡ªåŠ¨è¢«æ·»åŠ åˆ°æ ¹å…ƒç´ ä¸Šã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå‡å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ª <code>&lt;MyButton&gt;</code> ç»„ä»¶ï¼Œå®ƒçš„æ¨¡æ¿é•¿è¿™æ ·ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- &lt;MyButton&gt; çš„æ¨¡æ¿ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªçˆ¶ç»„ä»¶ä½¿ç”¨äº†è¿™ä¸ªç»„ä»¶ï¼Œå¹¶ä¸”ä¼ å…¥äº† <code>class</code>ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">MyButton</span> <span class="attr">class</span>=<span class="string">&quot;large&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>æœ€åæ¸²æŸ“å‡ºçš„ DOM ç»“æœæ˜¯ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;large&quot;</span>&gt;</span>click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œï¼Œ<code>&lt;MyButton&gt;</code> å¹¶æ²¡æœ‰å°† <code>class</code> å£°æ˜ä¸ºä¸€ä¸ªå®ƒæ‰€æ¥å—çš„ propï¼Œæ‰€ä»¥ <code>class</code> è¢«è§†ä½œé€ä¼  attributeï¼Œè‡ªåŠ¨é€ä¼ åˆ°äº† <code>&lt;MyButton&gt;</code> çš„æ ¹å…ƒç´ ä¸Šã€‚</p><h3 id="å¯¹-class-å’Œ-style-çš„åˆå¹¶"><a href="#å¯¹-class-å’Œ-style-çš„åˆå¹¶" class="headerlink" title="å¯¹ class å’Œ style çš„åˆå¹¶"></a>å¯¹ <code>class</code> å’Œ <code>style</code> çš„åˆå¹¶</h3><p>å¦‚æœä¸€ä¸ªå­ç»„ä»¶çš„æ ¹å…ƒç´ å·²ç»æœ‰äº† <code>class</code> æˆ– <code>style</code> attributeï¼Œå®ƒä¼šå’Œä»çˆ¶ç»„ä»¶ä¸Šç»§æ‰¿çš„å€¼åˆå¹¶ã€‚å¦‚æœæˆ‘ä»¬å°†ä¹‹å‰çš„ <code>&lt;MyButton&gt;</code> ç»„ä»¶çš„æ¨¡æ¿æ”¹æˆè¿™æ ·ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- &lt;MyButton&gt; çš„æ¨¡æ¿ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ™æœ€åæ¸²æŸ“å‡ºçš„ DOM ç»“æœä¼šå˜æˆï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn large&quot;</span>&gt;</span>click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="v-on-ç›‘å¬å™¨ç»§æ‰¿"><a href="#v-on-ç›‘å¬å™¨ç»§æ‰¿" class="headerlink" title="v-on ç›‘å¬å™¨ç»§æ‰¿"></a><code>v-on</code> ç›‘å¬å™¨ç»§æ‰¿</h3><p>åŒæ ·çš„è§„åˆ™ä¹Ÿé€‚ç”¨äº <code>v-on</code> äº‹ä»¶ç›‘å¬å™¨ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">MyButton</span> @<span class="attr">click</span>=<span class="string">&quot;onClick&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p><code>click</code> ç›‘å¬å™¨ä¼šè¢«æ·»åŠ åˆ° <code>&lt;MyButton&gt;</code> çš„æ ¹å…ƒç´ ï¼Œå³é‚£ä¸ªåŸç”Ÿçš„ <code>&lt;button&gt;</code> å…ƒç´ ä¹‹ä¸Šã€‚å½“åŸç”Ÿçš„ <code>&lt;button&gt;</code> è¢«ç‚¹å‡»ï¼Œä¼šè§¦å‘çˆ¶ç»„ä»¶çš„ <code>onClick</code> æ–¹æ³•ã€‚åŒæ ·çš„ï¼Œå¦‚æœåŸç”Ÿ <code>button</code> å…ƒç´ è‡ªèº«ä¹Ÿé€šè¿‡ <code>v-on</code> ç»‘å®šäº†ä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨ï¼Œåˆ™è¿™ä¸ªç›‘å¬å™¨å’Œä»çˆ¶ç»„ä»¶ç»§æ‰¿çš„ç›‘å¬å™¨éƒ½ä¼šè¢«è§¦å‘ã€‚</p><h3 id="æ·±å±‚ç»„ä»¶ç»§æ‰¿"><a href="#æ·±å±‚ç»„ä»¶ç»§æ‰¿" class="headerlink" title="æ·±å±‚ç»„ä»¶ç»§æ‰¿"></a>æ·±å±‚ç»„ä»¶ç»§æ‰¿</h3><p>æœ‰äº›æƒ…å†µä¸‹ä¸€ä¸ªç»„ä»¶ä¼šåœ¨æ ¹èŠ‚ç‚¹ä¸Šæ¸²æŸ“å¦ä¸€ä¸ªç»„ä»¶ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬é‡æ„ä¸€ä¸‹ <code>&lt;MyButton&gt;</code>ï¼Œè®©å®ƒåœ¨æ ¹èŠ‚ç‚¹ä¸Šæ¸²æŸ“ <code>&lt;BaseButton&gt;</code>ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- &lt;MyButton/&gt; çš„æ¨¡æ¿ï¼Œåªæ˜¯æ¸²æŸ“å¦ä¸€ä¸ªç»„ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">BaseButton</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ <code>&lt;MyButton&gt;</code> æ¥æ”¶çš„é€ä¼  attribute ä¼šç›´æ¥ç»§ç»­ä¼ ç»™ <code>&lt;BaseButton&gt;</code>ã€‚</p><p>è¯·æ³¨æ„ï¼š</p><ol><li>é€ä¼ çš„ attribute ä¸ä¼šåŒ…å« <code>&lt;MyButton&gt;</code> ä¸Šå£°æ˜è¿‡çš„ props æˆ–æ˜¯é’ˆå¯¹ <code>emits</code> å£°æ˜äº‹ä»¶çš„ <code>v-on</code> ä¾¦å¬å‡½æ•°ï¼Œæ¢å¥è¯è¯´ï¼Œå£°æ˜è¿‡çš„ props å’Œä¾¦å¬å‡½æ•°è¢« <code>&lt;MyButton&gt;</code>â€œæ¶ˆè´¹â€äº†ã€‚</li><li>é€ä¼ çš„ attribute è‹¥ç¬¦åˆå£°æ˜ï¼Œä¹Ÿå¯ä»¥ä½œä¸º props ä¼ å…¥ <code>&lt;BaseButton&gt;</code>ã€‚</li></ol><h3 id="ç¦ç”¨-Attributes-ç»§æ‰¿"><a href="#ç¦ç”¨-Attributes-ç»§æ‰¿" class="headerlink" title="ç¦ç”¨ Attributes ç»§æ‰¿"></a>ç¦ç”¨ Attributes ç»§æ‰¿</h3><p>å¦‚æœä½ <strong>ä¸æƒ³è¦</strong>ä¸€ä¸ªç»„ä»¶è‡ªåŠ¨åœ°ç»§æ‰¿ attributeï¼Œä½ å¯ä»¥åœ¨ç»„ä»¶é€‰é¡¹ä¸­è®¾ç½® <code>inheritAttrs: false</code>ã€‚</p><p>æœ€å¸¸è§çš„éœ€è¦ç¦ç”¨ attribute ç»§æ‰¿çš„åœºæ™¯å°±æ˜¯ attribute éœ€è¦åº”ç”¨åœ¨æ ¹èŠ‚ç‚¹ä»¥å¤–çš„å…¶ä»–å…ƒç´ ä¸Šã€‚é€šè¿‡è®¾ç½® <code>inheritAttrs</code> é€‰é¡¹ä¸º <code>false</code>ï¼Œä½ å¯ä»¥å®Œå…¨æ§åˆ¶é€ä¼ è¿›æ¥çš„ attribute è¢«å¦‚ä½•ä½¿ç”¨ã€‚</p><p>è¿™äº›é€ä¼ è¿›æ¥çš„ attribute å¯ä»¥åœ¨æ¨¡æ¿çš„è¡¨è¾¾å¼ä¸­ç›´æ¥ç”¨ <code>$attrs</code> è®¿é—®åˆ°ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>Fallthrough attribute: &#123;&#123; $attrs &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ª <code>$attrs</code> å¯¹è±¡åŒ…å«äº†é™¤ç»„ä»¶æ‰€å£°æ˜çš„ <code>props</code> å’Œ <code>emits</code> ä¹‹å¤–çš„æ‰€æœ‰å…¶ä»– attributeï¼Œä¾‹å¦‚ <code>class</code>ï¼Œ<code>style</code>ï¼Œ<code>v-on</code> ç›‘å¬å™¨ç­‰ç­‰ã€‚</p><p>æœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š</p><ul><li>å’Œ props æœ‰æ‰€ä¸åŒï¼Œé€ä¼  attributes åœ¨ JavaScript ä¸­ä¿ç•™äº†å®ƒä»¬åŸå§‹çš„å¤§å°å†™ï¼Œæ‰€ä»¥åƒ <code>foo-bar</code> è¿™æ ·çš„ä¸€ä¸ª attribute éœ€è¦é€šè¿‡ <code>$attrs[&#39;foo-bar&#39;]</code> æ¥è®¿é—®ã€‚</li><li>åƒ <code>@click</code> è¿™æ ·çš„ä¸€ä¸ª <code>v-on</code> äº‹ä»¶ç›‘å¬å™¨å°†åœ¨æ­¤å¯¹è±¡ä¸‹è¢«æš´éœ²ä¸ºä¸€ä¸ªå‡½æ•° <code>$attrs.onClick</code>ã€‚</li></ul><p>ç°åœ¨æˆ‘ä»¬è¦å†æ¬¡ä½¿ç”¨ä¸€ä¸‹<a href="https://cn.vuejs.org/guide/components/attrs.html#attribute-inheritance">ä¹‹å‰å°èŠ‚</a>ä¸­çš„ <code>&lt;MyButton&gt;</code> ç»„ä»¶ä¾‹å­ã€‚æœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½ä¸ºäº†æ ·å¼ï¼Œéœ€è¦åœ¨ <code>&lt;button&gt;</code> å…ƒç´ å¤–åŒ…è£…ä¸€å±‚ <code>&lt;div&gt;</code>ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btn-wrapper&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æƒ³è¦æ‰€æœ‰åƒ <code>class</code> å’Œ <code>v-on</code> ç›‘å¬å™¨è¿™æ ·çš„é€ä¼  attribute éƒ½åº”ç”¨åœ¨å†…éƒ¨çš„ <code>&lt;button&gt;</code> ä¸Šè€Œä¸æ˜¯å¤–å±‚çš„ <code>&lt;div&gt;</code> ä¸Šã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾å®š <code>inheritAttrs: false</code> å’Œä½¿ç”¨ <code>v-bind=&quot;$attrs&quot;</code> æ¥å®ç°ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btn-wrapper&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span> <span class="attr">v-bind</span>=<span class="string">&quot;$attrs&quot;</span>&gt;</span>click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å°æç¤ºï¼š<a href="https://cn.vuejs.org/guide/essentials/template-syntax.html#dynamically-binding-multiple-attributes">æ²¡æœ‰å‚æ•°çš„ <code>v-bind</code></a> ä¼šå°†ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§éƒ½ä½œä¸º attribute åº”ç”¨åˆ°ç›®æ ‡å…ƒç´ ä¸Šã€‚</p><h3 id="å¤šæ ¹èŠ‚ç‚¹çš„-Attributes-ç»§æ‰¿"><a href="#å¤šæ ¹èŠ‚ç‚¹çš„-Attributes-ç»§æ‰¿" class="headerlink" title="å¤šæ ¹èŠ‚ç‚¹çš„ Attributes ç»§æ‰¿"></a>å¤šæ ¹èŠ‚ç‚¹çš„ Attributes ç»§æ‰¿</h3><p>å’Œå•æ ¹èŠ‚ç‚¹ç»„ä»¶æœ‰æ‰€ä¸åŒï¼Œæœ‰ç€å¤šä¸ªæ ¹èŠ‚ç‚¹çš„ç»„ä»¶æ²¡æœ‰è‡ªåŠ¨ attribute é€ä¼ è¡Œä¸ºã€‚å¦‚æœ <code>$attrs</code> æ²¡æœ‰è¢«æ˜¾å¼ç»‘å®šï¼Œå°†ä¼šæŠ›å‡ºä¸€ä¸ªè¿è¡Œæ—¶è­¦å‘Šã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">CustomLayout</span> <span class="attr">id</span>=<span class="string">&quot;custom-layout&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeValue&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœ <code>&lt;CustomLayout&gt;</code> æœ‰ä¸‹é¢è¿™æ ·çš„å¤šæ ¹èŠ‚ç‚¹æ¨¡æ¿ï¼Œç”±äº Vue ä¸çŸ¥é“è¦å°† attribute é€ä¼ åˆ°å“ªé‡Œï¼Œæ‰€ä»¥ä¼šæŠ›å‡ºä¸€ä¸ªè­¦å‘Šã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span>...<span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">main</span>&gt;</span>...<span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span>...<span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœ <code>$attrs</code> è¢«æ˜¾å¼ç»‘å®šï¼Œåˆ™ä¸ä¼šæœ‰è­¦å‘Šï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span>...<span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">main</span> <span class="attr">v-bind</span>=<span class="string">&quot;$attrs&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span>...<span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="åœ¨-JavaScript-ä¸­è®¿é—®é€ä¼ -Attributes"><a href="#åœ¨-JavaScript-ä¸­è®¿é—®é€ä¼ -Attributes" class="headerlink" title="åœ¨ JavaScript ä¸­è®¿é—®é€ä¼  Attributes"></a>åœ¨ JavaScript ä¸­è®¿é—®é€ä¼  Attributes</h3><p>å¦‚æœéœ€è¦ï¼Œä½ å¯ä»¥é€šè¿‡ <code>$attrs</code> è¿™ä¸ªå®ä¾‹å±æ€§æ¥è®¿é—®ç»„ä»¶çš„æ‰€æœ‰é€ä¼  attributeï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$attrs</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ’æ§½-Slots"><a href="#æ’æ§½-Slots" class="headerlink" title="æ’æ§½ Slots"></a>æ’æ§½ Slots</h2><h3 id="æ’æ§½å†…å®¹ä¸å‡ºå£"><a href="#æ’æ§½å†…å®¹ä¸å‡ºå£" class="headerlink" title="æ’æ§½å†…å®¹ä¸å‡ºå£"></a>æ’æ§½å†…å®¹ä¸å‡ºå£</h3><p>åœ¨ä¹‹å‰çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å·²ç»äº†è§£åˆ°ç»„ä»¶èƒ½å¤Ÿæ¥æ”¶ä»»æ„ç±»å‹çš„ JavaScript å€¼ä½œä¸º propsï¼Œä½†ç»„ä»¶è¦å¦‚ä½•æ¥æ”¶æ¨¡æ¿å†…å®¹å‘¢ï¼Ÿåœ¨æŸäº›åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½æƒ³è¦ä¸ºå­ç»„ä»¶ä¼ é€’ä¸€äº›æ¨¡æ¿ç‰‡æ®µï¼Œè®©å­ç»„ä»¶åœ¨å®ƒä»¬çš„ç»„ä»¶ä¸­æ¸²æŸ“è¿™äº›ç‰‡æ®µã€‚</p><p>ä¸¾ä¾‹æ¥è¯´ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ª <code>&lt;FancyButton&gt;</code> ç»„ä»¶ï¼Œå¯ä»¥åƒè¿™æ ·ä½¿ç”¨ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">FancyButton</span>&gt;</span></span><br><span class="line">  Click me! <span class="comment">&lt;!-- æ’æ§½å†…å®¹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">FancyButton</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è€Œ <code>&lt;FancyButton&gt;</code> çš„æ¨¡æ¿æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;fancy-btn&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span> <span class="comment">&lt;!-- æ’æ§½å‡ºå£ --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>&lt;slot&gt;</code> å…ƒç´ æ˜¯ä¸€ä¸ª<strong>æ’æ§½å‡ºå£</strong> (slot outlet)ï¼Œæ ‡ç¤ºäº†çˆ¶å…ƒç´ æä¾›çš„<strong>æ’æ§½å†…å®¹</strong> (slot content) å°†åœ¨å“ªé‡Œè¢«æ¸²æŸ“ã€‚</p><p>æœ€ç»ˆæ¸²æŸ“å‡ºçš„ DOM æ˜¯è¿™æ ·ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;fancy-btn&quot;</span>&gt;</span>Click me!<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡ä½¿ç”¨æ’æ§½ï¼Œ<code>&lt;FancyButton&gt;</code> ä»…è´Ÿè´£æ¸²æŸ“å¤–å±‚çš„ <code>&lt;button&gt;</code> (ä»¥åŠç›¸åº”çš„æ ·å¼)ï¼Œè€Œå…¶å†…éƒ¨çš„å†…å®¹ç”±çˆ¶ç»„ä»¶æä¾›ã€‚</p><p>ç†è§£æ’æ§½çš„å¦ä¸€ç§æ–¹å¼æ˜¯å’Œä¸‹é¢çš„ JavaScript å‡½æ•°ä½œç±»æ¯”ï¼Œå…¶æ¦‚å¿µæ˜¯ç±»ä¼¼çš„ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çˆ¶å…ƒç´ ä¼ å…¥æ’æ§½å†…å®¹</span></span><br><span class="line"><span class="title class_">FancyButton</span>(<span class="string">&#x27;Click me!&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// FancyButton åœ¨è‡ªå·±çš„æ¨¡æ¿ä¸­æ¸²æŸ“æ’æ§½å†…å®¹</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">FancyButton</span>(<span class="params">slotContent</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`&lt;button class=&quot;fancy-btn&quot;&gt;</span></span><br><span class="line"><span class="string">      <span class="subst">$&#123;slotContent&#125;</span></span></span><br><span class="line"><span class="string">    &lt;/button&gt;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ’æ§½å†…å®¹å¯ä»¥æ˜¯ä»»æ„åˆæ³•çš„æ¨¡æ¿å†…å®¹ï¼Œä¸å±€é™äºæ–‡æœ¬ã€‚ä¾‹å¦‚æˆ‘ä»¬å¯ä»¥ä¼ å…¥å¤šä¸ªå…ƒç´ ï¼Œç”šè‡³æ˜¯ç»„ä»¶ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">FancyButton</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color:red&quot;</span>&gt;</span>Click me!<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">AwesomeIcon</span> <span class="attr">name</span>=<span class="string">&quot;plus&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">FancyButton</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡ä½¿ç”¨æ’æ§½ï¼Œ<code>&lt;FancyButton&gt;</code> ç»„ä»¶æ›´åŠ çµæ´»å’Œå…·æœ‰å¯å¤ç”¨æ€§ã€‚ç°åœ¨ç»„ä»¶å¯ä»¥ç”¨åœ¨ä¸åŒçš„åœ°æ–¹æ¸²æŸ“å„å¼‚çš„å†…å®¹ï¼Œä½†åŒæ—¶è¿˜ä¿è¯éƒ½å…·æœ‰ç›¸åŒçš„æ ·å¼ã€‚</p><p>Vue ç»„ä»¶çš„æ’æ§½æœºåˆ¶æ˜¯å—<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/slot">åŸç”Ÿ Web Component &#96;&#96; å…ƒç´ </a>çš„å¯å‘è€Œè¯ç”Ÿï¼ŒåŒæ—¶è¿˜åšäº†ä¸€äº›åŠŸèƒ½æ‹“å±•ï¼Œè¿™äº›æ‹“å±•çš„åŠŸèƒ½æˆ‘ä»¬åé¢ä¼šå­¦ä¹ åˆ°ã€‚</p><h3 id="æ¸²æŸ“ä½œç”¨åŸŸ"><a href="#æ¸²æŸ“ä½œç”¨åŸŸ" class="headerlink" title="æ¸²æŸ“ä½œç”¨åŸŸ"></a>æ¸²æŸ“ä½œç”¨åŸŸ</h3><p>æ’æ§½å†…å®¹å¯ä»¥è®¿é—®åˆ°çˆ¶ç»„ä»¶çš„æ•°æ®ä½œç”¨åŸŸï¼Œå› ä¸ºæ’æ§½å†…å®¹æœ¬èº«æ˜¯åœ¨çˆ¶ç»„ä»¶æ¨¡æ¿ä¸­å®šä¹‰çš„ã€‚ä¸¾ä¾‹æ¥è¯´ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">FancyButton</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">FancyButton</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„ä¸¤ä¸ª <code>&#123;&#123; message &#125;&#125;</code> æ’å€¼è¡¨è¾¾å¼æ¸²æŸ“çš„å†…å®¹éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><p>æ’æ§½å†…å®¹<strong>æ— æ³•è®¿é—®</strong>å­ç»„ä»¶çš„æ•°æ®ã€‚Vue æ¨¡æ¿ä¸­çš„è¡¨è¾¾å¼åªèƒ½è®¿é—®å…¶å®šä¹‰æ—¶æ‰€å¤„çš„ä½œç”¨åŸŸï¼Œè¿™å’Œ JavaScript çš„è¯æ³•ä½œç”¨åŸŸè§„åˆ™æ˜¯ä¸€è‡´çš„ã€‚æ¢è¨€ä¹‹ï¼š</p><p><code>çˆ¶ç»„ä»¶æ¨¡æ¿ä¸­çš„è¡¨è¾¾å¼åªèƒ½è®¿é—®çˆ¶ç»„ä»¶çš„ä½œç”¨åŸŸï¼›å­ç»„ä»¶æ¨¡æ¿ä¸­çš„è¡¨è¾¾å¼åªèƒ½è®¿é—®å­ç»„ä»¶çš„ä½œç”¨åŸŸã€‚</code></p><h3 id="é»˜è®¤å†…å®¹"><a href="#é»˜è®¤å†…å®¹" class="headerlink" title="é»˜è®¤å†…å®¹"></a>é»˜è®¤å†…å®¹</h3><p>åœ¨å¤–éƒ¨æ²¡æœ‰æä¾›ä»»ä½•å†…å®¹çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä¸ºæ’æ§½æŒ‡å®šé»˜è®¤å†…å®¹ã€‚æ¯”å¦‚æœ‰è¿™æ ·ä¸€ä¸ª <code>&lt;SubmitButton&gt;</code> ç»„ä»¶ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬æƒ³åœ¨çˆ¶ç»„ä»¶æ²¡æœ‰æä¾›ä»»ä½•æ’æ§½å†…å®¹æ—¶åœ¨ <code>&lt;button&gt;</code> å†…æ¸²æŸ“â€œSubmitâ€ï¼Œåªéœ€è¦å°†â€œSubmitâ€å†™åœ¨ <code>&lt;slot&gt;</code> æ ‡ç­¾ä¹‹é—´æ¥ä½œä¸ºé»˜è®¤å†…å®¹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">slot</span>&gt;</span></span><br><span class="line">    Submit <span class="comment">&lt;!-- é»˜è®¤å†…å®¹ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œå½“æˆ‘ä»¬åœ¨çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨ <code>&lt;SubmitButton&gt;</code> ä¸”æ²¡æœ‰æä¾›ä»»ä½•æ’æ§½å†…å®¹æ—¶ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">SubmitButton</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>â€œSubmitâ€å°†ä¼šè¢«ä½œä¸ºé»˜è®¤å†…å®¹æ¸²æŸ“ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>Submit<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä½†å¦‚æœæˆ‘ä»¬æä¾›äº†æ’æ§½å†…å®¹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">SubmitButton</span>&gt;</span>Save<span class="tag">&lt;/<span class="name">SubmitButton</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆè¢«æ˜¾å¼æä¾›çš„å†…å®¹ä¼šå–ä»£é»˜è®¤å†…å®¹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>Save<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å…·åæ’æ§½"><a href="#å…·åæ’æ§½" class="headerlink" title="å…·åæ’æ§½"></a>å…·åæ’æ§½</h3><p>æœ‰æ—¶åœ¨ä¸€ä¸ªç»„ä»¶ä¸­åŒ…å«å¤šä¸ªæ’æ§½å‡ºå£æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œåœ¨ä¸€ä¸ª <code>&lt;BaseLayout&gt;</code> ç»„ä»¶ä¸­ï¼Œæœ‰å¦‚ä¸‹æ¨¡æ¿ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ ‡é¢˜å†…å®¹æ”¾è¿™é‡Œ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä¸»è¦å†…å®¹æ”¾è¿™é‡Œ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åº•éƒ¨å†…å®¹æ”¾è¿™é‡Œ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯¹äºè¿™ç§åœºæ™¯ï¼Œ<code>&lt;slot&gt;</code> å…ƒç´ å¯ä»¥æœ‰ä¸€ä¸ªç‰¹æ®Šçš„ attribute <code>name</code>ï¼Œç”¨æ¥ç»™å„ä¸ªæ’æ§½åˆ†é…å”¯ä¸€çš„ IDï¼Œä»¥ç¡®å®šæ¯ä¸€å¤„è¦æ¸²æŸ“çš„å†…å®¹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;header&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;footer&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™ç±»å¸¦ <code>name</code> çš„æ’æ§½è¢«ç§°ä¸ºå…·åæ’æ§½ (named slots)ã€‚æ²¡æœ‰æä¾› <code>name</code> çš„ <code>&lt;slot&gt;</code> å‡ºå£ä¼šéšå¼åœ°å‘½åä¸ºâ€œdefaultâ€ã€‚</p><p>åœ¨çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨ <code>&lt;BaseLayout&gt;</code> æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹å¼å°†å¤šä¸ªæ’æ§½å†…å®¹ä¼ å…¥åˆ°å„è‡ªç›®æ ‡æ’æ§½çš„å‡ºå£ã€‚æ­¤æ—¶å°±éœ€è¦ç”¨åˆ°<strong>å…·åæ’æ§½</strong>äº†ï¼š</p><p>è¦ä¸ºå…·åæ’æ§½ä¼ å…¥å†…å®¹ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸€ä¸ªå« <code>v-slot</code> æŒ‡ä»¤çš„ <code>&lt;template&gt;</code> å…ƒç´ ï¼Œå¹¶å°†ç›®æ ‡æ’æ§½çš„åå­—ä¼ ç»™è¯¥æŒ‡ä»¤ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">BaseLayout</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:header</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- header æ’æ§½çš„å†…å®¹æ”¾è¿™é‡Œ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">BaseLayout</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>v-slot</code> æœ‰å¯¹åº”çš„ç®€å†™ <code>#</code>ï¼Œå› æ­¤ <code>&lt;template v-slot:header&gt;</code> å¯ä»¥ç®€å†™ä¸º <code>&lt;template #header&gt;</code>ã€‚å…¶æ„æ€å°±æ˜¯â€œå°†è¿™éƒ¨åˆ†æ¨¡æ¿ç‰‡æ®µä¼ å…¥å­ç»„ä»¶çš„ header æ’æ§½ä¸­â€ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬ç»™å‡ºå®Œæ•´çš„ã€å‘ <code>&lt;BaseLayout&gt;</code> ä¼ é€’æ’æ§½å†…å®¹çš„ä»£ç ï¼ŒæŒ‡ä»¤å‡ä½¿ç”¨çš„æ˜¯ç¼©å†™å½¢å¼ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">BaseLayout</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Here might be a page title<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">default</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>A paragraph for the main content.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>And another one.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Here&#x27;s some contact info<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">BaseLayout</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å½“ä¸€ä¸ªç»„ä»¶åŒæ—¶æ¥æ”¶é»˜è®¤æ’æ§½å’Œå…·åæ’æ§½æ—¶ï¼Œæ‰€æœ‰ä½äºé¡¶çº§çš„é <code>&lt;template&gt;</code> èŠ‚ç‚¹éƒ½è¢«éšå¼åœ°è§†ä¸ºé»˜è®¤æ’æ§½çš„å†…å®¹ã€‚æ‰€ä»¥ä¸Šé¢ä¹Ÿå¯ä»¥å†™æˆï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">BaseLayout</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Here might be a page title<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- éšå¼çš„é»˜è®¤æ’æ§½ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>A paragraph for the main content.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>And another one.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Here&#x27;s some contact info<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">BaseLayout</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç°åœ¨ <code>&lt;template&gt;</code> å…ƒç´ ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½å°†è¢«ä¼ é€’åˆ°ç›¸åº”çš„æ’æ§½ã€‚æœ€ç»ˆæ¸²æŸ“å‡ºçš„ HTML å¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Here might be a page title<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>A paragraph for the main content.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>And another one.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Here&#x27;s some contact info<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ JavaScript å‡½æ•°æ¥ç±»æ¯”å¯èƒ½æ›´æœ‰åŠ©äºä½ æ¥ç†è§£å…·åæ’æ§½ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¼ å…¥ä¸åŒçš„å†…å®¹ç»™ä¸åŒåå­—çš„æ’æ§½</span></span><br><span class="line"><span class="title class_">BaseLayout</span>(&#123;</span><br><span class="line">  <span class="attr">header</span>: <span class="string">`...`</span>,</span><br><span class="line">  <span class="attr">default</span>: <span class="string">`...`</span>,</span><br><span class="line">  <span class="attr">footer</span>: <span class="string">`...`</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// &lt;BaseLayout&gt; æ¸²æŸ“æ’æ§½å†…å®¹åˆ°å¯¹åº”ä½ç½®</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">BaseLayout</span>(<span class="params">slots</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`&lt;div class=&quot;container&quot;&gt;</span></span><br><span class="line"><span class="string">      &lt;header&gt;<span class="subst">$&#123;slots.header&#125;</span>&lt;/header&gt;</span></span><br><span class="line"><span class="string">      &lt;main&gt;<span class="subst">$&#123;slots.<span class="keyword">default</span>&#125;</span>&lt;/main&gt;</span></span><br><span class="line"><span class="string">      &lt;footer&gt;<span class="subst">$&#123;slots.footer&#125;</span>&lt;/footer&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="åŠ¨æ€æ’æ§½å"><a href="#åŠ¨æ€æ’æ§½å" class="headerlink" title="åŠ¨æ€æ’æ§½å"></a>åŠ¨æ€æ’æ§½å</h3><p><a href="https://cn.vuejs.org/guide/essentials/template-syntax.html#dynamic-arguments">åŠ¨æ€æŒ‡ä»¤å‚æ•°</a>åœ¨ <code>v-slot</code> ä¸Šä¹Ÿæ˜¯æœ‰æ•ˆçš„ï¼Œå³å¯ä»¥å®šä¹‰ä¸‹é¢è¿™æ ·çš„åŠ¨æ€æ’æ§½åï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">base-layout</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:</span>[<span class="attr">dynamicSlotName</span>]&gt;</span></span><br><span class="line">    ...</span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- ç¼©å†™ä¸º --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #[<span class="attr">dynamicSlotName</span>]&gt;</span>  </span><br><span class="line">    ...</span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">base-layout</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„è¿™é‡Œçš„è¡¨è¾¾å¼å’ŒåŠ¨æ€æŒ‡ä»¤å‚æ•°å—ç›¸åŒçš„<a href="https://cn.vuejs.org/guide/essentials/template-syntax.html#directives">è¯­æ³•é™åˆ¶</a>ã€‚</p><h3 id="ä½œç”¨åŸŸæ’æ§½"><a href="#ä½œç”¨åŸŸæ’æ§½" class="headerlink" title="ä½œç”¨åŸŸæ’æ§½"></a>ä½œç”¨åŸŸæ’æ§½</h3><p>åœ¨ä¸Šé¢çš„<a href="https://cn.vuejs.org/guide/components/slots.html#render-scope">æ¸²æŸ“ä½œç”¨åŸŸ</a>ä¸­æˆ‘ä»¬è®¨è®ºåˆ°ï¼Œæ’æ§½çš„å†…å®¹æ— æ³•è®¿é—®åˆ°å­ç»„ä»¶çš„çŠ¶æ€ã€‚</p><p>ç„¶è€Œåœ¨æŸäº›åœºæ™¯ä¸‹æ’æ§½çš„å†…å®¹å¯èƒ½æƒ³è¦åŒæ—¶ä½¿ç”¨çˆ¶ç»„ä»¶åŸŸå†…å’Œå­ç»„ä»¶åŸŸå†…çš„æ•°æ®ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•æ¥è®©å­ç»„ä»¶åœ¨æ¸²æŸ“æ—¶å°†ä¸€éƒ¨åˆ†æ•°æ®æä¾›ç»™æ’æ§½ã€‚</p><p>æˆ‘ä»¬ä¹Ÿç¡®å®æœ‰åŠæ³•è¿™ä¹ˆåšï¼å¯ä»¥åƒå¯¹ç»„ä»¶ä¼ é€’ props é‚£æ ·ï¼Œå‘ä¸€ä¸ªæ’æ§½çš„å‡ºå£ä¸Šä¼ é€’ attributesï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- &lt;MyComponent&gt; çš„æ¨¡æ¿ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">slot</span> <span class="attr">:text</span>=<span class="string">&quot;greetingMessage&quot;</span> <span class="attr">:count</span>=<span class="string">&quot;1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å½“éœ€è¦æ¥æ”¶æ’æ§½ props æ—¶ï¼Œé»˜è®¤æ’æ§½å’Œå…·åæ’æ§½çš„ä½¿ç”¨æ–¹å¼æœ‰ä¸€äº›å°åŒºåˆ«ã€‚ä¸‹é¢æˆ‘ä»¬å°†å…ˆå±•ç¤ºé»˜è®¤æ’æ§½å¦‚ä½•æ¥å— propsï¼Œé€šè¿‡å­ç»„ä»¶æ ‡ç­¾ä¸Šçš„ <code>v-slot</code> æŒ‡ä»¤ï¼Œç›´æ¥æ¥æ”¶åˆ°äº†ä¸€ä¸ªæ’æ§½ props å¯¹è±¡ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">MyComponent</span> <span class="attr">v-slot</span>=<span class="string">&quot;slotProps&quot;</span>&gt;</span></span><br><span class="line">  &#123;&#123; slotProps.text &#125;&#125; &#123;&#123; slotProps.count &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">MyComponent</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å­ç»„ä»¶ä¼ å…¥æ’æ§½çš„ props ä½œä¸ºäº† <code>v-slot</code> æŒ‡ä»¤çš„å€¼ï¼Œå¯ä»¥åœ¨æ’æ§½å†…çš„è¡¨è¾¾å¼ä¸­è®¿é—®ã€‚</p><p>ä½ å¯ä»¥å°†ä½œç”¨åŸŸæ’æ§½ç±»æ¯”ä¸ºä¸€ä¸ªä¼ å…¥å­ç»„ä»¶çš„å‡½æ•°ã€‚å­ç»„ä»¶ä¼šå°†ç›¸åº”çš„ props ä½œä¸ºå‚æ•°ä¼ ç»™å®ƒï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">MyComponent</span>(&#123;</span><br><span class="line">  <span class="comment">// ç±»æ¯”é»˜è®¤æ’æ§½ï¼Œå°†å…¶æƒ³æˆä¸€ä¸ªå‡½æ•°</span></span><br><span class="line">  <span class="attr">default</span>: <span class="function">(<span class="params">slotProps</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;slotProps.text&#125;</span> <span class="subst">$&#123;slotProps.count&#125;</span>`</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">MyComponent</span>(<span class="params">slots</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> greetingMessage = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">`&lt;div&gt;<span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">    // åœ¨æ’æ§½å‡½æ•°è°ƒç”¨æ—¶ä¼ å…¥ props</span></span></span><br><span class="line"><span class="subst"><span class="string">    slots.<span class="keyword">default</span>(&#123; text: greetingMessage, count: <span class="number">1</span> &#125;)</span></span></span><br><span class="line"><span class="subst"><span class="string">  &#125;</span>&lt;/div&gt;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> JS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Djangoå­¦ä¹ ç¬”è®°</title>
      <link href="/2022/10/29/DJANGO%20%E5%AD%A6%E4%B9%A0/"/>
      <url>/2022/10/29/DJANGO%20%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<p><em>DJANGO</em> å­¦ä¹ </p><h2 id="1-å®‰è£…django"><a href="#1-å®‰è£…django" class="headerlink" title="1.å®‰è£…django"></a>1.å®‰è£…django</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install django</span><br></pre></td></tr></table></figure><h2 id="2-åˆ›å»ºé¡¹ç›®"><a href="#2-åˆ›å»ºé¡¹ç›®" class="headerlink" title="2.åˆ›å»ºé¡¹ç›®"></a>2.åˆ›å»ºé¡¹ç›®</h2><p>djangoé¡¹ç›®ä¸­ä¼šæœ‰ä¸€äº›é»˜è®¤çš„æ–‡ä»¶å’Œé»˜è®¤çš„æ–‡ä»¶å¤¹</p><h2 id="2-1åœ¨ç»ˆç«¯"><a href="#2-1åœ¨ç»ˆç«¯" class="headerlink" title="2.1åœ¨ç»ˆç«¯"></a>2.1åœ¨ç»ˆç«¯</h2><p>åœ¨é¡¹ç›®è·¯å¾„ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">django-admin startproject projectname</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">â”‚  manage.py [é¡¹ç›®çš„ç®¡ç†ï¼Œå¯åŠ¨é¡¹ç›®ï¼Œåˆ›å»ºappï¼Œæ•°æ®ç®¡ç†]</span><br><span class="line">â”‚</span><br><span class="line">â””â”€mydj</span><br><span class="line">        asgi.py[æ¥å—ç½‘ç»œè¯·æ±‚]</span><br><span class="line">        settings.py[é¡¹ç›®é…ç½® ]</span><br><span class="line">        urls.py[è·¯å¾„å‡½æ•°çš„å¯¹åº”å…³ç³»]</span><br><span class="line">        wsgi.py[æ¥å—ç½‘ç»œè¯·æ±‚]</span><br><span class="line">        __init__.py</span><br></pre></td></tr></table></figure><h2 id="3-APP"><a href="#3-APP" class="headerlink" title="3.APP"></a>3.APP</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-é¡¹ç›®</span><br><span class="line">-app,ç”¨æˆ·ç®¡ç†ã€è¡¨ç»“æ„ã€å‡½æ•°ã€HTMLæ¨¡æ¿ã€CSSã€‘</span><br><span class="line">-app,è®¢å•ç®¡ç†ã€è¡¨ç»“æ„ã€å‡½æ•°ã€HTMLæ¨¡æ¿ã€CSSã€‘</span><br><span class="line">-app,åå°ç®¡ç†ã€è¡¨ç»“æ„ã€å‡½æ•°ã€HTMLæ¨¡æ¿ã€CSSã€‘</span><br><span class="line">-app,ç½‘ç«™ã€è¡¨ç»“æ„ã€å‡½æ•°ã€HTMLæ¨¡æ¿ã€CSSã€‘</span><br><span class="line">-app,APIã€è¡¨ç»“æ„ã€å‡½æ•°ã€HTMLæ¨¡æ¿ã€CSSã€‘</span><br><span class="line">..</span><br><span class="line">æ³¨æ„ æˆ‘ä»¬å¼€å‘å˜ç„¦ç®€ä»‹ï¼Œç”¨ä¸åˆ°å¤šapp</span><br></pre></td></tr></table></figure><p>åˆ›å»ºapp</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py startapp appname</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">python manage.py startapp appname</span><br><span class="line"><span class="comment">#æ–‡ä»¶ç»“æ„å¦‚ä¸‹å›¾</span></span><br><span class="line">â”‚  manage.py</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€app01</span><br><span class="line">â”‚  â”‚  admin.py ã€djangoé»˜è®¤æä¾›äº†åå°ç®¡ç†ã€‘</span><br><span class="line">â”‚  â”‚  apps.py</span><br><span class="line">â”‚  â”‚  models.py</span><br><span class="line">â”‚  â”‚  tests.pyã€å•å…ƒæµ‹è¯•æ–‡ä»¶ã€‘</span><br><span class="line">â”‚  â”‚  views.pyã€è§†å›¾å‡½æ•°ã€‘</span><br><span class="line">â”‚  â”‚  __init__.py</span><br><span class="line">â”‚  â”‚</span><br><span class="line">â”‚  â””â”€migrations</span><br><span class="line">â”‚          __init__.py</span><br><span class="line">â”‚</span><br><span class="line">â””â”€mydj</span><br><span class="line">    â”‚  asgi.py</span><br><span class="line">    â”‚  settings.py</span><br><span class="line">    â”‚  urls.py</span><br><span class="line">    â”‚  wsgi.py</span><br><span class="line">    â”‚  __init__.py</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="4-å¿«é€Ÿä¸Šæ‰‹"><a href="#4-å¿«é€Ÿä¸Šæ‰‹" class="headerlink" title="4.å¿«é€Ÿä¸Šæ‰‹"></a>4.å¿«é€Ÿä¸Šæ‰‹</h2><h3 id="åœ¨setting-pyæ–‡ä»¶å½“ä¸­æ³¨å†Œapp"><a href="#åœ¨setting-pyæ–‡ä»¶å½“ä¸­æ³¨å†Œapp" class="headerlink" title="åœ¨setting.pyæ–‡ä»¶å½“ä¸­æ³¨å†Œapp"></a>åœ¨setting.pyæ–‡ä»¶å½“ä¸­æ³¨å†Œapp</h3><p><img src="https://cdn.jsdelivr.net/gh/mrthere3/typora_note/img/js/202208051521176.png"></p><h3 id="ç¼–å†™urlå’Œè§†å›¾å‡½æ•°å…³ç³»"><a href="#ç¼–å†™urlå’Œè§†å›¾å‡½æ•°å…³ç³»" class="headerlink" title="ç¼–å†™urlå’Œè§†å›¾å‡½æ•°å…³ç³»"></a>ç¼–å†™urlå’Œè§†å›¾å‡½æ•°å…³ç³»</h3><p><img src="https://cdn.jsdelivr.net/gh/mrthere3/typora_note/img/js/202208051528185.png"></p><ol><li>è·¯ç”±ç³»ç»Ÿå¤æ‚å¤šå˜ï¼Œä¹Ÿå¯ä»¥é€šè¿‡includeï¼ˆâ€œapp.urlsâ€ï¼‰,å°†è¿æ¥é€šå¾€å­è·¯ç”±ç³»ç»Ÿ</li><li>re_path()å¯ä»¥å¸®åŠ©æˆ‘ä»¬åŒ¹é…æ›´åŠ å¤æ‚çš„è·¯ç”±è§„åˆ™åŒ…å«æ­£åˆ™è¡¨è¾¾å¼ã€‚</li></ol><h3 id="ç¼–å†™è§†å›¾å‡½æ•°views-index"><a href="#ç¼–å†™è§†å›¾å‡½æ•°views-index" class="headerlink" title="ç¼–å†™è§†å›¾å‡½æ•°views.index"></a>ç¼–å†™è§†å›¾å‡½æ•°views.index</h3><p><img src="https://cdn.jsdelivr.net/gh/mrthere3/typora_note/img/js/202208051530473.png"></p><h3 id="é¡¹ç›®å¯åŠ¨å‘½ä»¤"><a href="#é¡¹ç›®å¯åŠ¨å‘½ä»¤" class="headerlink" title="é¡¹ç›®å¯åŠ¨å‘½ä»¤"></a>é¡¹ç›®å¯åŠ¨å‘½ä»¤</h3><ul><li><p>å‘½ä»¤è¡Œå¯åŠ¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py runserver</span><br></pre></td></tr></table></figure></li></ul><h3 id="æ¨¡æ¿æ–‡ä»¶templatesç›®å½•"><a href="#æ¨¡æ¿æ–‡ä»¶templatesç›®å½•" class="headerlink" title="æ¨¡æ¿æ–‡ä»¶templatesç›®å½•"></a>æ¨¡æ¿æ–‡ä»¶templatesç›®å½•</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">user_list</span>(<span class="params">request</span>):</span><br><span class="line"><span class="keyword">return</span> render(request,<span class="string">&quot;user_list.html&quot;</span>) <span class="comment">#åœ¨appç›®å½•ä¸‹çš„templatesç›®å½•ä¸‹å¯»æ‰¾è¯¥HTMLæ–‡ä»¶</span></span><br><span class="line"><span class="comment">#ä¼˜å…ˆåœ¨templatesç›®å½•ä¸‹å¯»æ‰¾</span></span><br><span class="line"><span class="comment">#æ ¹æ®appçš„æ³¨å†Œé¡ºåºï¼Œåœ¨æ¯ä¸ªappä¸‹çš„templatesç›®å½•ä¸­å»å¯»æ‰¾</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/mrthere3/typora_note/img/js/202208051602276.png"></p><h3 id="é™æ€æ–‡ä»¶è·¯å¾„staticç›®å½•ä¸‹"><a href="#é™æ€æ–‡ä»¶è·¯å¾„staticç›®å½•ä¸‹" class="headerlink" title="é™æ€æ–‡ä»¶è·¯å¾„staticç›®å½•ä¸‹"></a>é™æ€æ–‡ä»¶è·¯å¾„staticç›®å½•ä¸‹</h3><ul><li>CSS</li><li>å›¾ç‰‡</li><li>JS</li></ul><p>é»˜è®¤å­˜æ”¾åœ¨staticç›®å½•ä¸‹ï¼Œåœ¨è¿›è¡Œè°ƒç”¨æ—¶å€™ï¼Œè¿›è¡Œ&#x2F;staticåŠ å®Œæ•´è·¯å¾„è¿›è¡Œè°ƒç”¨</p><p>ä¹Ÿå¯åœ¨setting.pyæ–‡ä»¶ä¸­è‡ªè¡Œè®¾ç½®</p><p><img src="https://cdn.jsdelivr.net/gh/mrthere3/typora_note/img/js/202208051712055.png"></p><h2 id="5-DJANGO-æ¨¡æ¿è¯­æ³•"><a href="#5-DJANGO-æ¨¡æ¿è¯­æ³•" class="headerlink" title="5. DJANGO æ¨¡æ¿è¯­æ³•"></a>5. <em>DJANGO</em> æ¨¡æ¿è¯­æ³•</h2><p>æœ¬è´¨ä¸Šï¼šåœ¨htmlä¸­å†™ä¸€äº›å ä½ç¬¦ï¼Œç”±æ•°æ®å¯¹è¿™äº›å ä½ç¬¦è¿›è¡Œæ›¿æ¢å’Œå¤„ç†ã€‚ </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        &#123;% for i in data_list %&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123; i &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        &#123;% endfor %&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ¨¡æ¿ä¸­ä½¿ç”¨ç‰¹å®šçš„æ¨¡æ¿è¯­æ³•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render,HttpResponse</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> render(request,<span class="string">&#x27;index.html&#x27;</span>,&#123;<span class="string">&#x27;data_list&#x27;</span>:[<span class="string">&#x27;å‘ç¥¨&#x27;</span>, <span class="string">&#x27;æµ·å…³ç¼´æ¬¾ä¹¦&#x27;</span>, <span class="string">&#x27;ä»£æ‰£ä»£ç¼´&#x27;</span>, <span class="string">&#x27;å†œäº§å“åŠ è®¡æ‰£é™¤å‘ç¥¨ä¿¡æ¯&#x27;</span>, <span class="string">&#x27;å†œäº§å“åŠ è®¡æ‰£é™¤æµ·å…³æ–‡ä¹¦&#x27;</span>, <span class="string">&#x27;å¼‚å¸¸å‘ç¥¨&#x27;</span>]&#125;)</span><br></pre></td></tr></table></figure><p><code>åœ¨è§†å›¾å‡½æ•°ï¼Œä½¿ç”¨jsonæ ¼å¼è¿›è¡Œå‰åç«¯çš„äº¤äº’</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;#&lt;p&gt;è¿‡æ»¤å™¨:(|)  å°†ç®¡é“ç¬¦å·¦è¾¹çš„æ•°æ®å½“åšç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥è¿‡æ»¤å™¨ä¸­å¦‚æœéœ€è¦ç¬¬äºŒä¸ªå‚æ•° åˆ™åç§°åå†’å·&lt;/p&gt;#&#125;</span><br><span class="line">&lt;p&gt;ç»Ÿè®¡é•¿åº¦:&#123;&#123; l|length &#125;&#125;&lt;/p&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>åŠ æ³•è¿ç®—:&#123;&#123; i|add:123 &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>é»˜è®¤å€¼:&#123;&#123; b|default:&#x27;å¸ƒå°”å€¼ä¸ºFalse&#x27; &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>æ—¶é—´æ ¼å¼:&#123;&#123; ctime|date:&#x27;Y-m-d H:i:s&#x27; &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆªå–å­—ç¬¦(åŒ…å«ä¸‰ä¸ªç‚¹):&#123;&#123; ss|truncatechars:10 &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆªå–å•è¯(ä¸åŒ…å«ä¸‰ä¸ªç‚¹):&#123;&#123; ss|truncatewords:3 &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>æ–‡ä»¶å¤§å°:&#123;&#123; file_size|filesizeformat &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>è½¬ä¹‰:&#123;&#123; s1|safe &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>æ ‡ç­¾:å…¶å®å°±æ˜¯æµç¨‹æ§åˆ¶ ifåˆ¤æ–­  forå¾ªç¯<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">&#123;% <span class="keyword">for</span> foo <span class="keyword">in</span> s %&#125;</span><br><span class="line">    &#123;% <span class="keyword">if</span> forloop.<span class="property">first</span> %&#125;</span><br><span class="line">        &lt;p&gt;è¿™æ˜¯ç¬¬ä¸€æ¬¡å¾ªç¯&lt;/p&gt;</span><br><span class="line">    &#123;% elif forloop.<span class="property">last</span> %&#125;</span><br><span class="line">        &lt;p&gt;è¿™æ˜¯æœ€åä¸€æ¬¡&lt;/p&gt;</span><br><span class="line">    &#123;% <span class="keyword">else</span> %&#125;</span><br><span class="line">        &lt;p&gt;ç»§ç»­!!!&lt;/p&gt;</span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line">    &#123;% empty %&#125;</span><br><span class="line">        &lt;p&gt;ä¼ é€’è¿‡æ¥çš„æ•°æ®æ˜¯ç©ºçš„&lt;/p&gt;</span><br><span class="line">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹ä¸‰å¼ </p><p><img src="https://img-blog.csdnimg.cn/65ead6b1b4b74f5f8450fbb495ffc2fc.png"></p><p><img src="https://img-blog.csdnimg.cn/c847a5f7347745bfbaab0cf3f2e91e37.png"></p><p><img src="https://img-blog.csdnimg.cn/c64b5070d7714ea59433c874987e2a82.png"></p><h2 id="6-äº¤äº’ä¸å“åº”"><a href="#6-äº¤äº’ä¸å“åº”" class="headerlink" title="6.äº¤äº’ä¸å“åº”"></a>6.äº¤äº’ä¸å“åº”</h2><h3 id="requestäº¤äº’å¯¹è±¡è¯¦è§£"><a href="#requestäº¤äº’å¯¹è±¡è¯¦è§£" class="headerlink" title="requestäº¤äº’å¯¹è±¡è¯¦è§£"></a>requestäº¤äº’å¯¹è±¡è¯¦è§£</h3><figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">Request</span><br><span class="line">ã€€ã€€æˆ‘ä»¬çŸ¥é“å½“URLconfæ–‡ä»¶åŒ¹é…åˆ°ç”¨æˆ·è¾“å…¥çš„è·¯å¾„åï¼Œä¼šè°ƒç”¨å¯¹åº”çš„viewå‡½æ•°ï¼Œå¹¶å°† HttpRequestå¯¹è±¡ ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥è¯¥å‡½æ•°ã€‚</span><br><span class="line"></span><br><span class="line">æˆ‘ä»¬æ¥çœ‹ä¸€çœ‹è¿™ä¸ªHttpRequestå¯¹è±¡æœ‰å“ªäº›å±æ€§æˆ–è€…æ–¹æ³•ï¼š</span><br><span class="line"><span class="number">1</span> HttpRequest.scheme ã€€ è¯·æ±‚çš„åè®®ï¼Œä¸€èˆ¬ä¸º<span class="keyword">http</span>æˆ–è€…httpsï¼Œå­—ç¬¦ä¸²æ ¼å¼(ä»¥ä¸‹å±æ€§ä¸­è‹¥æ— ç‰¹æ®ŠæŒ‡æ˜ï¼Œå‡ä¸ºå­—ç¬¦ä¸²æ ¼å¼)</span><br><span class="line"></span><br><span class="line"><span class="number">2</span> HttpRequest.body ã€€ã€€ <span class="keyword">http</span>è¯·æ±‚çš„ä¸»ä½“ï¼ŒäºŒè¿›åˆ¶æ ¼å¼ã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">3</span> HttpRequest.path æ‰€è¯·æ±‚é¡µé¢çš„å®Œæ•´è·¯å¾„(ä½†ä¸åŒ…æ‹¬åè®®ä»¥åŠåŸŸå)ï¼Œä¹Ÿå°±æ˜¯ç›¸å¯¹äºç½‘ç«™æ ¹ç›®å½•çš„è·¯å¾„ã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">4</span> HttpRequest.path_info è·å–å…·æœ‰ URL æ‰©å±•åçš„èµ„æºçš„é™„åŠ è·¯å¾„ä¿¡æ¯ã€‚ç›¸å¯¹äºHttpRequest.pathï¼Œä½¿ç”¨è¯¥æ–¹æ³•ä¾¿äºç§»æ¤ã€‚</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> the WSGIScriptAlias <span class="keyword">for</span> your application is <span class="keyword">set</span> to â€œ/minfoâ€, then path might be â€œ/minfo/music/bands/the_beatles/â€ and path_info would be â€œ/music/bands/the_beatles/â€.</span><br><span class="line"><span class="number">5</span> HttpRequest.method è·å–è¯¥è¯·æ±‚çš„æ–¹æ³•ï¼Œæ¯”å¦‚ï¼š GET POST â€¦</span><br><span class="line"></span><br><span class="line"><span class="number">6</span> HttpRequest.<span class="keyword">encoding</span> è·å–è¯·æ±‚ä¸­è¡¨å•æäº¤æ•°æ®çš„ç¼–ç ã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">7</span> HttpRequest.content_type è·å–è¯·æ±‚çš„MIMEç±»å‹(ä»CONTENT_TYPEå¤´éƒ¨ä¸­è·å–)ï¼Œdjango1<span class="number">.10</span>çš„æ–°ç‰¹æ€§ã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">8</span> HttpRequest.content_params è·å–CONTENT_TYPEä¸­çš„é”®å€¼å¯¹å‚æ•°ï¼Œå¹¶ä»¥å­—å…¸çš„æ–¹å¼è¡¨ç¤ºï¼Œdjango1<span class="number">.10</span>çš„æ–°ç‰¹æ€§ã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">9</span> HttpRequest.GET è¿”å›ä¸€ä¸ª querydict å¯¹è±¡(ç±»ä¼¼äºå­—å…¸ï¼Œæœ¬æ–‡æœ€åæœ‰querydictçš„ä»‹ç»)ï¼Œè¯¥å¯¹è±¡åŒ…å«äº†æ‰€æœ‰çš„HTTP GETå‚æ•°</span><br><span class="line"></span><br><span class="line"><span class="number">10</span> HttpRequest.POST è¿”å›ä¸€ä¸ª querydict ï¼Œè¯¥å¯¹è±¡åŒ…å«äº†æ‰€æœ‰çš„HTTP POSTå‚æ•°ï¼Œé€šè¿‡è¡¨å•ä¸Šä¼ çš„æ‰€æœ‰ å­—ç¬¦ éƒ½ä¼šä¿å­˜åœ¨è¯¥å±æ€§ä¸­ã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">11</span> HttpRequest.COOKIES ã€€ è¿”å›ä¸€ä¸ªåŒ…å«äº†æ‰€æœ‰cookiesçš„å­—å…¸ã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">12</span> HttpRequest.FILES ã€€ã€€ è¿”å›ä¸€ä¸ªåŒ…å«äº†æ‰€æœ‰çš„ä¸Šä¼ æ–‡ä»¶çš„ querydict å¯¹è±¡ã€‚é€šè¿‡è¡¨å•æ‰€ä¸Šä¼ çš„æ‰€æœ‰ æ–‡ä»¶ éƒ½ä¼šä¿å­˜åœ¨è¯¥å±æ€§ä¸­ã€‚</span><br><span class="line"></span><br><span class="line">keyçš„å€¼æ˜¯inputæ ‡ç­¾ä¸­nameå±æ€§çš„å€¼ï¼Œvalueçš„å€¼æ˜¯ä¸€ä¸ªUploadedFileå¯¹è±¡</span><br><span class="line"></span><br><span class="line"><span class="number">13</span> HttpRequest.META è¿”å›ä¸€ä¸ªåŒ…å«äº†æ‰€æœ‰<span class="keyword">http</span>å¤´éƒ¨ä¿¡æ¯çš„å­—å…¸</span><br><span class="line"></span><br><span class="line">View Code</span><br><span class="line"><span class="number">14</span> HttpRequest.session ä¸­é—´ä»¶å±æ€§</span><br><span class="line"></span><br><span class="line"><span class="number">15</span> HttpRequest.siteã€€ã€€ ä¸­é—´ä»¶å±æ€§</span><br><span class="line"></span><br><span class="line"><span class="number">16</span> HttpRequest.userã€€ã€€ ä¸­é—´ä»¶å±æ€§ï¼Œè¡¨ç¤ºå½“å‰ç™»å½•çš„ç”¨æˆ·ã€‚</span><br></pre></td></tr></table></figure><h3 id="å“åº”çš„æ–¹å¼"><a href="#å“åº”çš„æ–¹å¼" class="headerlink" title="å“åº”çš„æ–¹å¼"></a>å“åº”çš„æ–¹å¼</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render,HttpResponse</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> HttpResponse (<span class="string">&quot;è¿”å›å†…å®¹&quot;</span>)</span><br><span class="line"><span class="comment">#HttpResponse å°†åé¢çš„å†…å®¹è¿”å›</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> redirect (<span class="string">&quot;https://baidu.com&quot;</span>)</span><br><span class="line"><span class="comment">#redirect é‡å®šå‘åˆ°åˆ«çš„ç½‘å€</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_get_queryset</span>(<span class="params">klass</span>):</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">ä»æ¨¡å‹ã€ç®¡ç†å™¨æˆ–QuerySetä¸­è¿”å›ä¸€ä¸ªQuerySetã€‚ä¸ºäº†ä½¿get_object_or_404å’Œget_list_or_404æ›´åŠ DRY(ä»£ç ä¸é‡å¤)ã€‚</span></span><br><span class="line"><span class="string">å¦‚æœklassä¸æ˜¯Modleã€Manageræˆ–QuerySetï¼Œé‚£ä¹ˆå°±ä¼šäº§ç”Ÿä¸€ä¸ªValueErrorã€‚</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_object_or_404</span>(<span class="params">klass, *args, **kwargs</span>):</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">ä½¿ç”¨get()è¿”å›ä¸€ä¸ªå¯¹è±¡å¦‚æœå¯¹è±¡ä¸å­˜åœ¨è¿”å›Http404å¼‚å¸¸ã€‚</span></span><br><span class="line"><span class="string">klasså¯èƒ½æ˜¯ä¸€ä¸ªModelã€Manageræˆ–QuerySetå¯¹è±¡; get()æŸ¥è¯¢ä¸­ä½¿ç”¨äº†å‚æ•°å’Œå…³é”®å­—å‚æ•°ã€‚</span></span><br><span class="line"><span class="string">æ³¨æ„: å°±åƒget()ä¸€æ ·ï¼Œå¦‚æœæœ‰å¤šä¸ªè¿”å›å¯¹è±¡ï¼Œåˆ™è¿”å›å¤šä¸ªå¯¹è±¡ã€‚</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_list_or_404</span>(<span class="params">klass, *args, **kwargs</span>):</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">ä½¿ç”¨filter()è¿”å›ä¸€ä¸ªå¯¹è±¡åˆ—è¡¨,å¦‚æœåˆ—è¡¨ä¸ºç©ºåˆ™è¿”å›ä¸€ä¸ªHttp404å¼‚å¸¸</span></span><br><span class="line"><span class="string">klasså¯èƒ½æ˜¯ä¸€ä¸ªModelã€Manageræˆ–QuerySetå¯¹è±¡ã€‚</span></span><br><span class="line"><span class="string">filter()æŸ¥è¯¢ä¸­ä½¿ç”¨äº†å‚æ•°å’Œå…³é”®å­—å‚æ•°ã€‚</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">resolve_url</span>(<span class="params">to, *args, **kwargs</span>):</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">è¿”å›ä¸€ä¸ªä¸æ‰€ä¼ é€’å‚æ•°ç›¸å¯¹åº”çš„URLã€‚</span></span><br><span class="line"><span class="string">å‚æ•°å¯ä»¥æ˜¯:</span></span><br><span class="line"><span class="string">*æ¨¡å‹:æ¨¡å‹çš„get_absolute_url()å‡½æ•°å°†è¢«è°ƒç”¨ã€‚</span></span><br><span class="line"><span class="string">*è§†å›¾åç§°ï¼Œå¯èƒ½å¸¦æœ‰å‚æ•°:&#x27; urlresolvers.reverse()å°†ç”¨äºåå‘è§£æåç§°ã€‚</span></span><br><span class="line"><span class="string">*ä¸€ä¸ªURLï¼Œå®ƒå°†æŒ‰åŸæ ·è¿”å›ã€‚</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h3 id="ç™»å½•æ¡ˆä¾‹"><a href="#ç™»å½•æ¡ˆä¾‹" class="headerlink" title="ç™»å½•æ¡ˆä¾‹"></a>ç™»å½•æ¡ˆä¾‹</h3><p>ç™»é™†ç•Œé¢</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        <span class="keyword">return</span> render(request,<span class="string">&quot;login.html&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(request.POST)</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">&quot;ç™»é™†æˆåŠŸ&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    &#123;% csrf_token %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span>  <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/login/&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;ç”¨æˆ·å&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;ç”¨æˆ·å&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;å¯†ç &quot;</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;å¯†ç &quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&quot;æäº¤&quot;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>djangoå’Œflaskä¸åŒï¼Œåœ¨è¿›è¡Œè¡¨å•æ ¡éªŒï¼Œå¤šä¸€ä¸ª&#123;% csrf_token %&#125;å®‰å…¨æœºåˆ¶æ ¡éªŒï¼Œä¸åŠ æ ¡éªŒï¼Œæ— æ³•å®ç°ç™»é™†æˆåŠŸçš„å“åº”ã€‚</code></p><h2 id="7-DJANGO-ORM"><a href="#7-DJANGO-ORM" class="headerlink" title="7.DJANGO ORM"></a>7.<em>DJANGO</em> ORM</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install mysqlclient==<span class="number">1.4</span><span class="number">.1</span> </span><br></pre></td></tr></table></figure><h4 id="1ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#1ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="1ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>1ä¿®æ”¹é…ç½®æ–‡ä»¶</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åœ¨sentting.py</span></span><br><span class="line">DATABASES = &#123;</span><br><span class="line">    <span class="string">&#x27;default&#x27;</span> : &#123;</span><br><span class="line">        <span class="string">&#x27;ENGINE&#x27;</span> : <span class="string">&#x27;django.db.backends.mysql&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;NAME&#x27;</span> : <span class="string">&#x27;django_db&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;USER&#x27;</span> : <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;PASSWORD&#x27;</span> : <span class="string">&#x27;123456&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;HOST&#x27;</span> : <span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;POST&#x27;</span> : <span class="string">&#x27;3306&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-åœ¨models-pyåˆ›å»ºè¡¨ç±»"><a href="#2-åœ¨models-pyåˆ›å»ºè¡¨ç±»" class="headerlink" title="2.åœ¨models.pyåˆ›å»ºè¡¨ç±»"></a>2.åœ¨models.pyåˆ›å»ºè¡¨ç±»</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#djangoåº•å±‚ä¼šæ ¹æ®ç±»ï¼Œæ¥ç”Ÿæˆå¯¹åº”çš„è¡¨å’Œå­—æ®µfrom django.db import models #ç»§æ‰¿models.Model</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserInfo</span>(models.Model):</span><br><span class="line">    name = models.CharField(max_length=<span class="number">32</span>)                        <span class="comment"># primary_key = True</span></span><br><span class="line">    password = models.CharField(max_length=<span class="number">64</span>)                    <span class="comment"># ä¿®æ”¹è¡¨çš„æ—¶å€™ï¼Œå¯ä»¥ç›´æ¥æ·»åŠ ä¸€è¡Œæˆ–å»æ‰ã€‚ </span></span><br><span class="line">    age = models.IntegerField(default=<span class="number">2</span>)                          <span class="comment"># é»˜è®¤ä¸º2</span></span><br><span class="line">    <span class="comment"># data = models.IntegerField(null=True, blank=True)           # å…è®¸ä¸ºç©º</span></span><br><span class="line">    <span class="comment"># account = models.DecimalField(max_digits=10, decimal_places=2ï¼Œ default = 0)  # æ€»é•¿åº¦10ä½ï¼Œ å°æ•°2ä½, é»˜è®¤0.</span></span><br><span class="line">    <span class="comment"># create_time = models.DateTimeField()                        # æ—¶é—´ </span></span><br><span class="line">    <span class="comment"># on_delete=models.CASCADE çº§è”åˆ é™¤ï¼Œ models.SET_NULL è®¾ç½®ä¸ºç©ºã€‚</span></span><br><span class="line">    <span class="comment"># depart = models.ForeignKey(to=&#x27;Department&#x27;, to_field=&#x27;id&#x27;)  # ç”Ÿæˆdepart_idå­—æ®µï¼Œå’ŒDepartmentçš„to_fieldå…³è”</span></span><br><span class="line">    <span class="comment"># gender_choices = (</span></span><br><span class="line">    <span class="comment">#    (1, &quot;ç”·&quot;),</span></span><br><span class="line">    <span class="comment">#    (2, &quot;å¥³&quot;),)</span></span><br><span class="line">    <span class="comment"># gender = models.SmallIntegerField(verbose_name=&quot;æ€§åˆ«&quot;, choices=gender_choices)  # é€‰ç€çº¦æŸ</span></span><br><span class="line"><span class="comment">#djangoåº•å±‚ä¼šæ ¹æ®ç±»ï¼Œæ¥ç”Ÿæˆå¯¹åº”çš„è¡¨å’Œå­—æ®µ</span></span><br></pre></td></tr></table></figure><h4 id="3-æ‰§è¡Œæ•°æ®åˆå§‹åŒ–è„šæœ¬"><a href="#3-æ‰§è¡Œæ•°æ®åˆå§‹åŒ–è„šæœ¬" class="headerlink" title="3.æ‰§è¡Œæ•°æ®åˆå§‹åŒ–è„šæœ¬"></a>3.æ‰§è¡Œæ•°æ®åˆå§‹åŒ–è„šæœ¬</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python manage.py makemigrations</span><br><span class="line">python manage.py migrate</span><br></pre></td></tr></table></figure><h4 id="4-ä½¿ç”¨ormæ“ä½œæ•°æ®åº“è¡¨çš„æ•°æ®"><a href="#4-ä½¿ç”¨ormæ“ä½œæ•°æ®åº“è¡¨çš„æ•°æ®" class="headerlink" title="4.ä½¿ç”¨ormæ“ä½œæ•°æ®åº“è¡¨çš„æ•°æ®"></a>4.ä½¿ç”¨ormæ“ä½œæ•°æ®åº“è¡¨çš„æ•°æ®</h4><h5 id="1-ormç”¨æ³•ä¸å­—æ®µç±»å‹"><a href="#1-ormç”¨æ³•ä¸å­—æ®µç±»å‹" class="headerlink" title="1.ormç”¨æ³•ä¸å­—æ®µç±»å‹"></a>1.ormç”¨æ³•ä¸å­—æ®µç±»å‹</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"> Meta é€‰é¡¹. æ²¡æœ‰ä¸€ä¸ªé€‰é¡¹æ˜¯å¿…éœ€çš„. æ˜¯å¦æ·»åŠ  <span class="keyword">class</span> <span class="title class_">Meta</span> åˆ°ä½ çš„ model å®Œå…¨æ˜¯å¯é€‰çš„ã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>ã€db_table </span><br><span class="line">æœ¬æ¨¡å—åœ¨æ•°æ®åº“ä¸­å¯¹åº”çš„è¡¨çš„åå­—:</span><br><span class="line"></span><br><span class="line">db_table = <span class="string">&quot;pizza_orders&quot;</span></span><br><span class="line"></span><br><span class="line">è‹¥ä¸æä¾›è¯¥å‚æ•°, Django ä¼šä½¿ç”¨ app_label + <span class="string">&#x27;_&#x27;</span> + module_name ä½œä¸ºè¡¨çš„åå­—ã€‚</span><br><span class="line"></span><br><span class="line">è‹¥è¡¨çš„åå­—æ˜¯ä¸€ä¸ª SQL ä¿ç•™å­—, æˆ–åŒ…å« Python å˜é‡åä¸å…è®¸çš„å­—ç¬¦--ç‰¹åˆ«æ˜¯è¿å­—ç¬¦ --æ²¡å…³ç³». Django ä¼šè‡ªåŠ¨åœ¨å¹•åæ›¿ä½ å°†åˆ—åå­—å’Œè¡¨åå­—ç”¨å¼•å·å¼•èµ·æ¥.</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>ã€get_latest_by </span><br><span class="line"></span><br><span class="line">ä¸€ä¸ª DateField æˆ– DateTimeField å­—æ®µçš„åå­—. è‹¥æä¾›è¯¥é€‰é¡¹, è¯¥æ¨¡å—å°†æ‹¥æœ‰ä¸€ä¸ª get_latest() å‡½æ•°ä»¥å¾—åˆ° <span class="string">&quot;æœ€æ–°çš„&quot;</span> å¯¹è±¡(ä¾æ®é‚£ä¸ªå­—æ®µ):</span><br><span class="line"></span><br><span class="line">get_latest_by = <span class="string">&quot;order_date&quot;</span>ã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>ã€order_with_respect_to </span><br><span class="line"></span><br><span class="line">å°†è¯¥å¯¹è±¡æ ‡è®°ä¸ºå¯æŒ‰ç»™å®šå­—æ®µæ’åº. This <span class="keyword">is</span> almost always used <span class="keyword">with</span> related objects to allow them to be ordered <span class="keyword">with</span> respect to a parent <span class="built_in">object</span>. ä¸¾ä¾‹æ¥è¯´, å¦‚æœä¸€ä¸ª PizzaToppping å…³è”åˆ°ä¸€ä¸ª Pizza å¯¹è±¡, ä½ å¯ä»¥ä½¿ç”¨:</span><br><span class="line"></span><br><span class="line">order_with_respect_to = <span class="string">&#x27;pizza&#x27;</span></span><br><span class="line"></span><br><span class="line">è¿™å°±å…è®¸ toppings è¢«æ’åºto be ordered å…³äºç›¸å…³çš„ pizza å¯¹è±¡</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>ã€ordering </span><br><span class="line"></span><br><span class="line">é»˜è®¤æ’åºå­—æ®µåŠæ’åºæ–¹å¼, ç”¨äºå¾—åˆ°ä¸€ä¸ªå¯¹è±¡åˆ—è¡¨çš„ä»»ä½•åœºåˆ:</span><br><span class="line"></span><br><span class="line">ordering = [<span class="string">&#x27;-order_date&#x27;</span>]</span><br><span class="line"></span><br><span class="line">è¿™æ˜¯ä¸€ä¸ª <span class="built_in">tuple</span> æˆ–ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨. æ¯ä¸ªå­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªå­—æ®µåå¸¦åŠä¸€ä¸ªå¯é€‰çš„å‰ç¼€ <span class="string">&quot;-&quot;</span> , è¿™ä¸ªå‰ç¼€è¡¨ç¤ºæŒ‰é™åºæ’åº(é€’å‡). è‹¥æ²¡æœ‰è¿™ä¸ªå‰ç¼€,åˆ™è¡¨ç¤ºæŒ‰å‡åºæ’åº.å­—ç¬¦ä¸² <span class="string">&quot;?&quot;</span> è¡¨ç¤ºéšæœºæ’åº.</span><br><span class="line"></span><br><span class="line">ä¸¾ä¸ªä¾‹å­, è¦å¯¹ pub_date å­—æ®µä»¥å‡åºæ’åˆ—, è¿™æ ·åš:</span><br><span class="line"></span><br><span class="line">ordering = [<span class="string">&#x27;pub_date&#x27;</span>]</span><br><span class="line"></span><br><span class="line">è¦é™åºæ’åˆ—, è¿™æ ·:</span><br><span class="line"></span><br><span class="line">ordering = [<span class="string">&#x27;-pub_date&#x27;</span>]</span><br><span class="line"></span><br><span class="line">è¦å¯¹ pub_date é™åº,ç„¶åå¯¹ author å‡åº, è¿™æ ·:</span><br><span class="line"></span><br><span class="line">ordering = [<span class="string">&#x27;-pub_date&#x27;</span>, <span class="string">&#x27;author&#x27;</span>]</span><br><span class="line"></span><br><span class="line">æ³¨æ„ä¸€ç‚¹,ä¸è®ºä½ ä½¿ç”¨äº†å¤šå°‘ä¸ªå­—æ®µæ’åº, admin åªä½¿ç”¨ç¬¬ä¸€ä¸ªå­—æ®µ.</span><br><span class="line"></span><br><span class="line"><span class="number">5</span>ã€permissions </span><br><span class="line"></span><br><span class="line">è¦åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ‰€éœ€è¦çš„é¢å¤–çš„æƒé™. å¦‚æœä¸€ä¸ªå¯¹è±¡æœ‰ admin è®¾ç½®, åˆ™æ¯ä¸ªå¯¹è±¡çš„æ·»åŠ ,åˆ é™¤å’Œæ”¹å˜æƒé™ä¼šäºº(ä¾æ®è¯¥é€‰é¡¹)è‡ªåŠ¨åˆ›å»º.ä¸‹é¢è¿™ä¸ªä¾‹å­æŒ‡å®šäº†ä¸€ä¸ªé™„åŠ æƒé™: can_deliver_pizzas:</span><br><span class="line"></span><br><span class="line">permissions = ((<span class="string">&quot;can_deliver_pizzas&quot;</span>, <span class="string">&quot;Can deliver pizzas&quot;</span>),)</span><br><span class="line"></span><br><span class="line">è¿™æ˜¯ä¸€ä¸ª<span class="number">2</span>-å…ƒç´  <span class="built_in">tuple</span> çš„<span class="built_in">tuple</span>æˆ–åˆ—è¡¨, å…¶ä¸­ä¸¤<span class="number">2</span>-å…ƒç´  <span class="built_in">tuple</span> çš„æ ¼å¼ä¸º:(permission_code, human_readable_permission_name). </span><br><span class="line"></span><br><span class="line"><span class="number">6</span>ã€unique_together </span><br><span class="line"></span><br><span class="line">unique_together = ((<span class="string">&quot;driver&quot;</span>, <span class="string">&quot;restaurant&quot;</span>),)</span><br><span class="line"></span><br><span class="line">è¿™æ˜¯ä¸€ä¸ªå­—æ®µåˆ—è¡¨çš„åˆ—è¡¨,è¿™äº›å­—æ®µçš„ç»¼åˆå€¼å¿…é¡»æ˜¯å”¯ä¸€çš„. è¿™ä¼šåœ¨ Django admin å±‚å’Œæ•°æ®åº“å±‚åŒæ—¶åšå‡ºé™åˆ¶(ä¹Ÿå°±æ˜¯ç›¸å…³çš„ UNIQUE è¯­å¥ä¼šè¢«åŒ…æ‹¬åœ¨ CREATE TABLE è¯­å¥ä¸­).</span><br><span class="line"></span><br><span class="line"><span class="number">7</span>ã€verbose_name </span><br><span class="line"></span><br><span class="line">æ˜¯è¯¥å¯¹è±¡çš„ä¸€ä¸ªå¯è¯»æ€§æ›´å¥½çš„å”¯ä¸€åå­—:</span><br><span class="line"></span><br><span class="line">verbose_name = <span class="string">&quot;pizza&quot;</span></span><br><span class="line"></span><br><span class="line">è‹¥æœªæä¾›è¯¥é€‰é¡¹, Django åˆ™ä¼šç”¨ä¸€ä¸ªç±»åå­—çš„ munged ç‰ˆæœ¬æ¥ä»£æ›¿: CamelCase becomes camel <span class="keyword">case</span>.</span><br><span class="line"></span><br><span class="line"><span class="number">8</span>ã€erbose_name_plural </span><br><span class="line"></span><br><span class="line">å¯¹è±¡åå­—çš„å¤æ•°:</span><br><span class="line"></span><br><span class="line">verbose_name_plural = <span class="string">&quot;stories&quot;</span></span><br><span class="line"></span><br><span class="line">è‹¥æœªæä¾›è¯¥é€‰é¡¹, Django ä¼šä½¿ç”¨ verbose_name + <span class="string">&quot;s&quot;</span>.</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>ormç”¨æ³•ï¼šå±æ€§å = models.å­—æ®µç±»å‹()</span><br><span class="line"> </span><br><span class="line"><span class="number">2.</span>å¸¸è§å­—æ®µç±»å‹</span><br><span class="line">    (<span class="number">1</span>)AutoFieldï¼š    è‡ªåŠ¨å¢é•¿çš„IntegerField, ä¸æŒ‡å®šæ—¶Djangoä¼šè‡ªåŠ¨åˆ›å»ºå±æ€§åä¸º<span class="built_in">id</span>çš„è‡ªåŠ¨å¢é•¿å±æ€§</span><br><span class="line">    (<span class="number">2</span>)IntegerFieldï¼š æ•´æ•°</span><br><span class="line">    (<span class="number">3</span>)FloatFieldï¼ˆï¼‰ï¼šæµ®ç‚¹æ•°</span><br><span class="line">    (<span class="number">4</span>)DecimalField(max_digits=<span class="literal">None</span>, decimal_places=<span class="literal">None</span>)ï¼šå¯ä»¥æŒ‡å®šç²¾åº¦çš„åè¿›åˆ¶æµ®ç‚¹æ•°</span><br><span class="line">                                                        max_digitsï¼šæ€»ä½æ•°</span><br><span class="line">                                                        decimal_placesï¼šå°æ•°ä½æ•°</span><br><span class="line">    (<span class="number">5</span>)CharField(max_length=<span class="number">20</span>)ï¼šå­—ç¬¦ä¸²ï¼ˆmax_lengthï¼šæœ€å¤§å­—ç¬¦ä¸ªæ•°ï¼‰</span><br><span class="line">                                 å¿…é¡»è¦æŒ‡å®šmax_lengthå‚æ•° ä¸æŒ‡å®šä¼šç›´æ¥æŠ¥é”™</span><br><span class="line">    (<span class="number">6</span>)TextFiledï¼š         å¤§æ–‡æœ¬å­—æ®µï¼Œä¸€èˆ¬è¶…è¿‡<span class="number">4000</span>ä¸ªå­—ç¬¦æ—¶ä½¿ç”¨</span><br><span class="line">    (<span class="number">7</span>)BooleanFieldï¼š      å¸ƒå°”å­—æ®µï¼Œå€¼ä¸º<span class="literal">True</span>æˆ–<span class="literal">False</span></span><br><span class="line">    (<span class="number">8</span>)NullBooleanFieldï¼š  æ”¯æŒNullã€<span class="literal">True</span>ã€<span class="literal">False</span>ä¸‰ç§å€¼                                       </span><br><span class="line">    (<span class="number">9</span>)DateField(auto_now=<span class="literal">False</span>, auto_now_add=<span class="literal">False</span>)ï¼šæ—¥æœŸ</span><br><span class="line">                å‚æ•°auto_nowï¼šæ¯æ¬¡ä¿å­˜å¯¹è±¡æ—¶ï¼Œè‡ªåŠ¨è®¾ç½®è¯¥å­—æ®µä¸ºå½“å‰æ—¶é—´ï¼Œ</span><br><span class="line">                              ç”¨äº<span class="string">&quot;æœ€åä¸€æ¬¡ä¿®æ”¹&quot;</span>çš„æ—¶é—´æˆ³ï¼Œå®ƒæ€»æ˜¯ä½¿ç”¨å½“å‰æ—¥æœŸï¼Œé»˜è®¤ä¸ºfalse</span><br><span class="line">                å‚æ•°auto_now_addï¼šå½“å¯¹è±¡ç¬¬ä¸€æ¬¡è¢«åˆ›å»ºæ—¶è‡ªåŠ¨è®¾ç½®å½“å‰æ—¶é—´ï¼Œ</span><br><span class="line">                              ç”¨äºåˆ›å»ºçš„æ—¶é—´æˆ³ï¼Œå®ƒæ€»æ˜¯ä½¿ç”¨å½“å‰æ—¥æœŸï¼Œé»˜è®¤ä¸ºfalse</span><br><span class="line">                æ³¨æ„ï¼šå‚æ•°auto_now_addå’Œauto_nowæ˜¯ç›¸äº’æ’æ–¥çš„ï¼Œç»„åˆå°†ä¼šå‘ç”Ÿé”™è¯¯</span><br><span class="line">    (<span class="number">10</span>)TimeField(auto_now=<span class="literal">False</span>, auto_now_add=<span class="literal">False</span>)ï¼šæ—¶é—´</span><br><span class="line">    (<span class="number">11</span>)DateTimeFieldï¼šæ—¥æœŸæ—¶é—´</span><br><span class="line">    (<span class="number">12</span>)FileFieldï¼šä¸Šä¼ æ–‡ä»¶å­—æ®µï¼Œä»¥äºŒè¿›åˆ¶çš„å½¢å¼</span><br><span class="line">    (<span class="number">13</span>)ImageFieldï¼šç»§æ‰¿äºFileFieldï¼Œå¯¹ä¸Šä¼ çš„å†…å®¹è¿›è¡Œæ ¡éªŒï¼Œç¡®ä¿æ˜¯æœ‰æ•ˆçš„å›¾ç‰‡</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="number">3.</span>å¸¸è§å­—æ®µå±æ€§(é€‰é¡¹)</span><br><span class="line">    (<span class="number">1</span>)nullï¼šå¦‚æœä¸º<span class="literal">True</span>ï¼Œè¡¨ç¤ºå…è®¸ä¸ºç©ºï¼Œé»˜è®¤å€¼æ˜¯<span class="literal">False</span></span><br><span class="line">    (<span class="number">2</span>)blankï¼šå¦‚æœä¸º<span class="literal">True</span>ï¼Œåˆ™è¯¥å­—æ®µå…è®¸ä¸ºç©ºç™½ï¼Œé»˜è®¤å€¼æ˜¯<span class="literal">False</span>    </span><br><span class="line">             å¯¹æ¯”ï¼šnullæ˜¯æ•°æ®åº“èŒƒç•´çš„æ¦‚å¿µï¼Œblankæ˜¯è¡¨å•éªŒè¯èŒƒç•´çš„</span><br><span class="line">    (<span class="number">3</span>)db_columnï¼šå­—æ®µçš„åç§°ï¼Œå¦‚æœæœªæŒ‡å®šï¼Œåˆ™ä½¿ç”¨å±æ€§çš„åç§°</span><br><span class="line">              ï¼ˆåªé™äºæ•°æ®åº“è¡¨ä¸­çš„åå­—ï¼Œæ“ä½œæ•°æ®åº“è¿˜æ˜¯ç±»å±æ€§çš„åå­—ï¼‰</span><br><span class="line">    (<span class="number">4</span>)db_indexï¼šè‹¥å€¼ä¸º<span class="literal">True</span>, åˆ™åœ¨è¡¨ä¸­ä¼šä¸ºæ­¤å­—æ®µåˆ›å»ºç´¢å¼•ï¼Œé»˜è®¤å€¼æ˜¯<span class="literal">False</span>ï¼ˆä¸ºäº†ä¼˜åŒ–æŸ¥è¯¢é€Ÿåº¦ ï¼‰</span><br><span class="line">    (<span class="number">5</span>)defaultï¼šé»˜è®¤å€¼ï¼Œè¿™å¯ä»¥æ˜¯å€¼æˆ–å¯è°ƒç”¨å¯¹è±¡ã€‚å¦‚æœå¯è°ƒç”¨ï¼Œåˆ™æ¯æ¬¡åˆ›å»ºæ–°å¯¹è±¡æ—¶éƒ½ä¼šè°ƒç”¨å®ƒã€‚</span><br><span class="line">    (<span class="number">6</span>)primary_keyï¼šè‹¥ä¸º<span class="literal">True</span>ï¼Œåˆ™è¯¥å­—æ®µä¼šæˆä¸ºæ¨¡å‹çš„ä¸»é”®å­—æ®µï¼Œé»˜è®¤å€¼æ˜¯<span class="literal">False</span>ï¼Œä¸€èˆ¬ä½œä¸ºAutoFieldçš„é€‰é¡¹ä½¿ç”¨</span><br><span class="line">    (<span class="number">7</span>)uniqueï¼šå¦‚æœä¸º<span class="literal">True</span>, è¿™ä¸ªå­—æ®µåœ¨è¡¨ä¸­å¿…é¡»æœ‰å”¯ä¸€å€¼ï¼Œè¿™ä¸ªå€¼ä¸èƒ½é‡å¤ï¼Œé»˜è®¤å€¼æ˜¯<span class="literal">False</span></span><br><span class="line">    (<span class="number">8</span>)verbose_name:è¯¥å‚æ•°æ˜¯æ‰€æœ‰å­—æ®µéƒ½æœ‰çš„ å°±æ˜¯ç”¨æ¥å¯¹å­—æ®µçš„è§£é‡Š</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="number">4.</span>å…³ç³»å­—æ®µç±»å‹(ç”¨æ³•ä¸æ™®é€šå­—æ®µç±»å‹ä¸€æ ·)</span><br><span class="line">    å…³ç³»å‹æ•°æ®åº“çš„å…³ç³»åŒ…æ‹¬ä¸‰ç§ç±»å‹ï¼š</span><br><span class="line">        ForeignKeyï¼š        ä¸€å¯¹å¤šï¼Œå°†å­—æ®µå®šä¹‰åœ¨å¤šçš„ä¸€ç«¯ä¸­</span><br><span class="line">        ManyToManyFieldï¼š   å¤šå¯¹å¤šï¼Œå°†å­—æ®µå®šä¹‰åœ¨ä»»æ„ä¸€ç«¯ä¸­</span><br><span class="line">        OneToOneFieldï¼š     ä¸€å¯¹ä¸€ï¼Œå°†å­—æ®µå®šä¹‰åœ¨ä»»æ„ä¸€ç«¯ä¸­</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="number">5.</span>å­—æ®µçš„çš„å¢åˆ æ”¹(è®°å¾—æ‰§è¡Œæ•°æ®åº“è¿ç§»çš„ä¸¤æ¡å‘½ä»¤)ï¼š</span><br><span class="line">    (<span class="number">1</span>)å­—æ®µçš„å¢åŠ </span><br><span class="line">    a.å¯ä»¥åœ¨ç»ˆç«¯å†…ç›´æ¥ç»™å‡ºé»˜è®¤å€¼</span><br><span class="line">        b.è¯¥å­—æ®µå¯ä»¥ä¸ºç©º</span><br><span class="line">            info = models.CharField(max_length=<span class="number">32</span>,verbose_name=<span class="string">&#x27;ä¸ªäººç®€ä»‹&#x27;</span>,null=<span class="literal">True</span>)</span><br><span class="line">        c.ç›´æ¥ç»™å­—æ®µè®¾ç½®é»˜è®¤å€¼</span><br><span class="line">            hobby = models.CharField(max_length=<span class="number">32</span>,verbose_name=<span class="string">&#x27;å…´è¶£çˆ±</span></span><br><span class="line"><span class="string">å¥½&#x27;</span>,default=<span class="string">&#x27;study&#x27;</span>)</span><br><span class="line">        ç„¶åæ‰§è¡Œæ•°æ®åº“è¿ç§»çš„ä¸¤æ¡å‘½ä»¤</span><br><span class="line">    (<span class="number">2</span>)å­—æ®µçš„ä¿®æ”¹</span><br><span class="line">   ç›´æ¥ä¿®æ”¹ä»£ç ç„¶åæ‰§è¡Œæ•°æ®åº“è¿ç§»çš„ä¸¤æ¡å‘½ä»¤å³å¯ï¼</span><br><span class="line">    (<span class="number">3</span>)å­—æ®µçš„åˆ (æ…é‡)</span><br><span class="line">   ç›´æ¥æ³¨é‡Šå¯¹åº”çš„å­—æ®µç„¶åæ‰§è¡Œæ•°æ®åº“è¿ç§»çš„ä¸¤æ¡å‘½ä»¤å³å¯ï¼</span><br><span class="line">       æ³¨æ„ï¼šæ‰§è¡Œå®Œæ¯•ä¹‹åå­—æ®µå¯¹åº”çš„æ•°æ®ä¹Ÿéƒ½æ²¡æœ‰äº†</span><br><span class="line"><span class="number">6.</span> valueså’Œ values_list</span><br><span class="line">        user_info = UserInfo.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=request.GET.get(<span class="string">&quot;id&quot;</span>)).values(<span class="string">&quot;å­—æ®µ&quot;</span>) </span><br><span class="line">  <span class="comment"># è§„å®š å­—æ®µåçš„å€¼è¿”å›ä¸ºå­—å…¸å…ƒç´ </span></span><br><span class="line">   valuise_list è§„å®šçš„ä¸ºå…ƒç»„</span><br><span class="line">                                     </span><br><span class="line">                                     </span><br></pre></td></tr></table></figure><h5 id="2-ORMä¹‹æŸ¥è¯¢æ“ä½œ-æŸ¥è¯¢é›†ã€è¿‡æ»¤å™¨"><a href="#2-ORMä¹‹æŸ¥è¯¢æ“ä½œ-æŸ¥è¯¢é›†ã€è¿‡æ»¤å™¨" class="headerlink" title="2.ORMä¹‹æŸ¥è¯¢æ“ä½œ(æŸ¥è¯¢é›†ã€è¿‡æ»¤å™¨)"></a>2.ORMä¹‹æŸ¥è¯¢æ“ä½œ(æŸ¥è¯¢é›†ã€è¿‡æ»¤å™¨)</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>åŸºæœ¬æ¦‚å¿µ</span><br><span class="line">    (<span class="number">1</span>)æŸ¥è¯¢é›†ï¼šè¡¨ç¤ºä»æ•°æ®åº“ä¸­è·å–çš„æ¨¡å‹å¯¹è±¡é›†åˆ(objects.),åœ¨ç®¡ç†å™¨ä¸Šè°ƒç”¨è¿‡æ»¤å™¨æ–¹æ³•ä¼šè¿”å›æŸ¥è¯¢é›†</span><br><span class="line">               æŸ¥è¯¢é›†å¯ä»¥å«æœ‰<span class="number">0</span>ä¸ªã€ä¸€ä¸ªæˆ–å¤šä¸ªè¿‡æ»¤å™¨</span><br><span class="line">       æŸ¥è¯¢é›†ç‰¹ç‚¹:a.æƒ°æ€§æ‰§è¡Œï¼šåˆ›å»ºæŸ¥è¯¢é›†ä¸ä¼šè®¿é—®æ•°æ®åº“ï¼Œç›´åˆ°åœ¨æ¨¡æ¿ä¸­è°ƒç”¨æ•°æ®æ—¶ï¼Œæ‰ä¼šè®¿é—®æ•°æ®åº“</span><br><span class="line">                             è°ƒç”¨æ•°æ®çš„æƒ…å†µåŒ…æ‹¬è¿­ä»£ã€åºåˆ—åŒ–ã€ä¸<span class="keyword">if</span>åˆç”¨</span><br><span class="line">                 b.ç¼“å­˜ï¼šæŸ¥è¯¢é›†çš„ç»“æœè¢«å­˜ä¸‹æ¥ä¹‹åï¼Œå†æ¬¡æŸ¥è¯¢ç›¸åŒæ•°æ®æ—¶ä¼šä½¿ç”¨ä¹‹å‰ç¼“å­˜çš„æ•°æ®</span><br><span class="line">    (<span class="number">2</span>)è¿‡æ»¤å™¨ï¼šåŸºäºæ‰€ç»™çš„å‚æ•°é™åˆ¶æŸ¥è¯¢çš„ç»“æœ</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="number">2.</span>è¿‡æ»¤å™¨åˆ†ä¸¤ç±»</span><br><span class="line">    (<span class="number">1</span>)è¿”å›åˆ—è¡¨æ•°æ®çš„è¿‡æ»¤å™¨ï¼š</span><br><span class="line">        <span class="built_in">all</span>()ï¼š       è¿”å›æ‰€æœ‰çš„æ•°æ®(ä»¥å¯¹è±¡å½¢å¼)</span><br><span class="line">        <span class="built_in">filter</span>()ï¼š    è¿”å›æ»¡è¶³æ¡ä»¶çš„æ•°æ®ï¼Œæ‹¬å·å†…å¯ä»¥æºå¸¦å¤šä¸ªå‚æ•°ï¼Œå‚æ•°ä¸å‚æ•°ä¹‹é—´é»˜è®¤æ˜¯<span class="keyword">and</span>å…³ç³»</span><br><span class="line">        exclude()ï¼š   è¿”å›æ»¡è¶³æ¡ä»¶ä¹‹å¤–çš„æ•°æ®ï¼Œç›¸å½“äºsqlè¯­å¥ä¸­whereéƒ¨åˆ†çš„<span class="keyword">not</span>å…³é”®å­—</span><br><span class="line">        order_by()ï¼š  è¿”å›æ’åºåçš„æ•°æ®</span><br><span class="line">        æ³¨æ„ï¼šè¿”å›çš„æ˜¯åˆ—è¡¨å¯¹è±¡ï¼Œå³[æ•°æ®å¯¹è±¡<span class="number">1</span>,æ•°æ®å¯¹è±¡<span class="number">2.</span>..]ï¼Œ</span><br><span class="line">              è·å–å¯¹è±¡ï¼Œå®ƒæ”¯æŒç´¢å¼•å–å€¼å’Œåˆ‡ç‰‡æ“ä½œï¼Œä½†æ˜¯ä¸æ”¯æŒè´Ÿæ•°ç´¢å¼•</span><br><span class="line">              è·å–ç¬¬ä¸€ä¸ªå¯¹è±¡<span class="built_in">filter</span>().first()</span><br><span class="line">    (<span class="number">2</span>)è¿”å›å•ä¸ªå¯¹è±¡çš„è¿‡æ»¤å™¨:</span><br><span class="line">        get()ï¼š       è¿”å›å•ä¸ªæ»¡è¶³æ¡ä»¶çš„å¯¹è±¡</span><br><span class="line">                      <span class="comment"># å¦‚æœæœªæ‰¾åˆ°ä¼šå¼•å‘&quot;æ¨¡å‹ç±».DoesNotExist&quot;å¼‚å¸¸</span></span><br><span class="line">                      <span class="comment"># å¦‚æœå¤šæ¡è¢«è¿”å›ï¼Œä¼šå¼•å‘&quot;æ¨¡å‹ç±».MultipleObjectsReturned&quot;å¼‚å¸¸</span></span><br><span class="line">        count()ï¼š     è¿”å›å½“å‰æŸ¥è¯¢çš„æ€»æ¡æ•°</span><br><span class="line">        aggregate()ï¼š èšåˆ</span><br><span class="line">        exists()ï¼š    åˆ¤æ–­æŸ¥è¯¢é›†ä¸­æ˜¯å¦æœ‰æ•°æ®ï¼Œå¦‚æœæœ‰åˆ™è¿”å›<span class="literal">True</span>ï¼Œæ²¡æœ‰åˆ™è¿”å›<span class="literal">False</span></span><br><span class="line">    (<span class="number">3</span>)å¸¸è§è¿‡æ»¤å™¨æŸ¥è¯¢ï¼š</span><br><span class="line">        a.æŸ¥è¯¢<span class="built_in">id</span>ä¸º<span class="number">1</span>çš„ç”¨æˆ·å(ç”¨exactï¼šåˆ¤æ–­æ˜¯å¦ç›¸ç­‰)</span><br><span class="line">            usernames = models.User.objects.<span class="built_in">filter</span>(id__exact=<span class="number">1</span>)</span><br><span class="line"> </span><br><span class="line">        b.æŸ¥è¯¢å§“åä¸­åŒ…å«<span class="string">&#x27;å¼ &#x27;</span>çš„åå­—(ç”¨containsï¼šæ˜¯å¦åŒ…å«)</span><br><span class="line">            usernames = models.User.objects.<span class="built_in">filter</span>(username__contains=<span class="string">&#x27;å¼ &#x27;</span>)</span><br><span class="line"> </span><br><span class="line">        c.æŸ¥è¯¢å§“åä¸­ä»¥â€˜æ¬£â€™ç»“å°¾çš„åå­—(ç”¨startswith/endswithï¼šä»¥ä»€ä¹ˆå¼€å¤´/ä»¥ä»€ä¹ˆç»“å°¾)</span><br><span class="line">            usernames = models.User.objects.<span class="built_in">filter</span>(username__endswith=<span class="string">&#x27;æ¬£&#x27;</span>)</span><br><span class="line"> </span><br><span class="line">        d.æŸ¥è¯¢å§“åä¸ä¸ºç©ºçš„æˆå‘˜(ç”¨isnull : æ˜¯å¦ä¸ºnull)</span><br><span class="line">            usernames = models.User.objects.<span class="built_in">filter</span>(username__isnull=<span class="literal">False</span>)</span><br><span class="line"> </span><br><span class="line">        e.æŸ¥è¯¢ç¼–å·ä¸º<span class="number">2</span>æˆ–<span class="number">4</span>çš„æˆå‘˜(pk:ä¸»é”®/<span class="built_in">id</span>) (ç”¨<span class="keyword">in</span>ï¼šæ˜¯å¦åŒ…å«åœ¨èŒƒå›´å†…)</span><br><span class="line">            usernames = models.User.objects.<span class="built_in">filter</span>(pk__in=[<span class="number">2</span>,<span class="number">4</span>])</span><br><span class="line"> </span><br><span class="line">        f.æŸ¥è¯¢ç¼–å·å¤§äº<span class="number">2</span>çš„æˆå‘˜ï¼ˆgt:å¤§äºã€gte:å¤§äºç­‰äºã€lt:å°äºã€lte:å°)</span><br><span class="line">            usernames = models.User.objects.<span class="built_in">filter</span>(id__gt=<span class="number">2</span>)</span><br><span class="line"> </span><br><span class="line">        g.æŸ¥è¯¢<span class="built_in">id</span>ä¸ç­‰äºï¼“çš„æˆå‘˜(exclude:æ¡ä»¶ä»¥å¤–çš„æ•°æ®)</span><br><span class="line">            usernames = models.User.objects.exclude(<span class="built_in">id</span>=<span class="number">3</span>)</span><br><span class="line"> </span><br><span class="line">        h.æŸ¥è¯¢<span class="number">2020</span>å¹´æ³¨å†Œçš„æˆå‘˜(yearã€monthã€dayã€week_dayã€hourã€minuteã€secondï¼šå¯¹æ—¥æœŸæ—¶é—´ç±»å‹çš„å±æ€§è¿›è¡Œè¿ç®—)</span><br><span class="line">            usernames = models.User.objects.<span class="built_in">filter</span>(pub_date__year=<span class="number">2020</span>)</span><br><span class="line"> </span><br><span class="line">        i.æŸ¥è¯¢<span class="number">2020</span>å¹´<span class="number">1</span>æœˆ<span class="number">1</span>æ—¥åæ³¨å†Œçš„æˆå‘˜</span><br><span class="line">            <span class="keyword">from</span> datetime <span class="keyword">import</span> date</span><br><span class="line">            usernames = models.User.objects.<span class="built_in">filter</span>(pub_date__gt=date(<span class="number">2020</span>,<span class="number">1</span>,<span class="number">1</span>))</span><br><span class="line">        h. å¤šæ¡ä»¶æŸ¥è¯¢</span><br><span class="line">        data = &#123;<span class="string">&quot;id&quot;</span>=<span class="string">&quot;3&quot;</span>,<span class="string">&quot;moible&quot;</span>=<span class="string">&quot;123&quot;</span>&#125;</span><br><span class="line">        usernames = models.User.objects.<span class="built_in">filter</span>(**data)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">åœ¨views.pyä¸­å¯¹æ•°æ®åº“æ•°æ®çš„å¢åˆ æ”¹æŸ¥</span><br><span class="line"><span class="keyword">from</span> app01 <span class="keyword">import</span> models</span><br><span class="line"><span class="number">1.</span>æŸ¥æ•°æ®</span><br><span class="line">    <span class="comment"># æ–¹å¼ä¸€</span></span><br><span class="line">        res = models.User.objects.<span class="built_in">filter</span>(username=username)</span><br><span class="line">            <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">            è¿”å›å€¼ä½ å…ˆçœ‹æˆæ˜¯åˆ—è¡¨å¥—æ•°æ®å¯¹è±¡çš„æ ¼å¼</span></span><br><span class="line"><span class="string">            å®ƒä¹Ÿæ”¯æŒç´¢å¼•å–å€¼ï¼Œåˆ‡ç‰‡æ“ä½œï¼Œä½†æ˜¯ä¸æ”¯æŒè´Ÿæ•°ç´¢å¼•</span></span><br><span class="line"><span class="string">            å®ƒä¹Ÿä¸æ¨èä½ ä½¿ç”¨ç´¢å¼•çš„æ–¹å¼å–å€¼</span></span><br><span class="line"><span class="string">            user_obj = models.User.objects.filter(username=username).first()</span></span><br><span class="line"><span class="string">            filteræ‹¬å·å†…å¯ä»¥æºå¸¦å¤šä¸ªå‚æ•° å‚æ•°ä¸å‚æ•°ä¹‹é—´é»˜è®¤æ˜¯andå…³ç³»</span></span><br><span class="line"><span class="string">            &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> render(request,<span class="string">&#x27;userlist.html&#x27;</span>,&#123;<span class="string">&#x27;user_queryset&#x27;</span>:user_queryset&#125;)    <span class="comment"># æŒ‡å®šè¿”å›</span></span><br><span class="line">    <span class="comment"># æ–¹å¼äºŒ</span></span><br><span class="line">        user_queryset = models.User.objects.<span class="built_in">all</span>()</span><br><span class="line">        <span class="keyword">return</span> render(request,<span class="string">&#x27;userlist.html&#x27;</span>,<span class="built_in">locals</span>())    <span class="comment"># å…¨éƒ¨è¿”å›</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="number">2.</span>å¢æ•°æ®</span><br><span class="line">    <span class="comment"># æ–¹æ³•ä¸€ï¼š</span></span><br><span class="line">    res = models.User.objects.create(username=username,password=password)  <span class="comment"># è¿”å›å€¼å°±æ˜¯å½“å‰è¢«åˆ›å»ºçš„å¯¹è±¡æœ¬èº«</span></span><br><span class="line">    <span class="comment"># æ–¹æ³•äºŒï¼š</span></span><br><span class="line">    user_obj = models.User(username=username,password=password)</span><br><span class="line">    user_obj.save()              <span class="comment"># ä¿å­˜æ•°æ®/å¯¹è±¡è°ƒç”¨saveæ–¹æ³•</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="number">3.</span>åˆ æ•°æ®</span><br><span class="line">    models.User.objects.<span class="built_in">filter</span>(id_user=<span class="number">1</span>).delete()    <span class="comment"># æŒ‡å®šåˆ é™¤id_user=1çš„æ•°æ®</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="number">4.</span>æ”¹æ•°æ®</span><br><span class="line">    <span class="comment"># æ–¹å¼ä¸€ï¼š</span></span><br><span class="line">    models.User.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=edit_id).update(username=username,password=password)</span><br><span class="line">        <span class="comment"># å°†filteræŸ¥è¯¢å‡ºæ¥çš„åˆ—è¡¨ä¸­æ‰€æœ‰çš„å¯¹è±¡å…¨éƒ¨æ›´æ–°ï¼Œæ‰¹é‡æ›´æ–°æ“ä½œï¼Œåªä¿®æ”¹è¢«ä¿®æ”¹çš„å­—æ®µ</span></span><br><span class="line">    <span class="comment"># æ–¹å¼äºŒï¼š</span></span><br><span class="line">    edit_obj.username = username</span><br><span class="line">    edit_obj.password= password</span><br><span class="line">    edit_obj.save()</span><br><span class="line">        <span class="comment"># ç”¨é‡æ–°èµ‹å€¼æ–¹å¼ï¼Œå…¨éƒ¨é€ä¸€æ›´æ¢å½“å­—æ®µç‰¹åˆ«å¤šçš„æ—¶å€™æ•ˆç‡ä¼šéå¸¸çš„ä½</span></span><br><span class="line">        <span class="comment"># å› ä¸ºä»å¤´åˆ°å°¾ï¼Œæ— è®ºè¯¥å­—æ®µæ˜¯å¦è¢«ä¿®æ”¹éƒ½å°†æ•°æ®çš„æ‰€æœ‰å­—æ®µå…¨éƒ¨æ›´æ–°ä¸€è¾¹ </span></span><br></pre></td></tr></table></figure><h4 id="5-æ¡ˆä¾‹"><a href="#5-æ¡ˆä¾‹" class="headerlink" title="5.æ¡ˆä¾‹"></a>5.æ¡ˆä¾‹</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Department</span>(models.Model):</span><br><span class="line">    title = models.CharField(verbose_name=<span class="string">&quot;éƒ¨é—¨åç§°&quot;</span>,max_length=<span class="number">32</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserInfo</span>(models.Model):</span><br><span class="line">    name = models.CharField(max_length=<span class="number">32</span>,verbose_name=<span class="string">&quot;å§“å&quot;</span>)                        <span class="comment"># primary_key = True</span></span><br><span class="line">    password = models.CharField(verbose_name=<span class="string">&quot;å¯†ç &quot;</span>,max_length=<span class="number">64</span>)                    <span class="comment"># ä¿®æ”¹è¡¨çš„æ—¶å€™ï¼Œå¯ä»¥ç›´æ¥æ·»åŠ ä¸€è¡Œæˆ–å»æ‰ã€‚</span></span><br><span class="line">    age = models.IntegerField(verbose_name=<span class="string">&quot;å¹´é¾„&quot;</span>)    <span class="comment"># é»˜è®¤ä¸º2</span></span><br><span class="line">    count = models.DecimalField(verbose_name=<span class="string">&quot;ä½™é¢&quot;</span>,max_digits=<span class="number">10</span>,decimal_places=<span class="number">2</span>,default=<span class="number">0</span>)</span><br><span class="line">    create_time = models.DateTimeField(validators=<span class="string">&quot;å…¥èŒæ—¶é—´&quot;</span>)</span><br><span class="line">    <span class="comment"># depart_id = models.BigIntegerField(verbose_name=&quot;éƒ¨é—¨id&quot;)</span></span><br><span class="line">    <span class="comment">#è®¾ç½®å¤–é”®</span></span><br><span class="line">    deaprt = models.ForeignKey(to=<span class="string">&quot;Department&quot;</span>,to_fields=<span class="string">&quot;id&quot;</span>,on_delete=models.CASCADE)</span><br><span class="line">    <span class="comment">#on_delete è¿™æ˜¯æ•°æ®åº“å¤–é”®å®šä¹‰çš„ä¸€ä¸ªå¯é€‰é¡¹ï¼Œç”¨æ¥è®¾ç½®å½“ä¸»é”®è¡¨ä¸­çš„è¢«å‚è€ƒåˆ—çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¤–é”®è¡¨ä¸­å“åº”å­—æ®µçš„å˜æ¢è§„åˆ™çš„ã€‚</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">on_update å’Œ on_delete åé¢å¯ä»¥è·Ÿçš„è¯è¯­æœ‰å››ä¸ª</span></span><br><span class="line"><span class="string">1. no action è¡¨ç¤º ä¸åšä»»ä½•æ“ä½œï¼Œ</span></span><br><span class="line"><span class="string">2. set null è¡¨ç¤ºåœ¨å¤–é”®è¡¨ä¸­å°†ç›¸åº”å­—æ®µè®¾ç½®ä¸ºnull</span></span><br><span class="line"><span class="string">3. set default è¡¨ç¤ºè®¾ç½®ä¸ºé»˜è®¤å€¼</span></span><br><span class="line"><span class="string">4. cascade è¡¨ç¤ºçº§è”æ“ä½œï¼Œå°±æ˜¯è¯´ï¼Œå¦‚æœä¸»é”®è¡¨ä¸­è¢«å‚è€ƒå­—æ®µæ›´æ–°ï¼Œå¤–é”®è¡¨ä¸­ä¹Ÿæ›´æ–°ï¼Œä¸»é”®è¡¨ä¸­çš„è®°å½•è¢«åˆ é™¤ï¼Œå¤–é”®è¡¨ä¸­æ”¹è¡Œä¹Ÿç›¸åº”åˆ é™¤</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h5 id="7-5-1éƒ¨é—¨åˆ—è¡¨"><a href="#7-5-1éƒ¨é—¨åˆ—è¡¨" class="headerlink" title="7.5.1éƒ¨é—¨åˆ—è¡¨"></a>7.5.1éƒ¨é—¨åˆ—è¡¨</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span><span class="attr">href</span>=<span class="string">&quot;mydj/static/bootstrap/dist/css/bootstrap.min.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;mydj/static/jquery/dist/jquery.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;mydj/static/bootstrap/dist/js/bootstrap.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>é™æ€æ–‡ä»¶è·¯å¾„å¦‚å›¾æ‰€ç¤º</li></ul><p><img src="https://cdn.jsdelivr.net/gh/mrthere3/typora_note/img/js/202208161405343.png"></p><ul><li><p>é…ç½®æ–‡ä»¶è·¯å¾„å¦‚ä¸‹</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">STATIC_URL = &#x27;/static/&#x27;</span><br><span class="line"></span><br><span class="line">STATICFILES_DIRS = [(os.path.join(BASE_DIR, &#x27;static&#x27;))]</span><br></pre></td></tr></table></figure></li><li><p>å¯¼å…¥é™æ€æ–‡ä»¶</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br></pre></td><td class="code"><pre><span class="line">&#123;% load static %&#125;</span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% static &#x27;bootstrap/dist/css/bootstrap.css&#x27; %&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.navbar</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;navbar navbar-default&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Brand and toggle get grouped for better mobile display --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;navbar-header&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;navbar-toggle collapsed&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;collapse&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">data-target</span>=<span class="string">&quot;#bs-example-navbar-collapse-1&quot;</span> <span class="attr">aria-expanded</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span>&gt;</span>Toggle navigation<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;icon-bar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;navbar-brand&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>è”é€šç”¨æˆ·ç®¡ç† <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- Collect the nav links, forms, and other content for toggling --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;collapse navbar-collapse&quot;</span> <span class="attr">id</span>=<span class="string">&quot;bs-example-navbar-collapse-1&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav navbar-nav&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;active&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>éƒ¨é—¨ç®¡ç† <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span>&gt;</span>(current)<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>ç”¨æˆ·ç®¡ç†<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav navbar-nav navbar-right&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                &#123;#                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>ç™»å‡º<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>#&#125;</span><br><span class="line">                &#123;#                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>Link<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>#&#125;</span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;dropdown&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-toggle&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;dropdown&quot;</span> <span class="attr">role</span>=<span class="string">&quot;button&quot;</span> <span class="attr">aria-haspopup</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                       <span class="attr">aria-expanded</span>=<span class="string">&quot;false&quot;</span>&gt;</span>ææ´›å…‹<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;caret&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;dropdown-menu&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>ä¸ªäººèµ„æ–™ <span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>æˆ‘çš„ä¿¡æ¯<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">&quot;separator&quot;</span> <span class="attr">class</span>=<span class="string">&quot;divider&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>æ³¨é”€<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- /.navbar-collapse --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="comment">&lt;!-- /.container-fluid --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-bottom: 10px&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary btn-success &quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;modal&quot;</span> <span class="attr">data-target</span>=<span class="string">&quot;#exampleModal&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-eject&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                æ–°å»ºéƒ¨é—¨<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal fade&quot;</span> <span class="attr">id</span>=<span class="string">&quot;exampleModal&quot;</span> <span class="attr">tabindex</span>=<span class="string">&quot;-1&quot;</span> <span class="attr">role</span>=<span class="string">&quot;dialog&quot;</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">aria-labelledby</span>=<span class="string">&quot;exampleModalLabel&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-dialog&quot;</span> <span class="attr">role</span>=<span class="string">&quot;document&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-content&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-header&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;close&quot;</span> <span class="attr">data-dismiss</span>=<span class="string">&quot;modal&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;Close&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span></span></span><br><span class="line"><span class="tag">                                    <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="symbol">&amp;times;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">h4</span> <span class="attr">class</span>=<span class="string">&quot;modal-title&quot;</span> <span class="attr">id</span>=<span class="string">&quot;exampleModalLabel&quot;</span>&gt;</span>æ–°å»ºéƒ¨é—¨<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-body&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/depart/add/&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">onsubmit</span>=<span class="string">&quot;return isempty(&#x27;#deparment-name&#x27;)&quot;</span>&gt;</span></span><br><span class="line">                                &#123;% csrf_token %&#125;</span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;recipient-name&quot;</span> <span class="attr">class</span>=<span class="string">&quot;control-label&quot;</span>&gt;</span>éƒ¨é—¨åç§°:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;deparment-name&quot;</span> <span class="attr">name</span>=<span class="string">&quot;depart_name&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;message-text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;control-label&quot;</span>&gt;</span>éƒ¨é—¨äººå‘˜<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;message-text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;depart_length&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-footer&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span> <span class="attr">data-dismiss</span>=<span class="string">&quot;modal&quot;</span>&gt;</span>å…³é—­<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>ä¿å­˜<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-default&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- Default panel contents --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;glyphicon glyphicon-list&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                éƒ¨é—¨åˆ—è¡¨</span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- Table --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table table-bordered&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>ID<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>åç§°<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>æ“ä½œ<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">                &#123;% for i in depart_list %&#125;</span><br><span class="line">                    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">th</span> <span class="attr">scope</span>=<span class="string">&quot;row&quot;</span>&gt;</span>&#123;&#123; start_index|add:forloop.counter &#125;&#125;<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; i.title &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn-primary btn-sm&quot;</span> <span class="attr">data-toggle</span>=<span class="string">&quot;modal&quot;</span> <span class="attr">data-target</span>=<span class="string">&quot;#exampleModal2&quot;</span></span></span><br><span class="line"><span class="tag">                               <span class="attr">data-whatever</span>=<span class="string">&quot;&#123;&#123; i.title &#125;&#125;&quot;</span>&gt;</span>ç¼–è¾‘<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn-danger btn-sm&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/depart/delete/?nid=&#123;&#123; i.id &#125;&#125;&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_parent&quot;</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                &#123;% endfor %&#125;</span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal fade&quot;</span> <span class="attr">id</span>=<span class="string">&quot;exampleModal2&quot;</span> <span class="attr">tabindex</span>=<span class="string">&quot;-1&quot;</span> <span class="attr">role</span>=<span class="string">&quot;dialog&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">aria-labelledby</span>=<span class="string">&quot;exampleModalLabel&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-dialog&quot;</span> <span class="attr">role</span>=<span class="string">&quot;document&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-content&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-header&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;close&quot;</span> <span class="attr">data-dismiss</span>=<span class="string">&quot;modal&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;Close&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="symbol">&amp;times;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">h4</span> <span class="attr">class</span>=<span class="string">&quot;modal-title&quot;</span> <span class="attr">id</span>=<span class="string">&quot;exampleModalLabel&quot;</span>&gt;</span>éƒ¨é—¨åç§°ç¼–è¾‘<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-body&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/depart/edit/&quot;</span> <span class="attr">id</span>=<span class="string">&quot;deaprt_edit&quot;</span> <span class="attr">onsubmit</span>=<span class="string">&quot;return isempty(&#x27;#deparment-name1&#x27;)&quot;</span>&gt;</span></span><br><span class="line">                                    &#123;% csrf_token %&#125;</span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;recipient-name&quot;</span> <span class="attr">class</span>=<span class="string">&quot;control-label&quot;</span>&gt;</span>éƒ¨é—¨åç§°<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;deparment-title&quot;</span>  <span class="attr">readonly</span> <span class="attr">name</span>=<span class="string">&quot;old_depart_name&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;message-text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;control-label&quot;</span>&gt;</span>æ–°éƒ¨é—¨åç§°<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">id</span>=<span class="string">&quot;deparment-name1&quot;</span> <span class="attr">name</span>=<span class="string">&quot;depart_name&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal-footer&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span> <span class="attr">data-dismiss</span>=<span class="string">&quot;modal&quot;</span>&gt;</span>å…³é—­</span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> <span class="attr">form</span>=<span class="string">&quot;deaprt_edit&quot;</span>&gt;</span>æäº¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;/jquery/dist/jquery.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;/bootstrap/dist/js/bootstrap.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://www.huangwx.cn/css/sweetalert.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://www.huangwx.cn/js/sweetalert-dev.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">isempty</span>(<span class="params">id</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">try</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> res = $(id).<span class="title function_">val</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> res2 = $(<span class="string">&quot;#message-text&quot;</span>).<span class="title function_">val</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(res, res2)</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> ((res.<span class="property">length</span> == <span class="number">0</span>) &amp;&amp; (res2.<span class="property">length</span> == <span class="number">0</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">swal</span>(&#123;<span class="attr">title</span>: <span class="string">&quot;æ•°æ®ä¸èƒ½ä¸ºç©º&quot;</span>, <span class="attr">type</span>: <span class="string">&quot;error&quot;</span>, <span class="attr">confirmButtonText</span>: <span class="string">&quot;ç¡®å®š&quot;</span>&#125;)</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">        &#125; <span class="keyword">catch</span> (error) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(error)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">    try &#123;</span><br><span class="line">        $(&#x27;#exampleModal2&#x27;).on(&#x27;show.bs.modal&#x27;, function (event) &#123;</span><br><span class="line">            var button = $(event.relatedTarget) // Button that triggered the modal</span><br><span class="line">            var recipient = button.data(&#x27;whatever&#x27;) // Extract info from data-* attributes</span><br><span class="line">            console.log(recipient)</span><br><span class="line">            // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).</span><br><span class="line">            // Update the modal&#x27;s content. We&#x27;ll use jQuery here, but you could use a data binding library or other methods instead.</span><br><span class="line">            var modal = $(this)</span><br><span class="line">            &#123;#modal.find(&#x27;.modal-title&#x27;).text(&#x27;New message to &#x27; + recipient)#&#125;</span><br><span class="line">            modal.find(&#x27;.modal-body input:eq(1)&#x27;).val(recipient)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;catch(error) &#123;</span><br><span class="line">        console.log(error)</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>ä¾‹å¦‚ä¸‹åˆ—è§†å›¾å‡½æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render,HttpResponse,redirect</span><br><span class="line"><span class="keyword">from</span> app01.models <span class="keyword">import</span> Department</span><br><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> messages</span><br><span class="line"><span class="keyword">from</span> django.core.paginator <span class="keyword">import</span> Paginator</span><br><span class="line"></span><br><span class="line">Create your views here.</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> render(request,<span class="string">&#x27;index.html&#x27;</span>,&#123;<span class="string">&#x27;data_list&#x27;</span>:[<span class="string">&#x27;å‘ç¥¨&#x27;</span>, <span class="string">&#x27;æµ·å…³ç¼´æ¬¾ä¹¦&#x27;</span>, <span class="string">&#x27;ä»£æ‰£ä»£ç¼´&#x27;</span>, <span class="string">&#x27;å†œäº§å“åŠ è®¡æ‰£é™¤å‘ç¥¨ä¿¡æ¯&#x27;</span>, <span class="string">&#x27;å†œäº§å“åŠ è®¡æ‰£é™¤æµ·å…³æ–‡ä¹¦&#x27;</span>, <span class="string">&#x27;å¼‚å¸¸å‘ç¥¨&#x27;</span>]&#125;)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">depart_index</span>(<span class="params">request</span>):</span><br><span class="line">    index =<span class="number">1</span></span><br><span class="line">    page_size = <span class="number">10</span></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;GET&quot;</span>:</span><br><span class="line">        index = <span class="built_in">int</span>(request.GET.get(<span class="string">&quot;index&quot;</span>,<span class="number">1</span>))</span><br><span class="line">        page_size = <span class="built_in">int</span>(request.GET.get(<span class="string">&quot;pagesize&quot;</span>,<span class="number">3</span>))</span><br><span class="line">    query_set = Department.objects.<span class="built_in">all</span>()</span><br><span class="line">    paginator = Paginator(query_set, page_size)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        pages = paginator.page(index) <span class="comment"># å¯èƒ½è¯·æ±‚çš„é¡µæ•°å¤§äº å®é™…åˆ†é¡µæ•°ç›®</span></span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        index = paginator.num_pages <span class="comment">#é’ˆå¯¹è¶…å‡ºç›´æ¥è¿”å›åˆ°æœ€åä¸€é¡µæ•°æ®</span></span><br><span class="line">        last = paginator.num_pages</span><br><span class="line">        pages = paginator.page(last)</span><br><span class="line">    <span class="comment"># print(query_set)</span></span><br><span class="line">    startindex = page_size*(index-<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> render(request,<span class="string">&quot;depart_list.html&quot;</span>,&#123;<span class="string">&#x27;depart_list&#x27;</span>:pages,<span class="string">&quot;start_index&quot;</span>:startindex&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">depart_add</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;POST&quot;</span>:</span><br><span class="line">        depaer_ment=request.POST.get(<span class="string">&quot;depart_name&quot;</span>)</span><br><span class="line">        depart_query = Department.objects.<span class="built_in">filter</span>(title=depaer_ment)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> depart_query:</span><br><span class="line">            Department.objects.create(title=depaer_ment)</span><br><span class="line">    <span class="comment"># time.sleep(2)</span></span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">&quot;/depart/list/&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">depart_delete</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="built_in">print</span>(request.path)</span><br><span class="line">    nid = request.GET.get(<span class="string">&quot;nid&quot;</span>)</span><br><span class="line">    Department.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=nid).delete()</span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">&quot;/depart/list/&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">depart_edit</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">if</span> request.method ==<span class="string">&quot;POST&quot;</span>:</span><br><span class="line">        <span class="built_in">print</span>(request.POST)</span><br><span class="line">        odepart = request.POST.get(<span class="string">&quot;old_depart_name&quot;</span>)</span><br><span class="line">        ndepart = request.POST.get(<span class="string">&quot;depart_name&quot;</span>)</span><br><span class="line">        Department.objects.<span class="built_in">filter</span>(title=odepart).update(title=ndepart)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">&quot;/depart/list/&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h5 id="7-5-2æ¨¡æ¿ç»§æ‰¿"><a href="#7-5-2æ¨¡æ¿ç»§æ‰¿" class="headerlink" title="7.5.2æ¨¡æ¿ç»§æ‰¿"></a>7.5.2æ¨¡æ¿ç»§æ‰¿</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;!å®šä¹‰æ¨¡æ¿&gt;</span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    &#123;% block css %&#125; #cssæ¨¡æ¿</span><br><span class="line">        </span><br><span class="line">    &#123;%endblock%&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        &#123;% block content %&#125;</span><br><span class="line">        </span><br><span class="line">        &#123;%endblock%&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">    &#123;% block js %&#125; #jsæ¨¡æ¿</span><br><span class="line">        </span><br><span class="line">    &#123;%endblock%&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>â€‹ç»§æ‰¿æ¨¡æ¿</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;%extneds &#x27;layout.html&#x27;%&#125;</span><br><span class="line"></span><br><span class="line">&#123;% block css %&#125;  è‡ªå·±çš„css&#123;%endblock%&#125;</span><br><span class="line">&#123;% block content %&#125;</span><br><span class="line"></span><br><span class="line">&#123;%endblock%&#125;</span><br><span class="line">&#123;% block js %&#125;  è‡ªå·±çš„js&#123;%endblock%&#125;</span><br><span class="line"><span class="comment">&lt;!--ç»§æ‰¿æˆ–è€…è‡ªå·±é‡è½½ç›¸å…³--&gt;</span></span><br></pre></td></tr></table></figure><ul><li>~~~python<br>deaprt &#x3D; models.ForeignKey(to&#x3D;â€Departmentâ€, to_field&#x3D;â€idâ€, on_delete&#x3D;models.CASCADE,null&#x3D;True)<br>#depart ä¸ºä¸¤è¡¨å…³é”®å¤–é”®<br>title &#x3D; depart.object.filter(depart).title #è·å–å…³è”è¡¨çš„å±æ€§<br>depart.object.filter(depart) #ä¼šç›´æ¥å¸®ä½ å…³è”åˆ°å¦å¤–ä¸€å¼ è¡¨çš„å¯¹è±¡<br>#djangoä¸ºæˆ‘ä»¬å°è£…å¥½äº† <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">##### 7.5.3 django ç»„ä»¶</span><br><span class="line"></span><br><span class="line">###### 7.5.3.1djangoç»„ä»¶</span><br><span class="line"></span><br><span class="line">1. formç»„ä»¶</span><br><span class="line">2. modelformç»„ä»¶</span><br><span class="line"></span><br><span class="line">###### 7.5.3.2 formç»„ä»¶</span><br><span class="line"></span><br><span class="line">~~~python</span><br><span class="line">class myform(django.form):</span><br><span class="line">    user = form.charField(weight=form.input)</span><br><span class="line">    </span><br><span class="line">def depart_edit(request):</span><br><span class="line">    form = myform() #å®ä¾‹åŒ–è‡ªå·±çš„è¡¨å•å¯¹è±¡</span><br><span class="line">    return render(requests,&quot;/depart/list/&quot;,&#123;&quot;form&quot;:form&#125;)</span><br></pre></td></tr></table></figure></li></ul><p>å‰ç«¯</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">    &#123;% for i in form %&#125;</span><br><span class="line">    &#123;i&#125; æˆ–è€… &#123;i.user&#125;</span><br><span class="line">    &#123;endfor&#125;i</span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><p>$\color{red}{formç»„ä»¶ä¼šæ“æˆä¸modelå¤§é‡é‡å¤ä»£ç  ä¸æ¨èä½¿ç”¨}$</p><h6 id="7-5-3-3-modelformç»„ä»¶"><a href="#7-5-3-3-modelformç»„ä»¶" class="headerlink" title="7.5.3.3   modelformç»„ä»¶"></a>7.5.3.3   <em>modelform</em>ç»„ä»¶</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å‰ç«¯ç”¨æ³•ä¸formç»„ä»¶ç›¸åŒ</span></span><br><span class="line"><span class="keyword">from</span> django.forms <span class="keyword">import</span> widgets <span class="keyword">as</span> wid  <span class="comment">#å› ä¸ºé‡åï¼Œæ‰€ä»¥èµ·ä¸ªåˆ«å</span></span><br><span class="line">        widgets = &#123;</span><br><span class="line">            <span class="string">&quot;name&quot;</span>:wid.TextInput(attrs=&#123;<span class="string">&#x27;class&#x27;</span>:<span class="string">&#x27;form-control&#x27;</span>&#125;),</span><br><span class="line">            <span class="string">&quot;age&quot;</span>:wid.NumberInput(attrs=&#123;<span class="string">&#x27;class&#x27;</span>:<span class="string">&#x27;form-control&#x27;</span>&#125;),</span><br><span class="line">            <span class="string">&quot;email&quot;</span>:wid.EmailInput(attrs=&#123;<span class="string">&#x27;class&#x27;</span>:<span class="string">&#x27;form-control&#x27;</span>&#125;)</span><br><span class="line">        &#125;</span><br><span class="line">  <span class="comment">#ç®€æ´å†™æ³•</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,*args,**kwargs</span>):</span><br><span class="line">    <span class="built_in">super</span>()__init(*args,**kwargs)</span><br><span class="line">    <span class="keyword">for</span> name,field <span class="keyword">in</span> self.fields.items():</span><br><span class="line">        field.wid.attrs = &#123;<span class="string">&#x27;class&#x27;</span>:<span class="string">&#x27;form-control&#x27;</span>&#125;)</span><br><span class="line"> <span class="comment">#æ·»åŠ æ ·å¼</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">userform</span>(<span class="title class_ inherited__">ModelForm</span>):</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = UserInfo</span><br><span class="line">        fields =<span class="string">&quot;__all__&quot;</span></span><br><span class="line">        exclude = [<span class="string">&quot;password&quot;</span>] </span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__(*args, **kwargs)</span><br><span class="line">        <span class="keyword">for</span> name, field <span class="keyword">in</span> self.fields.items():</span><br><span class="line">            field.widget.attrs = &#123;<span class="string">&quot;class&quot;</span>:<span class="string">&quot;form-control&quot;</span>&#125;</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">depart_list</span>(<span class="params">request</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&#x27;GET&#x27;</span>:</span><br><span class="line">        student_list = userform()</span><br><span class="line">        <span class="keyword">return</span> render(request,<span class="string">&#x27;student.html&#x27;</span>,&#123;<span class="string">&#x27;student_list&#x27;</span>:student_list&#125;)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        student_list = StudentList(request.POST)</span><br><span class="line">        <span class="keyword">if</span> student_list.is_valid():</span><br><span class="line">            student_list.save()</span><br><span class="line">        <span class="keyword">return</span> redirect(request,<span class="string">&#x27;student_list.html&#x27;</span>,&#123;<span class="string">&#x27;student_list&#x27;</span>:student_list&#125;)</span><br><span class="line">  <span class="comment">#ä¿å­˜æ•°æ®çš„æ—¶å€™ï¼Œä¸ç”¨æŒ¨ä¸ªå–æ•°æ®äº†ï¼Œåªéœ€è¦saveä¸€ä¸‹ã€‚</span></span><br><span class="line"><span class="comment">#åœ¨è§†å›¾å‡½æ•°å½“ä¸­çš„ ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">user_add</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">if</span> request.method == <span class="string">&quot;POST&quot;</span>:</span><br><span class="line">        myform = userform(data=request.POST)</span><br><span class="line">        <span class="keyword">if</span> myform.is_valid():</span><br><span class="line">            myform.save()</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&quot;msg&quot;</span>:<span class="string">&quot;å¤„ç†å®Œæˆ&quot;</span>&#125;)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(myform.errors)</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&quot;msg&quot;</span>:<span class="string">&quot;å¤„ç†å¤±è´¥ &quot;</span>,<span class="string">&quot;error_message&quot;</span>:myform.errors&#125;)</span><br><span class="line">        <span class="comment">#ç›´æ¥å­˜å‚¨æ•°æ® æˆ–è€…ä¿®æ”¹æ•°æ® </span></span><br><span class="line">        myform = userform(data=request.POST, instance=user_info.first())</span><br><span class="line">        myform.save()</span><br><span class="line">        </span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">    &#123;% for i in form %&#125;</span><br><span class="line">    &#123;&#123;i&#125;&#125; æˆ–è€… &#123;&#123;i.user&#125;&#125;</span><br><span class="line">    &#123;&#123;i.label&#125;&#125; æ˜¾ç¤ºæ•°æ®åº“é‡Œé¢çš„verbose_name</span><br><span class="line">    &#123;endfor&#125;i</span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="7-6-ç”¨æˆ·ç™»å½•éªŒè¯"><a href="#7-6-ç”¨æˆ·ç™»å½•éªŒè¯" class="headerlink" title="7.6. ç”¨æˆ·ç™»å½•éªŒè¯"></a>7.6. ç”¨æˆ·ç™»å½•éªŒè¯</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ­£åˆ™æ ¡éªŒæ‰‹æœºå·ç </span></span><br><span class="line"><span class="keyword">from</span> django.core.validators <span class="keyword">import</span> RegexValidator</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">myfrom</span>(<span class="title class_ inherited__">modelform</span>):</span><br><span class="line">    xx= form.chidel(<span class="string">&quot;&quot;</span>) <span class="comment"># å®šä¹‰modelæ²¡æœ‰çš„å­—æ®µ</span></span><br><span class="line">    moible = forms.CharField(label = <span class="string">&quot;æ‰‹æœºå·ç &quot;</span>ï¼Œvalidators=[RegexValidator(<span class="string">r&quot;^159[0-9]+$&quot;</span>,<span class="string">&#x27;å·ç å¿…é¡»ä»¥159å¼€å¤´ &#x27;</span>)])</span><br><span class="line"><span class="string">&quot;&quot;&quot;    </span></span><br><span class="line"><span class="string">1.å­—æ®µè§„åˆ™æ ¡éªŒï¼Œå­—ç¬¦é•¿åº¦ï¼Œæ˜¯å¦å¿…å¡«ç­‰åŸºæœ¬æ ¡éªŒ</span></span><br><span class="line"><span class="string">    2.validatorsæ ¡éªŒï¼ˆRegexValidatoræ ¡éªŒå™¨æˆ–è‡ªå®šä¹‰æ ¡éªŒå‡½æ•°ï¼‰</span></span><br><span class="line"><span class="string">    3.å±€éƒ¨é’©å­ï¼ˆç±»ä¸­å®šä¹‰çš„ä»¥clean_å­—æ®µåå‘½åçš„å‡½æ•°ï¼Œæ ¡éªŒæ­£å¸¸å¿…é¡»è¿”å›è¯¥å­—æ®µçš„å€¼self.cleaned_data.get(â€˜nameâ€™)ï¼‰</span></span><br><span class="line"><span class="string">    4.å…¨å±€é’©å­ï¼ˆç±»ä¸­å®šä¹‰çš„å‡½æ•°åcleanï¼Œæ ¡éªŒæ­£å¸¸å¿…é¡»è¿”å›è¯¥å¯¹è±¡çš„æ ¡éªŒç»“æœå€¼return self.cleaned_dataï¼‰</span></span><br><span class="line"><span class="string">    5.æ¯ä¸€æ­¥é€šè¿‡æ ¡éªŒå•ç»“æœéƒ½ä»¥å­—å…¸å½¢å¼ä¿å­˜åœ¨ç±»å¯¹è±¡çš„cleaned_dataå±æ€§ä¸­</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">      <span class="keyword">def</span> <span class="title function_">clean_city</span>(<span class="params">self</span>): <span class="comment"># å±€éƒ¨é’©å­å®šä¹‰åœ¨modelformåˆå§‹åŒ–çš„æ—¶å€™</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;å±€éƒ¨é’©å­åˆ¤æ–­åŸå¸‚å¿…é¡»æ˜¯åŒ—äº¬/ä¸Šæµ·/æ·±åœ³å…¶ä¸­ä¸€ä¸ª&quot;&quot;&quot;</span></span><br><span class="line">        city_val = self.cleaned_data.get(<span class="string">&#x27;city&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> city_val <span class="keyword">in</span> [<span class="string">&quot;åŒ—äº¬&quot;</span>, <span class="string">&quot;ä¸Šæµ·&quot;</span>, <span class="string">&quot;æ·±åœ³&quot;</span>]:</span><br><span class="line">            <span class="keyword">return</span> city_val</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> forms.ValidationError(<span class="string">&#x27;åŸå¸‚åªèƒ½é€‰:åŒ—äº¬/ä¸Šæµ·/æ·±åœ³&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åˆ†é¡µæ“ä½œ </span></span><br><span class="line"><span class="keyword">from</span> django.core.paginator <span class="keyword">import</span> Paginator <span class="comment">#å¯¼å…¥åˆ†é¡µç±»</span></span><br><span class="line">    query_set = Department.objects.<span class="built_in">all</span>()</span><br><span class="line">    paginator = Paginator(query_set, page_size) <span class="comment">#query_set modelå¯¹è±¡ï¼Œpage_size æ¯é¡µæ•°é‡</span></span><br><span class="line">    pages = paginator.page(index) <span class="comment"># index ä»£è¡¨ pagesæ˜¯æ˜¾ç¤ºç¬¬å‡ é¡µ</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">#json æ ¼å¼åŒ–modelå¯¹è±¡</span></span><br><span class="line"><span class="keyword">from</span> django.core <span class="keyword">import</span> serializers</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> JsonResponse <span class="comment"># </span></span><br><span class="line">user_info = UserInfo.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=request.GET.get(<span class="string">&quot;id&quot;</span>)).values(<span class="string">&quot;å­—æ®µ&quot;</span>)</span><br><span class="line">    user_info = UserInfo.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=request.GET.get(<span class="string">&quot;id&quot;</span>))</span><br><span class="line">    user_json = serializers.serialize(<span class="string">&quot;json&quot;</span>,user_info)</span><br><span class="line">      </span><br><span class="line">        <span class="comment">#ä¼šå°†æŸ¥è¯¢åˆ°çš„modeslå¯¹è±¡è½¬æ¢æˆjson</span></span><br><span class="line">        <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&quot;msg&quot;</span>:<span class="string">&quot;å¤„ç†å®Œæˆ&quot;</span>,<span class="string">&quot;user_info&quot;</span>:user_json&#125;)</span><br><span class="line">    <span class="comment">#è¿™è¾¹ä¹Ÿå¯ä»¥ä¸ç”¨serializersæ–¹æ³• ç”¨first()å¯ä»¥ç›´æ¥æ”¾è¿›jsonä¸­</span></span><br></pre></td></tr></table></figure><h6 id="cookieå’Œsession-è®¾ç½®"><a href="#cookieå’Œsession-è®¾ç½®" class="headerlink" title="cookieå’Œsession è®¾ç½®"></a>cookieå’Œsession è®¾ç½®</h6><ol><li>ä½¿ç”¨Djangoæ¡†æ¶è‡ªå¸¦çš„â€request.user.is_authenticated()â€æ–¹æ³•æ¥åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½•</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> request.user.is_authenticated():</span><br><span class="line"><span class="comment"># å¦‚æœç™»å½•è¿”å›ç”¨æˆ·æƒ³å»çš„é¡µé¢</span></span><br><span class="line"><span class="keyword">return</span> render(request, <span class="string">&quot;ç”¨æˆ·æƒ³å»é¡µé¢&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="comment"># æœªç™»å½•, é‡å®šå‘åˆ°ç”¨æˆ·ç™»å½•é¡µé¢</span></span><br><span class="line"><span class="keyword">return</span> redirect(reverse(<span class="string">&quot;ç™»å½•é¡µé¢&quot;</span>))</span><br></pre></td></tr></table></figure><ol start="2"><li>ä½¿ç”¨Djangoè‡ªå¸¦çš„login_requiredè£…é¥°å™¨(å†…éƒ¨å°±æ˜¯å°è£…äº†is_authenticated())åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½•</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.éœ€è¦åœ¨Djangoçš„settingsé…ç½®æ–‡ä»¶ä¸­æ·»åŠ å¦‚æœéªŒè¯ç™»å½•æœªé€šè¿‡éœ€è¦è·³è½¬çš„è·¯å¾„</span></span><br><span class="line"><span class="keyword">from</span> django.contrib.auth.decorators <span class="keyword">import</span> login_required</span><br><span class="line"><span class="meta">@login_required</span></span><br><span class="line">LOGIN_URL = <span class="string">&quot;/login/&quot;</span></span><br></pre></td></tr></table></figure><p>cookie å’Œsessionè®¾ç½®</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">request.session[] = <span class="string">&quot;&quot;</span> <span class="comment">#ç›¸å½“äºæ˜¯å­—å…¸æ“ä½œ</span></span><br></pre></td></tr></table></figure><p>å‰ç«¯ajaxå¦‚ä½•ç»•è¿‡ajdngo  csrfè®¤è¯</p><ol><li><p>è¯»å–æµè§ˆå™¨cookieå½“ä¸­çš„csrfå­—æ®µ</p></li><li><p>å¿½ç•¥éƒ¨åˆ†view çš„csrf</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.views.decorators.csrf <span class="keyword">import</span> csrf_exempt</span><br><span class="line"><span class="meta">@csrf_exempt</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task</span>(<span class="params">request</span>)</span><br><span class="line"><span class="comment">#è¢«è£…é¥°çš„å‡½æ•°å°†ä¸ä¼šè¿›è¡Œcsrfè®¤è¯</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="8-Djangoè·¯ç”±ä¸è§†å›¾è¯¦è§£"><a href="#8-Djangoè·¯ç”±ä¸è§†å›¾è¯¦è§£" class="headerlink" title="8. Djangoè·¯ç”±ä¸è§†å›¾è¯¦è§£"></a>8. <em>Django</em>è·¯ç”±ä¸è§†å›¾è¯¦è§£</h2><h3 id="8-1-path-ä¸-re-path-è·¯ç”±å‡½æ•°"><a href="#8-1-path-ä¸-re-path-è·¯ç”±å‡½æ•°" class="headerlink" title="8.1 path ä¸ re_path è·¯ç”±å‡½æ•°"></a>8.1 path ä¸ re_path è·¯ç”±å‡½æ•°</h3><p>re_pathå‡½æ•°å¯¹æ¯”pathï¼Œå¯ä»¥å®ç°æ›´åŠ å¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼è·¯ç”±è§„åˆ™</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">pathï¼ˆ<span class="string">&#x27;app2/&lt;uuid:id&gt;&#x27;</span>,view.show_uuid,name=<span class="string">&quot;show_uuid&quot;</span>ï¼‰</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">path æ­£åˆ™å‚æ•°</span></span><br><span class="line"><span class="string"> str : ä»»æ„éç©ºå­—ç¬¦ï¼Œä¸åŒ…å«â€œ/â€,é»˜è®¤ç±»å‹</span></span><br><span class="line"><span class="string"> int : åŒ¹é…0å’Œä»»æ„æ•´æ•°</span></span><br><span class="line"><span class="string"> slug ï¼šåŒ¹é…ä»»æ„ASCâ…¡å­—ç¬¦ã€è¿æ¥çº¿å’Œä¸‹åˆ’çº¿</span></span><br><span class="line"><span class="string"> uuid ï¼š åŒ¹é…ä¸€ä¸ªuuidæ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œè¯¥å¯¹è±¡å¿…é¡»åŒ…å«â€œ-â€ï¼Œæ‰€æœ‰å­—æ¯å¿…é¡»å°å†™ã€‚æ¯”å¦‚22221111-abcd-3cww-3321-123456789123</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">re_path(<span class="string">&#x27;app2/list/(?&lt;year&gt;\d&#123;4&#125;)/&#x27;</span>,view.article.<span class="built_in">list</span>)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">æ‰€ç”¨è§„åˆ™ä¸æ­£åˆ™è¡¨è¾¾å¼æ— å·®åˆ«</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">æ­¤ä¸Šä¸¤ç§æ–¹æ³•å…³é”®å‚æ•°éƒ½æ˜¯åœ¨&lt;&gt;ä¸­</span><br><span class="line">path(&lt;<span class="built_in">type</span>:<span class="built_in">type</span>&gt;)</span><br><span class="line">re_path(<span class="string">&#x27;(?&lt;name&gt;\d&#123;4&#125;)&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="8-2-åå‘è·¯ç”±è§£æå™¨"><a href="#8-2-åå‘è·¯ç”±è§£æå™¨" class="headerlink" title="8.2 åå‘è·¯ç”±è§£æå™¨"></a>8.2 åå‘è·¯ç”±è§£æå™¨</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pathï¼ˆ<span class="string">&#x27;app2/&lt;uuid:id&gt;&#x27;</span>,view.show_uuid,name=<span class="string">&quot;show_uuid&quot;</span>ï¼‰</span><br></pre></td></tr></table></figure><p>nameå¯ä»¥åœ¨HTMLä¸­ä½¿ç”¨ï¼Œæ ¹æ®nameå¾—åˆ°urlåœ°å€ã€‚å¥½å¤„æ˜¯nameä¸å˜ï¼Œurlå¯ä»¥éšæ„ä¿®æ”¹ã€‚</p><p>reverse() æ–¹æ³• å¯ä»¥æ ¹æ®name åå‘è§£æå‡ºè¿™ä¸ªnameä»£è¡¨çš„URL</p><h3 id="8-3-è§†å›¾å‡½æ•°çš„åº•å±‚å¤„ç†"><a href="#8-3-è§†å›¾å‡½æ•°çš„åº•å±‚å¤„ç†" class="headerlink" title="8.3 è§†å›¾å‡½æ•°çš„åº•å±‚å¤„ç†"></a>8.3 è§†å›¾å‡½æ•°çš„åº•å±‚å¤„ç†</h3><ol><li><p>HttpRequest å’Œ HttpResponse å¯¹è±¡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># HttpRequestå¯¹è±¡</span></span><br><span class="line">path  å­—ç¬¦ä¸²ï¼Œä¾¿æ˜¯è¯·æ±‚é¡µé¢çš„è·¯å¾„ï¼Œä¸åŒ…å«åŸŸå</span><br><span class="line">method å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºé¡µé¢è¯·æ±‚çš„æ–¹å¼ã€‚å¿…é¡»ä»¥å¤§å†™æ–¹å¼</span><br><span class="line">encoding å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæäº¤çš„æ•°æ®çš„ç¼–ç æ–¹å¼</span><br><span class="line">GET å­—å…¸ç±»å‹ï¼ŒåŒ…å«GETè¯·æ±‚æ–¹æ³•ä¸­çš„æ‰€æœ‰å‚æ•°</span><br><span class="line">POSt å­—å…¸ç±»å‹ï¼ŒåŒ…å«POStè¯·æ±‚æ–¹æ³•ä¸­çš„æ‰€æœ‰å‚æ•°</span><br><span class="line">FILE å­—å…¸ç±»å‹ï¼ŒåŒ…å«ä¸Šä¼ æ–‡ä»¶çš„ä¿¡æ¯</span><br><span class="line">COOKIES å­—å…¸ç±»å‹ï¼ŒåŒ…å«æ‰€æœ‰çš„cookieå¯¹è±¡</span><br><span class="line">session å­—å…¸ç±»å‹ï¼Œè¡¨ç¤ºå½“å‰ä¼šè¯</span><br><span class="line">META å­—å…¸ç±»å‹ï¼ŒåŒ…å«æ‰€æœ‰çš„HTTPå¤´éƒ¨ä¿¡æ¯ï¼Œå¦‚HTTP_USER_AGENTã€REMOTE_ADDR</span><br><span class="line">user è¡¨ç¤ºå½“å‰ç™»å½•ç”¨æˆ·</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>HttpResposne </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">å¸¸è§å‚æ•°</span></span><br><span class="line"><span class="string">content è¿”å›çš„å†…å®¹</span></span><br><span class="line"><span class="string">status_code è¿”å›çš„HTTPå“åº”çŠ¶æ€å—</span></span><br><span class="line"><span class="string">content-type è¿”å›çš„æ•°æ®çš„MIMEç±»å‹ï¼Œé»˜è®¤ä¸ºtext/html</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><h3 id="8-4-è§†å›¾å¤„ç†å‡½æ•°çš„ä½¿ç”¨"><a href="#8-4-è§†å›¾å¤„ç†å‡½æ•°çš„ä½¿ç”¨" class="headerlink" title="8.4 è§†å›¾å¤„ç†å‡½æ•°çš„ä½¿ç”¨"></a>8.4 è§†å›¾å¤„ç†å‡½æ•°çš„ä½¿ç”¨</h3><ol><li><p>render()å‡½æ•°</p>   <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcts <span class="keyword">import</span> render</span><br><span class="line">render(request,template_name,content=<span class="literal">None</span>,content_type=<span class="literal">None</span>,status=<span class="literal">None</span>ï¼Œusing=<span class="literal">None</span>)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">content: å­—å…¸ç±»å‹ï¼Œä¿å­˜è¦ä¼ åˆ°htmlçš„å˜é‡</span></span><br><span class="line"><span class="string">status: è¡¨ç¤ºå“åº”çš„çŠ¶æ€ä»£ç ï¼Œé»˜è®¤ä¸º200</span></span><br><span class="line"><span class="string">content_type: ç”¨äºç”Ÿæˆæ–‡æ¡£çš„MIMEç±»å‹ï¼Œé»˜è®¤ä¸ºtext/html</span></span><br><span class="line"><span class="string">usingï¼šè®¾ç½®æœ«ç­å¼•æ“ï¼Œç”¨äºè§£ææ¨¡æ¿æ–‡ä»¶</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>redict()å‡½æ•°<br>é‡å®šå‘çš„ä¸‰ç§æ–¹å¼</p><ol><li><p>é€šè¿‡è°ƒç”¨æ¨¡æ¿çš„get_absolute_url()å‡½æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UserInfo</span>(models.Model):</span><br><span class="line">    name=models.CharField(max_length=<span class="number">32</span>)                        <span class="comment"># primary_key = True</span></span><br><span class="line">    password = models.CharField(max_length=<span class="number">64</span>)                    <span class="comment"># ä¿®æ”¹è¡¨çš„æ—¶å€™ï¼Œå¯ä»¥ç›´æ¥æ·»åŠ ä¸€è¡Œæˆ–å»æ‰ã€‚ </span></span><br><span class="line">    age = models.IntegerField(default=<span class="number">2</span>)  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_absolute_url</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> reverse(<span class="string">&quot;url&quot;</span>,kwargs=&#123;<span class="string">&#x27;id&#x27;</span>:<span class="string">&quot;self.id&quot;</span>&#125;)</span><br></pre></td></tr></table></figure></li><li><p>é€šè¿‡è·¯ç”±åå‘è§£æè¿›è¡Œé‡å®šå‘</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">test_redict_view</span>(<span class="params">request,<span class="built_in">id</span></span>):</span><br><span class="line">    <span class="keyword">return</span> redirect(<span class="string">&quot;url&quot;</span>,<span class="built_in">id</span>)</span><br></pre></td></tr></table></figure></li><li><p>é€šè¿‡ç»å¯¹çš„æˆ–è€…ç›¸å¯¹çš„urlè¿›è¡Œé‡å®šå‘</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> redirect(<span class="string">&quot;https://&quot;</span>)</span><br></pre></td></tr></table></figure></li></ol></li></ol>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DJANGO </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>rabbitmqå­¦ä¹ ç¬”è®°</title>
      <link href="/2022/10/23/python-RabbitMQ%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E9%9B%86%E7%BE%A4%E6%9E%B6%E6%9E%84/"/>
      <url>/2022/10/23/python-RabbitMQ%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E9%9B%86%E7%BE%A4%E6%9E%B6%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<h1 id="python-RabbitMQä»å…¥é—¨åˆ°é›†ç¾¤æ¶æ„"><a href="#python-RabbitMQä»å…¥é—¨åˆ°é›†ç¾¤æ¶æ„" class="headerlink" title="python-RabbitMQä»å…¥é—¨åˆ°é›†ç¾¤æ¶æ„"></a>python-RabbitMQä»å…¥é—¨åˆ°é›†ç¾¤æ¶æ„</h1><h2 id="1-python-RabbitMQä»å…¥é—¨åˆ°é›†ç¾¤æ¶æ„"><a href="#1-python-RabbitMQä»å…¥é—¨åˆ°é›†ç¾¤æ¶æ„" class="headerlink" title="1. python-RabbitMQä»å…¥é—¨åˆ°é›†ç¾¤æ¶æ„"></a>1. python-RabbitMQä»å…¥é—¨åˆ°é›†ç¾¤æ¶æ„</h2><figure class="highlight do"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># å®‰è£…å¥½Dockerï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤</span><br><span class="line">docker pull rabbitmq:management</span><br><span class="line">docker <span class="keyword">run</span> -<span class="keyword">di</span> --name Myrabbitmq -<span class="keyword">e</span> RABBITMQ_DEFAULT_USER=admin -<span class="keyword">e</span> RABBITMQ_DEFAULT_PASS=admin -p 15672:15672 -p 5672:5672 rabbitmq:management</span><br><span class="line"># æµè§ˆå™¨è®¿é—®ï¼š</span><br><span class="line">http:<span class="comment">//10.0.0.103:15672</span></span><br><span class="line"># è¾“å…¥ç”¨æˆ·åï¼šguest å¯†ç ï¼šguest ï¼Œè¿›å…¥åˆ°ç®¡ç†æ§åˆ¶å°</span><br></pre></td></tr></table></figure><h2 id="2-åŸºæœ¬ä½¿ç”¨"><a href="#2-åŸºæœ¬ä½¿ç”¨" class="headerlink" title="2.åŸºæœ¬ä½¿ç”¨"></a>2.åŸºæœ¬ä½¿ç”¨</h2><h3 id="2-1-åŸºæœ¬ä½¿ç”¨"><a href="#2-1-åŸºæœ¬ä½¿ç”¨" class="headerlink" title="2.1 åŸºæœ¬ä½¿ç”¨"></a>2.1 åŸºæœ¬ä½¿ç”¨</h3><h5 id="ç”Ÿäº§è€…"><a href="#ç”Ÿäº§è€…" class="headerlink" title="ç”Ÿäº§è€…"></a>ç”Ÿäº§è€…</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> pika</span><br><span class="line"><span class="comment"># æ— å¯†ç </span></span><br><span class="line"><span class="comment"># connection = pika.BlockingConnection(pika.ConnectionParameters(&#x27;127.0.0.1&#x27;))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æœ‰å¯†ç </span></span><br><span class="line">credentials = pika.PlainCredentials(<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;admin&quot;</span>)</span><br><span class="line">connection = pika.BlockingConnection(pika.ConnectionParameters(<span class="string">&#x27;101.133.225.166&#x27;</span>,credentials=credentials))</span><br><span class="line">channel = connection.channel()</span><br><span class="line"><span class="comment"># å£°æ˜ä¸€ä¸ªé˜Ÿåˆ—(åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—)</span></span><br><span class="line">channel.queue_declare(queue=<span class="string">&#x27;lqz&#x27;</span>)</span><br><span class="line"></span><br><span class="line">channel.basic_publish(exchange=<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">                      routing_key=<span class="string">&#x27;lqz&#x27;</span>, <span class="comment"># æ¶ˆæ¯é˜Ÿåˆ—åç§°</span></span><br><span class="line">                      body=<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line">connection.close()</span><br></pre></td></tr></table></figure><h5 id="æ¶ˆè´¹è€…"><a href="#æ¶ˆè´¹è€…" class="headerlink" title="æ¶ˆè´¹è€…"></a>æ¶ˆè´¹è€…</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> pika</span><br><span class="line"></span><br><span class="line">credentials = pika.PlainCredentials(<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;admin&quot;</span>)</span><br><span class="line">connection = pika.BlockingConnection(pika.ConnectionParameters(<span class="string">&#x27;101.133.225.166&#x27;</span>,credentials=credentials))</span><br><span class="line">channel = connection.channel()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å£°æ˜ä¸€ä¸ªé˜Ÿåˆ—(åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—)</span></span><br><span class="line">channel.queue_declare(queue=<span class="string">&#x27;lqz&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">callback</span>(<span class="params">ch, method, properties, body</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ¶ˆè´¹è€…æ¥å—åˆ°äº†ä»»åŠ¡: %r&quot;</span> % body)</span><br><span class="line"></span><br><span class="line">channel.basic_consume(queue=<span class="string">&#x27;lqz&#x27;</span>,on_message_callback=callback,auto_ack=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">channel.start_consuming()</span><br></pre></td></tr></table></figure><h3 id="2-2æ¶ˆæ¯å®‰å…¨ä¹‹ack"><a href="#2-2æ¶ˆæ¯å®‰å…¨ä¹‹ack" class="headerlink" title="2.2æ¶ˆæ¯å®‰å…¨ä¹‹ack"></a>2.2æ¶ˆæ¯å®‰å…¨ä¹‹ack</h3><h5 id="ç”Ÿäº§è€…-1"><a href="#ç”Ÿäº§è€…-1" class="headerlink" title="ç”Ÿäº§è€…"></a>ç”Ÿäº§è€…</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pika</span><br><span class="line"><span class="comment"># æ— å¯†ç </span></span><br><span class="line"><span class="comment"># connection = pika.BlockingConnection(pika.ConnectionParameters(&#x27;127.0.0.1&#x27;))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æœ‰å¯†ç </span></span><br><span class="line">credentials = pika.PlainCredentials(<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;admin&quot;</span>)</span><br><span class="line">connection = pika.BlockingConnection(pika.ConnectionParameters(<span class="string">&#x27;101.133.225.166&#x27;</span>,credentials=credentials))</span><br><span class="line">channel = connection.channel()</span><br><span class="line"><span class="comment"># å£°æ˜ä¸€ä¸ªé˜Ÿåˆ—(åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—)</span></span><br><span class="line">channel.queue_declare(queue=<span class="string">&#x27;lqz&#x27;</span>)</span><br><span class="line"></span><br><span class="line">channel.basic_publish(exchange=<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">                      routing_key=<span class="string">&#x27;lqz&#x27;</span>, <span class="comment"># æ¶ˆæ¯é˜Ÿåˆ—åç§°</span></span><br><span class="line">                      body=<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line">connection.close()</span><br></pre></td></tr></table></figure><h5 id="æ¶ˆè´¹è€…-1"><a href="#æ¶ˆè´¹è€…-1" class="headerlink" title="æ¶ˆè´¹è€…"></a>æ¶ˆè´¹è€…</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pika</span><br><span class="line"></span><br><span class="line">credentials = pika.PlainCredentials(<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;admin&quot;</span>)</span><br><span class="line">connection = pika.BlockingConnection(pika.ConnectionParameters(<span class="string">&#x27;101.133.225.166&#x27;</span>,credentials=credentials))</span><br><span class="line">channel = connection.channel()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å£°æ˜ä¸€ä¸ªé˜Ÿåˆ—(åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—)</span></span><br><span class="line">channel.queue_declare(queue=<span class="string">&#x27;lqz&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">callback</span>(<span class="params">ch, method, properties, body</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ¶ˆè´¹è€…æ¥å—åˆ°äº†ä»»åŠ¡: %r&quot;</span> % body)</span><br><span class="line">    <span class="comment"># é€šçŸ¥æœåŠ¡ç«¯ï¼Œæ¶ˆæ¯å–èµ°äº†ï¼Œå¦‚æœauto_ack=Falseï¼Œä¸åŠ ä¸‹é¢ï¼Œæ¶ˆæ¯ä¼šä¸€ç›´å­˜åœ¨</span></span><br><span class="line">    <span class="comment"># ch.basic_ack(delivery_tag=method.delivery_tag)</span></span><br><span class="line"></span><br><span class="line">channel.basic_consume(queue=<span class="string">&#x27;lqz&#x27;</span>,on_message_callback=callback,auto_ack=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">channel.start_consuming()</span><br></pre></td></tr></table></figure><h3 id="2-3-æ¶ˆæ¯å®‰å…¨ä¹‹durableæŒä¹…åŒ–"><a href="#2-3-æ¶ˆæ¯å®‰å…¨ä¹‹durableæŒä¹…åŒ–" class="headerlink" title="2.3  æ¶ˆæ¯å®‰å…¨ä¹‹durableæŒä¹…åŒ–"></a>2.3  æ¶ˆæ¯å®‰å…¨ä¹‹durableæŒä¹…åŒ–</h3><h5 id="ç”Ÿäº§è€…-2"><a href="#ç”Ÿäº§è€…-2" class="headerlink" title="ç”Ÿäº§è€…"></a>ç”Ÿäº§è€…</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pika</span><br><span class="line"><span class="comment"># æ— å¯†ç </span></span><br><span class="line"><span class="comment"># connection = pika.BlockingConnection(pika.ConnectionParameters(&#x27;127.0.0.1&#x27;))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æœ‰å¯†ç </span></span><br><span class="line">credentials = pika.PlainCredentials(<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;admin&quot;</span>)</span><br><span class="line">connection = pika.BlockingConnection(pika.ConnectionParameters(<span class="string">&#x27;101.133.225.166&#x27;</span>,credentials=credentials))</span><br><span class="line">channel = connection.channel()</span><br><span class="line"><span class="comment"># å£°æ˜ä¸€ä¸ªé˜Ÿåˆ—(åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—),durable=Trueæ”¯æŒæŒä¹…åŒ–ï¼Œé˜Ÿåˆ—å¿…é¡»æ˜¯æ–°çš„æ‰å¯ä»¥</span></span><br><span class="line">channel.queue_declare(queue=<span class="string">&#x27;lqz1&#x27;</span>,durable=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">channel.basic_publish(exchange=<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">                      routing_key=<span class="string">&#x27;lqz1&#x27;</span>, <span class="comment"># æ¶ˆæ¯é˜Ÿåˆ—åç§°</span></span><br><span class="line">                      body=<span class="string">&#x27;111&#x27;</span>,</span><br><span class="line">                      properties=pika.BasicProperties(</span><br><span class="line">                          delivery_mode=<span class="number">2</span>,  <span class="comment"># make message persistent,æ¶ˆæ¯ä¹ŸæŒä¹…åŒ–</span></span><br><span class="line">                      )</span><br><span class="line">                      )</span><br><span class="line">connection.close()</span><br></pre></td></tr></table></figure><h5 id="æ¶ˆè´¹è€…-2"><a href="#æ¶ˆè´¹è€…-2" class="headerlink" title="æ¶ˆè´¹è€…"></a>æ¶ˆè´¹è€…</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pika</span><br><span class="line"></span><br><span class="line">credentials = pika.PlainCredentials(<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;admin&quot;</span>)</span><br><span class="line">connection = pika.BlockingConnection(pika.ConnectionParameters(<span class="string">&#x27;101.133.225.166&#x27;</span>,credentials=credentials))</span><br><span class="line">channel = connection.channel()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å£°æ˜ä¸€ä¸ªé˜Ÿåˆ—(åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—)</span></span><br><span class="line">channel.queue_declare(queue=<span class="string">&#x27;lqz1&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">callback</span>(<span class="params">ch, method, properties, body</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ¶ˆè´¹è€…æ¥å—åˆ°äº†ä»»åŠ¡: %r&quot;</span> % body)</span><br><span class="line">    <span class="comment"># é€šçŸ¥æœåŠ¡ç«¯ï¼Œæ¶ˆæ¯å–èµ°äº†ï¼Œå¦‚æœauto_ack=Falseï¼Œä¸åŠ ä¸‹é¢ï¼Œæ¶ˆæ¯ä¼šä¸€ç›´å­˜åœ¨</span></span><br><span class="line">    <span class="comment"># ch.basic_ack(delivery_tag=method.delivery_tag)</span></span><br><span class="line"></span><br><span class="line">channel.basic_consume(queue=<span class="string">&#x27;lqz1&#x27;</span>,on_message_callback=callback,auto_ack=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">channel.start_consuming()</span><br></pre></td></tr></table></figure><h3 id="2-4-é—²ç½®æ¶ˆè´¹"><a href="#2-4-é—²ç½®æ¶ˆè´¹" class="headerlink" title="2.4 é—²ç½®æ¶ˆè´¹"></a>2.4 é—²ç½®æ¶ˆè´¹</h3><h5 id="ç”Ÿäº§è€…-3"><a href="#ç”Ÿäº§è€…-3" class="headerlink" title="ç”Ÿäº§è€…"></a>ç”Ÿäº§è€…</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pika</span><br><span class="line"><span class="comment"># æ— å¯†ç </span></span><br><span class="line"><span class="comment"># connection = pika.BlockingConnection(pika.ConnectionParameters(&#x27;127.0.0.1&#x27;))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æœ‰å¯†ç </span></span><br><span class="line">credentials = pika.PlainCredentials(<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;admin&quot;</span>)</span><br><span class="line">connection = pika.BlockingConnection(pika.ConnectionParameters(<span class="string">&#x27;101.133.225.166&#x27;</span>,credentials=credentials))</span><br><span class="line">channel = connection.channel()</span><br><span class="line"><span class="comment"># å£°æ˜ä¸€ä¸ªé˜Ÿåˆ—(åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—),durable=Trueæ”¯æŒæŒä¹…åŒ–ï¼Œé˜Ÿåˆ—å¿…é¡»æ˜¯æ–°çš„æ‰å¯ä»¥</span></span><br><span class="line">channel.queue_declare(queue=<span class="string">&#x27;lqz123&#x27;</span>,durable=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">channel.basic_publish(exchange=<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">                      routing_key=<span class="string">&#x27;lqz123&#x27;</span>, <span class="comment"># æ¶ˆæ¯é˜Ÿåˆ—åç§°</span></span><br><span class="line">                      body=<span class="string">&#x27;111&#x27;</span>,</span><br><span class="line">                      properties=pika.BasicProperties(</span><br><span class="line">                          delivery_mode=<span class="number">2</span>,  <span class="comment"># make message persistent,æ¶ˆæ¯ä¹ŸæŒä¹…åŒ–</span></span><br><span class="line">                      )</span><br><span class="line">                      )</span><br><span class="line">connection.close()</span><br></pre></td></tr></table></figure><h5 id="æ¶ˆè´¹è€…-3"><a href="#æ¶ˆè´¹è€…-3" class="headerlink" title="æ¶ˆè´¹è€…"></a>æ¶ˆè´¹è€…</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pika</span><br><span class="line"><span class="comment"># æ— å¯†ç </span></span><br><span class="line"><span class="comment"># connection = pika.BlockingConnection(pika.ConnectionParameters(&#x27;127.0.0.1&#x27;))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æœ‰å¯†ç </span></span><br><span class="line">credentials = pika.PlainCredentials(<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;admin&quot;</span>)</span><br><span class="line">connection = pika.BlockingConnection(pika.ConnectionParameters(<span class="string">&#x27;101.133.225.166&#x27;</span>,credentials=credentials))</span><br><span class="line">channel = connection.channel()</span><br><span class="line"><span class="comment"># å£°æ˜ä¸€ä¸ªé˜Ÿåˆ—(åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—),durable=Trueæ”¯æŒæŒä¹…åŒ–ï¼Œé˜Ÿåˆ—å¿…é¡»æ˜¯æ–°çš„æ‰å¯ä»¥</span></span><br><span class="line">channel.queue_declare(queue=<span class="string">&#x27;lqz123&#x27;</span>,durable=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">channel.basic_publish(exchange=<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">                      routing_key=<span class="string">&#x27;lqz123&#x27;</span>, <span class="comment"># æ¶ˆæ¯é˜Ÿåˆ—åç§°</span></span><br><span class="line">                      body=<span class="string">&#x27;111&#x27;</span>,</span><br><span class="line">                      properties=pika.BasicProperties(</span><br><span class="line">                          delivery_mode=<span class="number">2</span>,  <span class="comment"># make message persistent,æ¶ˆæ¯ä¹ŸæŒä¹…åŒ–</span></span><br><span class="line">                      )</span><br><span class="line">                      )</span><br><span class="line">connection.close()</span><br></pre></td></tr></table></figure><h3 id="2-5-å‘å¸ƒè®¢é˜…"><a href="#2-5-å‘å¸ƒè®¢é˜…" class="headerlink" title="2.5 å‘å¸ƒè®¢é˜…"></a>2.5 å‘å¸ƒè®¢é˜…</h3><h5 id="ç”Ÿäº§è€…-4"><a href="#ç”Ÿäº§è€…-4" class="headerlink" title="ç”Ÿäº§è€…"></a>ç”Ÿäº§è€…</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pika</span><br><span class="line">credentials = pika.PlainCredentials(<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;admin&quot;</span>)</span><br><span class="line">connection = pika.BlockingConnection(pika.ConnectionParameters(<span class="string">&#x27;101.133.225.166&#x27;</span>,credentials=credentials))</span><br><span class="line">channel = connection.channel()</span><br><span class="line"></span><br><span class="line">channel.exchange_declare(exchange=<span class="string">&#x27;m1&#x27;</span>,exchange_type=<span class="string">&#x27;fanout&#x27;</span>)</span><br><span class="line"></span><br><span class="line">channel.basic_publish(exchange=<span class="string">&#x27;m1&#x27;</span>,</span><br><span class="line">                      routing_key=<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">                      body=<span class="string">&#x27;lqz nb&#x27;</span>)</span><br><span class="line"></span><br><span class="line">connection.close()</span><br></pre></td></tr></table></figure><h5 id="è®¢é˜…è€…-å¯åŠ¨å‡ æ¬¡è®¢é˜…è€…ä¼šç”Ÿæˆå‡ ä¸ªé˜Ÿåˆ—"><a href="#è®¢é˜…è€…-å¯åŠ¨å‡ æ¬¡è®¢é˜…è€…ä¼šç”Ÿæˆå‡ ä¸ªé˜Ÿåˆ—" class="headerlink" title="è®¢é˜…è€…(å¯åŠ¨å‡ æ¬¡è®¢é˜…è€…ä¼šç”Ÿæˆå‡ ä¸ªé˜Ÿåˆ—)"></a>è®¢é˜…è€…(å¯åŠ¨å‡ æ¬¡è®¢é˜…è€…ä¼šç”Ÿæˆå‡ ä¸ªé˜Ÿåˆ—)</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pika</span><br><span class="line"></span><br><span class="line">credentials = pika.PlainCredentials(<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;admin&quot;</span>)</span><br><span class="line">connection = pika.BlockingConnection(pika.ConnectionParameters(<span class="string">&#x27;101.133.225.166&#x27;</span>,credentials=credentials))</span><br><span class="line">channel = connection.channel()</span><br><span class="line"></span><br><span class="line"><span class="comment"># exchange=&#x27;m1&#x27;,exchange(ç§˜ä¹¦)çš„åç§°</span></span><br><span class="line"><span class="comment"># exchange_type=&#x27;fanout&#x27; , ç§˜ä¹¦å·¥ä½œæ–¹å¼å°†æ¶ˆæ¯å‘é€ç»™æ‰€æœ‰çš„é˜Ÿåˆ—</span></span><br><span class="line">channel.exchange_declare(exchange=<span class="string">&#x27;m1&#x27;</span>,exchange_type=<span class="string">&#x27;fanout&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># éšæœºç”Ÿæˆä¸€ä¸ªé˜Ÿåˆ—</span></span><br><span class="line">result = channel.queue_declare(queue=<span class="string">&#x27;&#x27;</span>,exclusive=<span class="literal">True</span>)</span><br><span class="line">queue_name = result.method.queue</span><br><span class="line"><span class="built_in">print</span>(queue_name)</span><br><span class="line"><span class="comment"># è®©exchangeå’Œquequeè¿›è¡Œç»‘å®š.</span></span><br><span class="line">channel.queue_bind(exchange=<span class="string">&#x27;m1&#x27;</span>,queue=queue_name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">callback</span>(<span class="params">ch, method, properties, body</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ¶ˆè´¹è€…æ¥å—åˆ°äº†ä»»åŠ¡: %r&quot;</span> % body)</span><br><span class="line"></span><br><span class="line">channel.basic_consume(queue=queue_name,on_message_callback=callback,auto_ack=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">channel.start_consuming()</span><br></pre></td></tr></table></figure><h3 id="2-6-å‘å¸ƒè®¢é˜…é«˜çº§ä¹‹Routing-æŒ‰å…³é”®å­—åŒ¹é…"><a href="#2-6-å‘å¸ƒè®¢é˜…é«˜çº§ä¹‹Routing-æŒ‰å…³é”®å­—åŒ¹é…" class="headerlink" title="2.6 å‘å¸ƒè®¢é˜…é«˜çº§ä¹‹Routing(æŒ‰å…³é”®å­—åŒ¹é…)"></a>2.6 å‘å¸ƒè®¢é˜…é«˜çº§ä¹‹Routing(æŒ‰å…³é”®å­—åŒ¹é…)</h3><h5 id="å‘å¸ƒè€…"><a href="#å‘å¸ƒè€…" class="headerlink" title="å‘å¸ƒè€…"></a>å‘å¸ƒè€…</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pika</span><br><span class="line">credentials = pika.PlainCredentials(<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;admin&quot;</span>)</span><br><span class="line">connection = pika.BlockingConnection(pika.ConnectionParameters(<span class="string">&#x27;101.133.225.166&#x27;</span>,credentials=credentials))</span><br><span class="line">channel = connection.channel()</span><br><span class="line"></span><br><span class="line">channel.exchange_declare(exchange=<span class="string">&#x27;m2&#x27;</span>,exchange_type=<span class="string">&#x27;direct&#x27;</span>)</span><br><span class="line"></span><br><span class="line">channel.basic_publish(exchange=<span class="string">&#x27;m2&#x27;</span>,</span><br><span class="line">                      routing_key=<span class="string">&#x27;bnb&#x27;</span>, <span class="comment"># å¤šä¸ªå…³é”®å­—ï¼ŒæŒ‡å®šrouting_key</span></span><br><span class="line">                      body=<span class="string">&#x27;lqz nb&#x27;</span>)</span><br><span class="line"></span><br><span class="line">connection.close()</span><br></pre></td></tr></table></figure><h5 id="è®¢é˜…è€…1"><a href="#è®¢é˜…è€…1" class="headerlink" title="è®¢é˜…è€…1"></a>è®¢é˜…è€…1</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pika</span><br><span class="line"></span><br><span class="line">credentials = pika.PlainCredentials(<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;admin&quot;</span>)</span><br><span class="line">connection = pika.BlockingConnection(pika.ConnectionParameters(<span class="string">&#x27;101.133.225.166&#x27;</span>,credentials=credentials))</span><br><span class="line">channel = connection.channel()</span><br><span class="line"></span><br><span class="line"><span class="comment"># exchange=&#x27;m1&#x27;,exchange(ç§˜ä¹¦)çš„åç§°</span></span><br><span class="line"><span class="comment"># exchange_type=&#x27;direct&#x27; , ç§˜ä¹¦å·¥ä½œæ–¹å¼å°†æ¶ˆæ¯å‘é€ç»™ä¸åŒçš„å…³é”®å­—</span></span><br><span class="line">channel.exchange_declare(exchange=<span class="string">&#x27;m2&#x27;</span>,exchange_type=<span class="string">&#x27;direct&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># éšæœºç”Ÿæˆä¸€ä¸ªé˜Ÿåˆ—</span></span><br><span class="line">result = channel.queue_declare(queue=<span class="string">&#x27;&#x27;</span>,exclusive=<span class="literal">True</span>)</span><br><span class="line">queue_name = result.method.queue</span><br><span class="line"><span class="built_in">print</span>(queue_name)</span><br><span class="line"><span class="comment"># è®©exchangeå’Œquequeè¿›è¡Œç»‘å®š.</span></span><br><span class="line">channel.queue_bind(exchange=<span class="string">&#x27;m2&#x27;</span>,queue=queue_name,routing_key=<span class="string">&#x27;nb&#x27;</span>)</span><br><span class="line">channel.queue_bind(exchange=<span class="string">&#x27;m2&#x27;</span>,queue=queue_name,routing_key=<span class="string">&#x27;bnb&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">callback</span>(<span class="params">ch, method, properties, body</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ¶ˆè´¹è€…æ¥å—åˆ°äº†ä»»åŠ¡: %r&quot;</span> % body)</span><br><span class="line"></span><br><span class="line">channel.basic_consume(queue=queue_name,on_message_callback=callback,auto_ack=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">channel.start_consuming()</span><br></pre></td></tr></table></figure><h5 id="è®¢é˜…è€…2"><a href="#è®¢é˜…è€…2" class="headerlink" title="è®¢é˜…è€…2"></a>è®¢é˜…è€…2</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pika</span><br><span class="line"></span><br><span class="line">credentials = pika.PlainCredentials(<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;admin&quot;</span>)</span><br><span class="line">connection = pika.BlockingConnection(pika.ConnectionParameters(<span class="string">&#x27;101.133.225.166&#x27;</span>,credentials=credentials))</span><br><span class="line">channel = connection.channel()</span><br><span class="line"></span><br><span class="line"><span class="comment"># exchange=&#x27;m1&#x27;,exchange(ç§˜ä¹¦)çš„åç§°</span></span><br><span class="line"><span class="comment"># exchange_type=&#x27;direct&#x27; , ç§˜ä¹¦å·¥ä½œæ–¹å¼å°†æ¶ˆæ¯å‘é€ç»™ä¸åŒçš„å…³é”®å­—</span></span><br><span class="line">channel.exchange_declare(exchange=<span class="string">&#x27;m2&#x27;</span>,exchange_type=<span class="string">&#x27;direct&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># éšæœºç”Ÿæˆä¸€ä¸ªé˜Ÿåˆ—</span></span><br><span class="line">result = channel.queue_declare(queue=<span class="string">&#x27;&#x27;</span>,exclusive=<span class="literal">True</span>)</span><br><span class="line">queue_name = result.method.queue</span><br><span class="line"><span class="built_in">print</span>(queue_name)</span><br><span class="line"><span class="comment"># è®©exchangeå’Œquequeè¿›è¡Œç»‘å®š.</span></span><br><span class="line">channel.queue_bind(exchange=<span class="string">&#x27;m2&#x27;</span>,queue=queue_name,routing_key=<span class="string">&#x27;nb&#x27;</span>)</span><br><span class="line">channel.queue_bind(exchange=<span class="string">&#x27;m2&#x27;</span>,queue=queue_name,routing_key=<span class="string">&#x27;bnb&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">callback</span>(<span class="params">ch, method, properties, body</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ¶ˆè´¹è€…æ¥å—åˆ°äº†ä»»åŠ¡: %r&quot;</span> % body)</span><br><span class="line"></span><br><span class="line">channel.basic_consume(queue=queue_name,on_message_callback=callback,auto_ack=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">channel.start_consuming()</span><br></pre></td></tr></table></figure><h3 id="2-7-å‘å¸ƒè®¢é˜…é«˜çº§ä¹‹Topic-æŒ‰å…³é”®å­—æ¨¡ç³ŠåŒ¹é…"><a href="#2-7-å‘å¸ƒè®¢é˜…é«˜çº§ä¹‹Topic-æŒ‰å…³é”®å­—æ¨¡ç³ŠåŒ¹é…" class="headerlink" title="2.7 å‘å¸ƒè®¢é˜…é«˜çº§ä¹‹Topic(æŒ‰å…³é”®å­—æ¨¡ç³ŠåŒ¹é…)"></a>2.7 å‘å¸ƒè®¢é˜…é«˜çº§ä¹‹Topic(æŒ‰å…³é”®å­—æ¨¡ç³ŠåŒ¹é…)</h3><h4 id="å‘å¸ƒè€…-1"><a href="#å‘å¸ƒè€…-1" class="headerlink" title="å‘å¸ƒè€…"></a>å‘å¸ƒè€…</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pika</span><br><span class="line">credentials = pika.PlainCredentials(<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;admin&quot;</span>)</span><br><span class="line">connection = pika.BlockingConnection(pika.ConnectionParameters(<span class="string">&#x27;101.133.225.166&#x27;</span>,credentials=credentials))</span><br><span class="line">channel = connection.channel()</span><br><span class="line"></span><br><span class="line">channel.exchange_declare(exchange=<span class="string">&#x27;m3&#x27;</span>,exchange_type=<span class="string">&#x27;topic&#x27;</span>)</span><br><span class="line"></span><br><span class="line">channel.basic_publish(exchange=<span class="string">&#x27;m3&#x27;</span>,</span><br><span class="line">                      <span class="comment"># routing_key=&#x27;lqz.handsome&#x27;, #éƒ½èƒ½æ”¶åˆ°</span></span><br><span class="line">                      routing_key=<span class="string">&#x27;lqz.handsome.xx&#x27;</span>, <span class="comment">#åªæœ‰lqz.#èƒ½æ”¶åˆ°</span></span><br><span class="line">                      body=<span class="string">&#x27;lqz nb&#x27;</span>)</span><br><span class="line"></span><br><span class="line">connection.close()</span><br></pre></td></tr></table></figure><h4 id="è®¢é˜…è€…1-åªèƒ½åŠ ä¸€ä¸ªå•è¯"><a href="#è®¢é˜…è€…1-åªèƒ½åŠ ä¸€ä¸ªå•è¯" class="headerlink" title="è®¢é˜…è€…1 åªèƒ½åŠ ä¸€ä¸ªå•è¯"></a>è®¢é˜…è€…1 åªèƒ½åŠ ä¸€ä¸ªå•è¯</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pika</span><br><span class="line"></span><br><span class="line">credentials = pika.PlainCredentials(<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;admin&quot;</span>)</span><br><span class="line">connection = pika.BlockingConnection(pika.ConnectionParameters(<span class="string">&#x27;101.133.225.166&#x27;</span>,credentials=credentials))</span><br><span class="line">channel = connection.channel()</span><br><span class="line"></span><br><span class="line"><span class="comment"># exchange=&#x27;m1&#x27;,exchange(ç§˜ä¹¦)çš„åç§°</span></span><br><span class="line"><span class="comment"># exchange_type=&#x27;direct&#x27; , ç§˜ä¹¦å·¥ä½œæ–¹å¼å°†æ¶ˆæ¯å‘é€ç»™ä¸åŒçš„å…³é”®å­—</span></span><br><span class="line">channel.exchange_declare(exchange=<span class="string">&#x27;m3&#x27;</span>,exchange_type=<span class="string">&#x27;topic&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># éšæœºç”Ÿæˆä¸€ä¸ªé˜Ÿåˆ—</span></span><br><span class="line">result = channel.queue_declare(queue=<span class="string">&#x27;&#x27;</span>,exclusive=<span class="literal">True</span>)</span><br><span class="line">queue_name = result.method.queue</span><br><span class="line"><span class="built_in">print</span>(queue_name)</span><br><span class="line"><span class="comment"># è®©exchangeå’Œquequeè¿›è¡Œç»‘å®š.</span></span><br><span class="line">channel.queue_bind(exchange=<span class="string">&#x27;m3&#x27;</span>,queue=queue_name,routing_key=<span class="string">&#x27;lqz.#&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">callback</span>(<span class="params">ch, method, properties, body</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ¶ˆè´¹è€…æ¥å—åˆ°äº†ä»»åŠ¡: %r&quot;</span> % body)</span><br><span class="line"></span><br><span class="line">channel.basic_consume(queue=queue_name,on_message_callback=callback,auto_ack=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">channel.start_consuming()</span><br></pre></td></tr></table></figure><h4 id="è®¢é˜…è€…2-1"><a href="#è®¢é˜…è€…2-1" class="headerlink" title="è®¢é˜…è€…2"></a>è®¢é˜…è€…2</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pika</span><br><span class="line"></span><br><span class="line">credentials = pika.PlainCredentials(<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;admin&quot;</span>)</span><br><span class="line">connection = pika.BlockingConnection(pika.ConnectionParameters(<span class="string">&#x27;101.133.225.166&#x27;</span>,credentials=credentials))</span><br><span class="line">channel = connection.channel()</span><br><span class="line"></span><br><span class="line"><span class="comment"># exchange=&#x27;m1&#x27;,exchange(ç§˜ä¹¦)çš„åç§°</span></span><br><span class="line"><span class="comment"># exchange_type=&#x27;topic&#x27; , æ¨¡ç³ŠåŒ¹é…</span></span><br><span class="line">channel.exchange_declare(exchange=<span class="string">&#x27;m3&#x27;</span>,exchange_type=<span class="string">&#x27;topic&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># éšæœºç”Ÿæˆä¸€ä¸ªé˜Ÿåˆ—</span></span><br><span class="line">result = channel.queue_declare(queue=<span class="string">&#x27;&#x27;</span>,exclusive=<span class="literal">True</span>)</span><br><span class="line">queue_name = result.method.queue</span><br><span class="line"><span class="built_in">print</span>(queue_name)</span><br><span class="line"><span class="comment"># è®©exchangeå’Œquequeè¿›è¡Œç»‘å®š.</span></span><br><span class="line">channel.queue_bind(exchange=<span class="string">&#x27;m3&#x27;</span>,queue=queue_name,routing_key=<span class="string">&#x27;lqz.*&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">callback</span>(<span class="params">ch, method, properties, body</span>):</span><br><span class="line">    queue_name = result.method.queue <span class="comment"># å‘é€çš„routing_keyæ˜¯ä»€ä¹ˆ</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ¶ˆè´¹è€…æ¥å—åˆ°äº†ä»»åŠ¡: %r&quot;</span> % body)</span><br><span class="line"></span><br><span class="line">channel.basic_consume(queue=queue_name,on_message_callback=callback,auto_ack=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">channel.start_consuming()</span><br></pre></td></tr></table></figure><h3 id="2-8-åŸºäºrabbitmqå®ç°rpc"><a href="#2-8-åŸºäºrabbitmqå®ç°rpc" class="headerlink" title="2.8 åŸºäºrabbitmqå®ç°rpc"></a>2.8 åŸºäºrabbitmqå®ç°rpc</h3><h4 id="æœåŠ¡ç«¯"><a href="#æœåŠ¡ç«¯" class="headerlink" title="æœåŠ¡ç«¯"></a>æœåŠ¡ç«¯</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pika</span><br><span class="line">credentials = pika.PlainCredentials(<span class="string">&quot;admin&quot;</span>,<span class="string">&quot;admin&quot;</span>)</span><br><span class="line">connection = pika.BlockingConnection(pika.ConnectionParameters(<span class="string">&#x27;101.133.225.166&#x27;</span>,credentials=credentials))</span><br><span class="line">channel = connection.channel()</span><br><span class="line"></span><br><span class="line"><span class="comment"># èµ·ç¿°ç›‘å¬ä»»åŠ¡é˜Ÿåˆ—</span></span><br><span class="line">channel.queue_declare(queue=<span class="string">&#x27;rpc_queue&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">on_request</span>(<span class="params">ch, method, props, body</span>):</span><br><span class="line">    n = <span class="built_in">int</span>(body)</span><br><span class="line">    response = n + <span class="number">100</span></span><br><span class="line">    <span class="comment"># props.reply_to  è¦æ”¾ç»“æœçš„é˜Ÿåˆ—.</span></span><br><span class="line">    <span class="comment"># props.correlation_id  ä»»åŠ¡</span></span><br><span class="line">    ch.basic_publish(exchange=<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">                     routing_key=props.reply_to,</span><br><span class="line">                     properties=pika.BasicProperties(correlation_id= props.correlation_id),</span><br><span class="line">                     body=<span class="built_in">str</span>(response))</span><br><span class="line">    ch.basic_ack(delivery_tag=method.delivery_tag)</span><br><span class="line"></span><br><span class="line">channel.basic_qos(prefetch_count=<span class="number">1</span>)</span><br><span class="line">channel.basic_consume( queue=<span class="string">&#x27;rpc_queue&#x27;</span>,on_message_callback=on_request,)</span><br><span class="line">channel.start_consuming()</span><br></pre></td></tr></table></figure><h4 id="å®¢æˆ·ç«¯"><a href="#å®¢æˆ·ç«¯" class="headerlink" title="å®¢æˆ·ç«¯"></a>å®¢æˆ·ç«¯</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pika</span><br><span class="line"><span class="keyword">import</span> uuid</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FibonacciRpcClient</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        credentials = pika.PlainCredentials(<span class="string">&quot;admin&quot;</span>, <span class="string">&quot;admin&quot;</span>)</span><br><span class="line">        self.connection = pika.BlockingConnection(pika.ConnectionParameters(<span class="string">&#x27;101.133.225.166&#x27;</span>, credentials=credentials))</span><br><span class="line">        self.channel = self.connection.channel()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># éšæœºç”Ÿæˆä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—(ç”¨äºæ¥æ”¶ç»“æœ)</span></span><br><span class="line">        result = self.channel.queue_declare(queue=<span class="string">&#x27;&#x27;</span>,exclusive=<span class="literal">True</span>)</span><br><span class="line">        self.callback_queue = result.method.queue</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ç›‘å¬æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ˜¯å¦æœ‰å€¼è¿”å›,å¦‚æœæœ‰å€¼åˆ™æ‰§è¡Œ on_response å‡½æ•°(ä¸€æ—¦æœ‰ç»“æœ,åˆ™æ‰§è¡Œon_response)</span></span><br><span class="line">        self.channel.basic_consume(queue=self.callback_queue,on_message_callback=self.on_response, auto_ack=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">on_response</span>(<span class="params">self, ch, method, props, body</span>):</span><br><span class="line">        <span class="keyword">if</span> self.corr_id == props.correlation_id:</span><br><span class="line">            self.response = body</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">call</span>(<span class="params">self, n</span>):</span><br><span class="line">        self.response = <span class="literal">None</span></span><br><span class="line">        self.corr_id = <span class="built_in">str</span>(uuid.uuid4())</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å®¢æˆ·ç«¯ ç»™ æœåŠ¡ç«¯ å‘é€ä¸€ä¸ªä»»åŠ¡:  ä»»åŠ¡id = corr_id / ä»»åŠ¡å†…å®¹ = &#x27;30&#x27; / ç”¨äºæ¥æ”¶ç»“æœçš„é˜Ÿåˆ—åç§°</span></span><br><span class="line">        self.channel.basic_publish(exchange=<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">                                   routing_key=<span class="string">&#x27;rpc_queue&#x27;</span>, <span class="comment"># æœåŠ¡ç«¯æ¥æ”¶ä»»åŠ¡çš„é˜Ÿåˆ—åç§°</span></span><br><span class="line">                                   properties=pika.BasicProperties(</span><br><span class="line">                                         reply_to = self.callback_queue, <span class="comment"># ç”¨äºæ¥æ”¶ç»“æœçš„é˜Ÿåˆ—</span></span><br><span class="line">                                         correlation_id = self.corr_id, <span class="comment"># ä»»åŠ¡ID</span></span><br><span class="line">                                         ),</span><br><span class="line">                                   body=<span class="built_in">str</span>(n))</span><br><span class="line">        <span class="keyword">while</span> self.response <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            self.connection.process_data_events()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> self.response</span><br><span class="line"></span><br><span class="line">fibonacci_rpc = FibonacciRpcClient()</span><br><span class="line"></span><br><span class="line">response = fibonacci_rpc.call(<span class="number">50</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;è¿”å›ç»“æœ:&#x27;</span>,response)</span><br></pre></td></tr></table></figure><h2 id="3-é›†ç¾¤æ­å»º"><a href="#3-é›†ç¾¤æ­å»º" class="headerlink" title="3 é›†ç¾¤æ­å»º"></a>3 é›†ç¾¤æ­å»º</h2><h3 id="3-1-æ™®é€šé›†ç¾¤-å‰¯æœ¬é›†ç¾¤"><a href="#3-1-æ™®é€šé›†ç¾¤-å‰¯æœ¬é›†ç¾¤" class="headerlink" title="3.1 æ™®é€šé›†ç¾¤(å‰¯æœ¬é›†ç¾¤)"></a>3.1 æ™®é€šé›†ç¾¤(å‰¯æœ¬é›†ç¾¤)</h3><p>é»˜è®¤æƒ…å†µä¸‹:RabbitMQä»£ç†æ“ä½œæ‰€éœ€çš„æ‰€æœ‰æ•°æ®&#x2F;çŠ¶æ€éƒ½å°†è·¨æ‰€æœ‰èŠ‚ç‚¹å¤åˆ¶ã€‚è¿™æ–¹é¢çš„ä¸€ä¸ªä¾‹å¤–æ˜¯æ¶ˆæ¯é˜Ÿåˆ—ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ä½äºä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œå°½ç®¡å®ƒä»¬å¯ä»¥ä»æ‰€æœ‰èŠ‚ç‚¹çœ‹åˆ°å’Œè®¿é—®<br>æ™®é€šé›†ç¾¤ä¸»èŠ‚ç‚¹å¿…é¡»å¯ç”¨ï¼Œå¯ä»¥åŒæ­¥äº¤æ¢æœºå’Œé˜Ÿåˆ—ï¼Œä½†æ˜¯é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯åªèƒ½çœ‹åˆ°ï¼Œä¸èƒ½åŒæ­¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"># 1 é›†ç¾¤è§„åˆ’</span><br><span class="line">mq1: 10.0.0.100  mq1  master ä¸»èŠ‚ç‚¹</span><br><span class="line">mq2: 10.0.0.101  mq2  repl1  å‰¯æœ¬èŠ‚ç‚¹</span><br><span class="line">mq3: 10.0.0.103  mq3  repl2  å‰¯æœ¬èŠ‚ç‚¹</span><br><span class="line"></span><br><span class="line"># 2 å…‹éš†ä¸‰å°æœºå™¨ä¸»æœºåå’Œipæ˜ å°„ï¼ˆå»ºç«‹é›†ç¾¤æ—¶ä»…æ”¯æŒæŒ‰ä¸»æœºååˆ›å»ºï¼Œæ‰€ä»¥æˆ‘ä»¬åŠ å¥½æ˜ å°„ï¼‰</span><br><span class="line">vim /etc/hosts</span><br><span class="line"># åˆ†åˆ«åœ¨ä¸‰å°æœºå™¨ä¸ŠåŠ å…¥ï¼ˆç›´æ¥é€šè¿‡ä¸»æœºåå°±å¯ä»¥pingé€šï¼‰</span><br><span class="line">10.0.0.100 mq1</span><br><span class="line">10.0.0.101 mq2</span><br><span class="line">10.0.0.103 mq3</span><br><span class="line"></span><br><span class="line"># 3 ä¿®æ”¹3ä¸ªèŠ‚ç‚¹çš„ä¸»æœºåï¼ˆåˆ†åˆ«åœ¨ä¸‰å°æœºå™¨ä¸Šï¼‰</span><br><span class="line">hostname mq1</span><br><span class="line">hostname mq2</span><br><span class="line">hostname mq3</span><br><span class="line"># 4 åˆ†åˆ«åœ¨ä¸‰å°æœºå™¨ä¸Šå®‰è£…ç›¸åŒç‰ˆæœ¬çš„rabbitmq-serverï¼Œå¹¶å¯åŠ¨ï¼ˆå¯åŠ¨å°±ä¼šç”Ÿæˆcookieï¼‰</span><br><span class="line">å¯åŠ¨æŸ¥çœ‹ç®¡ç†webé¡µé¢èƒ½çœ‹åˆ°ï¼Œä½†æ˜¯ä¸æ˜¯é›†ç¾¤çŠ¶æ€</span><br><span class="line">æŸ¥çœ‹é›†ç¾¤çŠ¶æ€ä¹Ÿæ˜¯å­¤ç«‹çš„</span><br><span class="line">rabbitmqctl cluster_status</span><br><span class="line">ç°åœ¨æˆ‘ä»¬å…¨åœæ‰ï¼ˆ3å°æœºå™¨éƒ½åœæ‰ï¼‰</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 5 ä¸‰ä¸ªæœºå™¨å®‰è£…rabbitmq,å¹¶åŒæ­¥cookieæ–‡ä»¶,åœ¨mq1ä¸Šæ‰§è¡Œ:(å¯åŠ¨ä¸€éï¼Œcookieæ‰ä¼šæœ‰)</span><br><span class="line">cat /var/lib/rabbitmq/.erlang.cookie</span><br><span class="line">scp /var/lib/rabbitmq/.erlang.cookie root@mq2:/var/lib/rabbitmq/</span><br><span class="line">scp /var/lib/rabbitmq/.erlang.cookie root@mq3:/var/lib/rabbitmq/</span><br><span class="line"></span><br><span class="line"># 6 æŸ¥çœ‹cookieæ˜¯å¦ä¸€è‡´:</span><br><span class="line">mq1: cat /var/lib/rabbitmq/.erlang.cookie </span><br><span class="line">mq2: cat /var/lib/rabbitmq/.erlang.cookie </span><br><span class="line">mq3: cat /var/lib/rabbitmq/.erlang.cookie </span><br><span class="line"></span><br><span class="line"># 7 åå°å¯åŠ¨rabbitmqæ‰€æœ‰èŠ‚ç‚¹æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤,å¯åŠ¨æˆåŠŸè®¿é—®ç®¡ç†ç•Œé¢ï¼ˆä¸‰å°æœºå™¨éƒ½å¯åŠ¨ï¼Œè€ç‰ˆæœ¬webé¡µé¢çœ‹ä¸åˆ°ï¼Œæ–°ç‰ˆæœ¬èƒ½çœ‹åˆ°ï¼‰:</span><br><span class="line">rabbitmq-server -detached </span><br><span class="line"></span><br><span class="line"># 8 åœ¨mq2å’Œmq3ä¸Šåˆ†åˆ«æ‰§è¡ŒåŠ å…¥é›†ç¾¤å‘½ä»¤:</span><br><span class="line">1.å…³é—­       rabbitmqctl stop_app</span><br><span class="line">2.åŠ å…¥é›†ç¾¤    rabbitmqctl join_cluster rabbit@mq1  # ä»…æ”¯æŒå†™ä¸»æœºå</span><br><span class="line">3.å¯åŠ¨æœåŠ¡    rabbitmqctl start_app</span><br><span class="line"></span><br><span class="line"># 9 æŸ¥çœ‹é›†ç¾¤çŠ¶æ€,ä»»æ„èŠ‚ç‚¹æ‰§è¡Œ:</span><br><span class="line">rabbitmqctl cluster_status</span><br><span class="line"></span><br><span class="line"># 10 å¦‚æœå‡ºç°å¦‚ä¸‹æ˜¾ç¤º,é›†ç¾¤æ­å»ºæˆåŠŸ:</span><br><span class="line">Cluster status of node rabbit@mq1 ...</span><br><span class="line">Basics</span><br><span class="line">Cluster name: rabbit@mq1</span><br><span class="line">Disk Nodes</span><br><span class="line">rabbit@mq1</span><br><span class="line">rabbit@mq2</span><br><span class="line">rabbit@mq3</span><br><span class="line">Running Nodes</span><br><span class="line">rabbit@mq1</span><br><span class="line">rabbit@mq2</span><br><span class="line">rabbit@mq3</span><br><span class="line"># 11 ç™»å½•ç®¡ç†ç•Œé¢,å±•ç¤ºå¦‚ä¸‹çŠ¶æ€:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ³¨æ„ï¼šå¦‚æœå¯åŠ¨ä¸äº†ï¼Œåˆ é™¤/var/lib/rabbitmq/mnesiaä¸‹çš„æ‰€æœ‰é—®é¢˜é‡æ–°æ“ä½œ</span><br></pre></td></tr></table></figure><p>æµ‹è¯•å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1 ç°åœ¨æˆ‘ä»¬æŒ‚æ‰ä»èŠ‚ç‚¹æ˜¯å¯ä»¥çš„</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœ¨mq2ä¸Šæ‰§è¡Œ</span></span><br><span class="line">rabbitmqctl stop_app</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å†å¯åŠ¨ï¼ˆé›†ç¾¤ä¸å—å½±å“ï¼‰ï¼Œå†å‘å¸ƒæ¶ˆæ¯ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œåªè¦ä¸»èŠ‚ç‚¹æ´»ç€å°±å¯ä»¥</span></span><br><span class="line">rabbitmqctl start_app</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">5 æŒ‚æ‰ä¸»èŠ‚ç‚¹ï¼Œæ•´ä¸ªæœåŠ¡å°±ä¸èƒ½ç”¨äº†</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœ¨mq1ä¸Šæ‰§è¡Œ</span></span><br><span class="line">rabbitmqctl stop_app</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é›†ç¾¤ä¸èƒ½ç”¨äº†ï¼ˆä¸¤ä¸ªä»èŠ‚ç‚¹ä¸èƒ½å¯¹å¤–æä¾›æœåŠ¡ï¼‰ï¼Œå¦‚æœæ¶ˆæ¯æ˜¯ä¸æŒä¹…åŒ–çš„æ¶ˆæ¯ï¼Œä¸»èŠ‚ç‚¹æŒ‚äº†ï¼Œæ¶ˆæ¯å°±æ²¡äº†</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‘å¸ƒæ¶ˆæ¯å¯ä»¥å‘å¸ƒåˆ°ä¸»ï¼Œä»èŠ‚ç‚¹ï¼›æ¶ˆè´¹æ¶ˆæ¯ä¹Ÿå¯ä»¥ä»ä¸»ä»èŠ‚ç‚¹æ¶ˆè´¹</span></span><br><span class="line">rabbitmqctl start_app</span><br></pre></td></tr></table></figure><h3 id="3-2-é•œåƒé›†ç¾¤"><a href="#3-2-é•œåƒé›†ç¾¤" class="headerlink" title="3.2 é•œåƒé›†ç¾¤"></a>3.2 é•œåƒé›†ç¾¤</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">0.ç­–ç•¥è¯´æ˜</span></span><br><span class="line">rabbitmqctl set_policy [-p &lt;vhost&gt;] [--priority &lt;priority&gt;] [--apply-to &lt;apply-to&gt;] &lt;name&gt; &lt;pattern&gt;  &lt;definition&gt;</span><br><span class="line">-p Vhostï¼š å¯é€‰å‚æ•°ï¼Œé’ˆå¯¹æŒ‡å®švhostä¸‹çš„queueè¿›è¡Œè®¾ç½®</span><br><span class="line">Name:     policyçš„åç§°</span><br><span class="line">Pattern: queueçš„åŒ¹é…æ¨¡å¼(æ­£åˆ™è¡¨è¾¾å¼)</span><br><span class="line">Definitionï¼šé•œåƒå®šä¹‰ï¼ŒåŒ…æ‹¬ä¸‰ä¸ªéƒ¨åˆ†ha-mode, ha-params, ha-sync-mode</span><br><span class="line">                ha-mode:æŒ‡æ˜é•œåƒé˜Ÿåˆ—çš„æ¨¡å¼ï¼Œæœ‰æ•ˆå€¼ä¸º all/exactly/nodes</span><br><span class="line">                      allï¼šè¡¨ç¤ºåœ¨é›†ç¾¤ä¸­æ‰€æœ‰çš„èŠ‚ç‚¹ä¸Šè¿›è¡Œé•œåƒ</span><br><span class="line">                      exactlyï¼šè¡¨ç¤ºåœ¨æŒ‡å®šä¸ªæ•°çš„èŠ‚ç‚¹ä¸Šè¿›è¡Œé•œåƒï¼ŒèŠ‚ç‚¹çš„ä¸ªæ•°ç”±ha-paramsæŒ‡å®š</span><br><span class="line">                      nodesï¼šè¡¨ç¤ºåœ¨æŒ‡å®šçš„èŠ‚ç‚¹ä¸Šè¿›è¡Œé•œåƒï¼ŒèŠ‚ç‚¹åç§°é€šè¿‡ha-paramsæŒ‡å®š</span><br><span class="line">             ha-paramsï¼šha-modeæ¨¡å¼éœ€è¦ç”¨åˆ°çš„å‚æ•°</span><br><span class="line">             ha-sync-modeï¼šè¿›è¡Œé˜Ÿåˆ—ä¸­æ¶ˆæ¯çš„åŒæ­¥æ–¹å¼ï¼Œæœ‰æ•ˆå€¼ä¸ºautomatic(è‡ªåŠ¨)å’Œmanualï¼ˆæ‰‹åŠ¨ï¼‰</span><br><span class="line">             priorityï¼šå¯é€‰å‚æ•°ï¼Œpolicyçš„ä¼˜å…ˆçº§</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1.æŸ¥çœ‹å½“å‰ç­–ç•¥ï¼ˆå¯ä»¥åœ¨ä»»æ„èŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼‰</span></span><br><span class="line">rabbitmqctl list_policies</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2.æ·»åŠ ç­–ç•¥</span></span><br><span class="line">rabbitmqctl set_policy ha-all &#x27;^lqz&#x27; &#x27;&#123;&quot;ha-mode&quot;:&quot;all&quot;,&quot;ha-sync-mode&quot;:&quot;automatic&quot;&#125;&#x27; </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¯´æ˜:ç­–ç•¥æ­£åˆ™è¡¨è¾¾å¼ä¸º â€œ^â€ è¡¨ç¤ºæ‰€æœ‰åŒ¹é…æ‰€æœ‰é˜Ÿåˆ—åç§°  ^lqz:åŒ¹é…lqzå¼€å¤´é˜Ÿåˆ—</span></span><br><span class="line">rabbitmqctl set_policy ha-all &#x27;^&#x27; &#x27;&#123;&quot;ha-mode&quot;:&quot;all&quot;,&quot;ha-sync-mode&quot;:&quot;automatic&quot;&#125;&#x27; </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯¹æ‰€æœ‰é˜Ÿåˆ—éƒ½åšåŒæ­¥</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">3.åˆ é™¤ç­–ç•¥</span></span><br><span class="line">rabbitmqctl clear_policy ha-all</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">4.æµ‹è¯•é›†ç¾¤</span></span><br><span class="line">åœæ‰ä¸»èŠ‚ç‚¹ï¼Œå…¶ä»–èŠ‚ç‚¹ä¾ç„¶å¯ä»¥æä¾›æœåŠ¡</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MQ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2022/10/18/hello-world/"/>
      <url>/2022/10/18/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hello </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
